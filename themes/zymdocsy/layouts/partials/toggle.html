<div class="js-toggle-wrapper" onload="setSwitchTheme(this)">
  <label class="switch">
    <input class="switch__input" type="checkbox" role="switch" onChange="setTheme(this.checked)">
    <svg class="switch__icon switch__icon--light" viewBox="0 0 12 12" width="12px" height="12px" aria-hidden="true">
      <g fill="none" stroke="#fff" stroke-width="1" stroke-linecap="round">
        <circle cx="6" cy="6" r="2" />
        <g stroke-dasharray="1.5 1.5">
          <polyline points="6 10,6 11.5" transform="rotate(0,6,6)" />
          <polyline points="6 10,6 11.5" transform="rotate(45,6,6)" />
          <polyline points="6 10,6 11.5" transform="rotate(90,6,6)" />
          <polyline points="6 10,6 11.5" transform="rotate(135,6,6)" />
          <polyline points="6 10,6 11.5" transform="rotate(180,6,6)" />
          <polyline points="6 10,6 11.5" transform="rotate(225,6,6)" />
          <polyline points="6 10,6 11.5" transform="rotate(270,6,6)" />
          <polyline points="6 10,6 11.5" transform="rotate(315,6,6)" />
        </g>
      </g>
    </svg>
    <svg class="switch__icon switch__icon--dark" viewBox="0 0 12 12" width="12px" height="12px" aria-hidden="true">
      <g fill="none" stroke="#fff" stroke-width="1" stroke-linejoin="round" transform="rotate(-45,6,6)">
        <path
          d="m9,10c-2.209,0-4-1.791-4-4s1.791-4,4-4c.304,0,.598.041.883.105-.995-.992-2.367-1.605-3.883-1.605C2.962.5.5,2.962.5,6s2.462,5.5,5.5,5.5c1.516,0,2.888-.613,3.883-1.605-.285.064-.578.105-.883.105Z" />
      </g>
    </svg>
    <span class="switch__sr">Dark Mode</span>
  </label>
</div>
<style>

:root {
	--hue: 223;
  --fg: rgb(45, 45, 45);
  --bg: #f5f5f5;
	/* --bg: hsl(var(--hue),10%,90%);
	--fg: hsl(var(--hue),10%,10%); */
	--primary: hsl(var(--hue),90%,50%);
	--trans-dur: 0.3s;
	--trans-timing: cubic-bezier(0.76,0.05,0.24,0.95);
	--trans-timing-in: cubic-bezier(0.76,0.05,0.86,0.06);
	--trans-timing-out: cubic-bezier(0.05,0.76,0.06,0.86);
	/* font-size: calc(40px + (80 - 40) * (100vw - 320px) / (2560 - 320)); */
}
body,
input {
	color: var(--fg);
	font: 1em/1.5 sans-serif;
}

/* body:has(.switch__input:checked) {
	background-color: var(--fg);
	color: var(--bg);
} */
.switch {
	margin: auto;
	position: relative;
}
.switch__icon,
.switch__input {
	display: block;

}
.switch__icon {
    position: absolute;
    top: 0.4em;
    right: .75em;
    width: .9em;
    height: .9em;
    transition: opacity calc(var(--trans-dur) / 2),
		transform calc(var(--trans-dur) / 2);
}

.switch__icon polyline {
	transition: stroke-dashoffset calc(var(--trans-dur) / 2);
}
.switch__icon--light,
.switch__icon--light polyline {
	transition-delay: calc(var(--trans-dur) / 2);
	transition-timing-function: var(--trans-timing-out);
  right: .35em;
}
.switch__icon--dark {
	opacity: 0;
	transform: translateX(-0.75em) rotate(30deg) scale(0.75);
	transition-timing-function: var(--trans-timing-in);
}
.switch__input {
	background-color: hsl(210,90%,70%);
	border-radius: 1em;
	box-shadow:
		0 0 0 0.125em hsla(var(--hue),90%,50%,0),
		0.125em 0.125em 0.25em hsla(var(--hue),90%,10%,0.2);
	outline: transparent;
	position: relative;
	width: 3.5em;
	height: 1.75em;
	-webkit-appearance: none;
	appearance: none;
	-webkit-tap-highlight-color: transparent;
	transition:
		background-color var(--trans-dur) var(--trans-timing),
		box-shadow 0.15s linear;
}
.switch__input:focus-visible {
	box-shadow:
		0 0 0 0.125em hsl(var(--hue),90%,50%),
		0.125em 0.125em 0.25em hsla(var(--hue),90%,10%,0.2);
}
.switch__input:before,
.switch__input:after {
	content: "";
	display: block;
	position: absolute;
}
.switch__input:before {
	background-color: hsl(50,90%,50%);
	border-radius: inherit;
	mask-image: linear-gradient(120deg,hsl(0,0%,0%) 20%,hsla(0,0%,0%,0) 80%);
	-webkit-mask-image: linear-gradient(120deg,hsl(0,0%,0%) 20%,hsla(0,0%,0%,0) 80%);
	inset: 0;
	transition: background-color var(--trans-dur) var(--trans-timing);

}
.switch__input:after {
	background-color: hsl(0,0%,100%);
	/* padding: 6px;
	padding-bottom: 0px; */
	content: url("data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20id%3D%22a%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2053.06%2049.23%22%3E%3Cellipse%20cx%3D%2226.53%22%20cy%3D%2224.61%22%20rx%3D%2225.96%22%20ry%3D%2224.04%22%20fill%3D%22%23fff%22%20stroke%3D%22%23fff%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%221.15%22%2F%3E%3Cpath%20d%3D%22M26.53%2C2.62C13.76%2C2.62%2C3.38%2C12.39%2C3.38%2C24.4c0%2C6.1%2C2.75%2C11.96%2C7.52%2C16.07.16.14.32.27.48.4.11.09.22.16.33.23.01%2C0%2C.03.02.04.03%2C0%2C0%2C0%2C0%2C0%2C0%2C.18.11.38.19.58.23.65.15%2C1.36-.01%2C1.86-.49l.76-.71c.44-.42.63-.98.56-1.52-.04-.35-.19-.69-.45-.98-.11-.14-.23-.26-.37-.38-.12-.1-.25-.2-.38-.32-1.93-1.66-3.43-3.69-4.43-5.91-.94-2.09-1.46-4.35-1.46-6.66%2C0-9.39%2C8.12-17.03%2C18.11-17.03s18.11%2C7.64%2C18.11%2C17.03c0%2C1.08-.11%2C2.15-.32%2C3.19-.04.22-.05.44-.03.65%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C.04%2C0%2C.08.01.12%2C0%2C.02%2C0%2C.03%2C0%2C.05%2C0%2C.04.01.07.02.11%2C0%2C.02%2C0%2C.04.01.06%2C0%2C.03.02.07.03.1%2C0%2C.02.01.04.02.06.01.03.02.06.04.09%2C0%2C0%2C0%2C.02%2C0%2C.02.01.03.02.05.04.08%2C0%2C.01.01.02.02.04.02.04.05.09.08.13%2C0%2C.01.01.02.02.03.3.44.8.76%2C1.39.84l1.06.13c.72.09%2C1.39-.2%2C1.8-.7.13-.16.23-.33.3-.53.05-.13.1-.26.13-.41.27-1.34.41-2.71.41-4.08%2C0-12.01-10.39-21.78-23.15-21.78Z%22%20fill%3D%22%23478ecc%22%20stroke%3D%22%23478ecc%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%221.19%22%2F%3E%3Cpath%20d%3D%22M44.48%2C35.33l-.8-.67c-.65-.54-1.57-.61-2.28-.23-.03.02-.06.03-.09.05-.02.01-.05.03-.07.05-.03.02-.06.04-.08.06-.16.12-.31.25-.44.4-.4.48-.83.92-1.28%2C1.35-.03.03-.08.05-.11.08-1.66%2C1.56-3.59%2C2.79-5.75%2C3.65-2.01.8-4.15%2C1.24-6.37%2C1.32l-.69.02%2C10.2-19.31s.01-.03.02-.04c.04-.07.07-.14.1-.22.03-.07.05-.14.07-.2.03-.1.05-.19.07-.29.01-.09.03-.18.03-.27%2C0-.04.01-.07.01-.11%2C0-.03%2C0-.05%2C0-.07%2C0-.13-.02-.25-.04-.38-.01-.06-.03-.13-.05-.19-.02-.07-.04-.14-.07-.21-.03-.07-.06-.15-.09-.22-.05-.09-.09-.18-.15-.27%2C0%2C0%2C0%2C0-.01-.01-.04-.06-.09-.12-.14-.18-.04-.05-.09-.11-.14-.16-.05-.05-.1-.11-.16-.16-.05-.05-.11-.09-.17-.13-.11-.08-.23-.16-.36-.23-.04-.02-.07-.04-.11-.06%2C0%2C0-.02%2C0-.03%2C0-.17-.08-.35-.14-.54-.19%2C0%2C0%2C0%2C0-.01%2C0-.2-.04-.4-.07-.62-.07h-14.82s0%2C0%2C0%2C0h-.49s-.03%2C0-.04%2C0c-.01%2C0-.03%2C0-.04%2C0-.24%2C0-.46.04-.67.1-.84.26-1.44%2C1.01-1.45%2C1.89v.54s0%2C0%2C0%2C0%2C0%2C0%2C0%2C0v.53c0%2C.88.61%2C1.63%2C1.45%2C1.89.21.06.43.1.66.1.02%2C0%2C.03%2C0%2C.05%2C0%2C.02%2C0%2C.03%2C0%2C.05%2C0h.38s.07.01.11.01h10.47s-9.83%2C18.6-9.83%2C18.6c-.18.26-.3.52-.36.78-.14.6-.02%2C1.22.33%2C1.74.34.49.85.83%2C1.53.99.19.08.38.15.6.19%2C1.41.25%2C2.86.38%2C4.31.38%2C7.1%2C0%2C13.71-3%2C18.13-8.23.08-.1.15-.2.21-.3%2C0%2C0%2C0-.01.01-.02.45-.74.31-1.71-.4-2.3Z%22%20fill%3D%22%23478ecc%22%20stroke%3D%22%23478ecc%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%221.19%22%2F%3E%3C%2Fsvg%3E");
	border-radius: 50%;
	box-shadow: 0.05em 0.05em 0.05em hsla(var(--hue),90%,10%,0.1);
/* 	.125em; */
	top: .175em;
    left: .1em;
    width: 1.5em;
    height: 1.5em;
	transition:
		background-color var(--trans-dur) var(--trans-timing),
		transform var(--trans-dur) var(--trans-timing);
	z-index: 1;
	/* animation: rotate 2s */
}
.switch__input:checked {
	background-color: hsl(290,90%,40%);

}
.switch__input:checked:before {
	background-color: hsl(220,90%,40%);
}
.switch__input:checked:after {
	background-color: hsl(0,0%,0%);
	content: url("data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%3Csvg%20id%3D%22a%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2051.91%2048.08%22%3E%3Cpath%20d%3D%22M25.96%2C2.04C13.19%2C2.04%2C2.8%2C11.82%2C2.8%2C23.83c0%2C6.1%2C2.75%2C11.96%2C7.52%2C16.07.16.14.32.27.48.4.11.09.22.16.33.23.01%2C0%2C.03.02.04.03%2C0%2C0%2C0%2C0%2C0%2C0%2C.18.11.38.19.58.23.65.15%2C1.36-.01%2C1.86-.49l.76-.71c.44-.42.63-.98.56-1.52-.04-.35-.19-.69-.45-.98-.11-.14-.23-.26-.37-.38-.12-.1-.25-.2-.38-.32-1.93-1.66-3.43-3.69-4.43-5.91-.94-2.09-1.46-4.35-1.46-6.66C7.85%2C14.43%2C15.97%2C6.79%2C25.96%2C6.79s18.11%2C7.64%2C18.11%2C17.03c0%2C1.08-.11%2C2.15-.32%2C3.19-.04.22-.05.44-.03.65%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C.04%2C0%2C.08.01.12%2C0%2C.02%2C0%2C.03%2C0%2C.05%2C0%2C.04.01.07.02.11%2C0%2C.02%2C0%2C.04.01.06%2C0%2C.03.02.07.03.1%2C0%2C.02.01.04.02.06.01.03.02.06.04.09%2C0%2C0%2C0%2C.02%2C0%2C.02.01.03.02.05.04.08%2C0%2C.01.01.02.02.04.02.04.05.09.08.13%2C0%2C.01.01.02.02.03.3.44.8.76%2C1.39.84l1.06.13c.72.09%2C1.39-.2%2C1.8-.7.13-.16.23-.33.3-.53.05-.13.1-.26.13-.41.27-1.34.41-2.71.41-4.08%2C0-12.01-10.39-21.78-23.15-21.78Z%22%20fill%3D%22%23478ecc%22%20stroke%3D%22%23478ecc%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%221.19%22%2F%3E%3Cpath%20d%3D%22M43.91%2C34.76l-.8-.67c-.65-.54-1.57-.61-2.28-.23-.03.02-.06.03-.09.05-.02.01-.05.03-.07.05-.03.02-.06.04-.08.06-.16.12-.31.25-.44.4-.4.48-.83.92-1.28%2C1.35-.03.03-.08.05-.11.08-1.66%2C1.56-3.59%2C2.79-5.75%2C3.65-2.01.8-4.15%2C1.24-6.37%2C1.32l-.69.02%2C10.2-19.31s.01-.03.02-.04c.04-.07.07-.14.1-.22.03-.07.05-.14.07-.2.03-.1.05-.19.07-.29.01-.09.03-.18.03-.27%2C0-.04.01-.07.01-.11%2C0-.03%2C0-.05%2C0-.07%2C0-.13-.02-.25-.04-.38-.01-.06-.03-.13-.05-.19-.02-.07-.04-.14-.07-.21-.03-.07-.06-.15-.09-.22-.05-.09-.09-.18-.15-.27%2C0%2C0%2C0%2C0-.01-.01-.04-.06-.09-.12-.14-.18-.04-.05-.09-.11-.14-.16-.05-.05-.1-.11-.16-.16-.05-.05-.11-.09-.17-.13-.11-.08-.23-.16-.36-.23-.04-.02-.07-.04-.11-.06%2C0%2C0-.02%2C0-.03%2C0-.17-.08-.35-.14-.54-.19%2C0%2C0%2C0%2C0-.01%2C0-.2-.04-.4-.07-.62-.07h-14.82s0%2C0%2C0%2C0h-.49s-.03%2C0-.04%2C0c-.01%2C0-.03%2C0-.04%2C0-.24%2C0-.46.04-.67.1-.84.26-1.44%2C1.01-1.45%2C1.89v.54s0%2C0%2C0%2C0%2C0%2C0%2C0%2C0v.53c0%2C.88.61%2C1.63%2C1.45%2C1.89.21.06.43.1.66.1.02%2C0%2C.03%2C0%2C.05%2C0%2C.02%2C0%2C.03%2C0%2C.05%2C0h.38s.07.01.11.01h10.47s-9.83%2C18.6-9.83%2C18.6c-.18.26-.3.52-.36.78-.14.6-.02%2C1.22.33%2C1.74.34.49.85.83%2C1.53.99.19.08.38.15.6.19%2C1.41.25%2C2.86.38%2C4.31.38%2C7.1%2C0%2C13.71-3%2C18.13-8.23.08-.1.15-.2.21-.3%2C0%2C0%2C0-.01.01-.02.45-.74.31-1.71-.4-2.3Z%22%20fill%3D%22%23478ecc%22%20stroke%3D%22%23478ecc%22%20stroke-miterlimit%3D%2210%22%20stroke-width%3D%221.19%22%2F%3E%3Cellipse%20cx%3D%2225.96%22%20cy%3D%2224.04%22%20rx%3D%2225.96%22%20ry%3D%2224.04%22%20fill%3D%22none%22%2F%3E%3C%2Fsvg%3E");
	transform: translateX(.35em) rotate(45deg);
	transform: translateX(.75em) rotate(90deg);
	transform: translateX(1.10em) rotate(225deg);
	transform: translateX(1.5em) rotate(360deg);
  left: .35em;


}
.switch__input:checked ~ .switch__icon--light,
.switch__input:checked ~ .switch__icon--light polyline {
	transition-delay: 0s;
	transition-timing-function: var(--trans-timing-in);
}
.switch__input:checked ~ .switch__icon--light {
	opacity: 0;
	transform: translateX(-0.75em) scale(0.75);
}
.switch__input:checked ~ .switch__icon--light polyline {
	stroke-dashoffset: 1.5;
}
.switch__input:checked ~ .switch__icon--dark {
	opacity: 1;
	transform: translateX(-1.5em);
	transition-delay: calc(var(--trans-dur) / 2);
	transition-timing-function: var(--trans-timing-out);
}
.switch__sr {
	overflow: hidden;
	position: absolute;
	width: 1px;
	height: 1px;
}

</style>
