---
title: Bootware and Secure Boot
linkTitle: Bootware and Secure Boot
description: Description of Secure Boot process
date: "2025-03-28"
lastmod: "2025-11-05"
draft: false
images: []
type: docs
layout: single
weight: 90
toc: true
---

-----

### Description of Secure Boot

This explains Bootware integration with Secure Boot.

### Steps to setup Secure Boot

Bootware integration with Secure Boot is supported on Pi4, Pi5, and SEN500 (CM5-based) platforms. Choose your platform:

## Platforms

{{< tabpane text=true >}}

{{% tab header="Raspberry Pi 5" %}}

####  Steps to enable secure boot on Pi5.

## Get up and running with SIGNED_BOOT and pre-existing/supplied RSA boot signing key (BSK)

1. Start with:
    1. RPi Bookworm Lite 2025-11-24 or Ubuntu 24.04.3 LTS SD card with expanded boot partition (1GiB)
    2. Raspberry Pi 5 with EEPROM restored to factory defaults
    3. A 2048-bit RSA (private) key stored in the PEM format. This will be used as the boot signing key (BSK).
2. follow standard (pre-2.0) bringup procedure, up until completion of `zbcli install` 
    1. enable I2C, install zymkey driver, download zbcli, etc. etc.
3. Import the private BSK PEM with `zbcli update-config`. This will trigger a re-sign of all existing boot disk image artifacts in `/boot/firmware`, emitting new signature files (`*.sig`) generated by the new BSK. 
The timestamps on these files should reflect (roughly) the time at which this operation was performed. If they are older, then no re-signing has occurred ([BUG])
    1. Via TUI: navigate to `Configure Secure Boot parameters and credentials` > `Configure the boot signing key`, and enter the path to the private key in PEM format you wish to use as your BSK
    2. Via CLI: run `zbcli update-config --bsk <private-key.pem>` 
4. Set the `SIGNED_BOOT` flag in the Pi’s EEPROM and program the newly imported BSK using `zbcli update-config`:
    1. Via TUI: navigate to `Configure Secure Boot parameters and credentials` > `Turn on Signed Boot (Flash EEPROM)` .
    2. Via CLI: run `zbcli update-config --signed-boot`
    
    Wait for the operation to complete (5-15 seconds). Once done, the Pi will *only* be able to start up from a FAT disk image file signed with your (private) BSK, so do not lose it! If you wish to disable this behavior, the Pi can still be restored to factory settings with the [rpiboot utility](GitHub link).
    
5. (Optional) reboot now to confirm that everything has been set up properly. You should briefly see a message on the screen indicating that the Pi’s bootloader has successfully validated the signature of `boot.img` against the contents of the `boot.sig` file present on-disk.
6. Proceed with using bootware by creating a new ZI image using `zbcli imager` or installing an existing one using `zbcli update`*

*Image must have been created by `zbcli` ≥ version 2.0

## Get up and running with full secure boot, including programmed OTP

1. Start with:
    1. SD card with expanded boot partition (1GiB)
    2. Raspberry Pi 5 with EEPROM restored to factory defaults
    3. A second Raspberry Pi 5 with its secure-boot OTP fuse programmed
    4. The 2048-bit RSA private key whose public counterpart has been burned into the aforementioned Pi 5’s secure-boot OTP.
2. Using items (a), (b), and (d), follow steps 2-5 in the above “**Get up and running with SIGNED_BOOT and pre-existing/supplied RSA boot signing key (BSK)**”
3. Before running `zbcli update` (which will tie filesystem encryption to the Pi’s Zymkey + CPU combo), transfer the SD card from the first Pi 5 into the one with a programmed OTP. The new Pi should start up into Linux just as the former one did. 
    1. If it doesn’t boot, double-check that the `boot.sig` file on the FAT partition matches the signature of `boot.img` and is signed with the correct private key. An easy way to do this is by attaching the SD card to another computer and comparing the output of `/usr/bin/rpi-eeprom-digest -i boot.img -o /dev/stdout -k private-key.rsa` to the contents of `boot.sig` 
4. Proceed with using bootware

{{% /tab %}}

{{% tab header="Raspberry Pi 4" %}}

#### Steps to enable secure boot on Pi4


> Not supported in Bootware 2.0.0-Beta

{{% /tab %}}

{{% tab header="Zymbit SEN500" %}}

#### Steps to enable secure boot on Zymbit SEN500 or CM5

> Not supported in Bootware 2.0.0-Beta

{{% /tab %}}

{{< /tabpane >}}

