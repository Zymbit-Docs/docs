<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.79.1"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=/favicons/android-chrome-512x512.png sizes=512x512><title>HSM4 FAQ & Troubleshooting |</title><meta name=description content><meta property="og:title" content="HSM4 FAQ & Troubleshooting"><meta property="og:description" content="Troubleshooting  Troubleshooting Checklist Before contacting Zymbit with troubleshooting related questions, please read through the following troubleshooting checklist.
 Power supply. The recommended power for the PI4 is 5V and 3 amps. Most of the problems we see are from a poor power source. Start with a good power supply from the PI foundation or Canakit, not a phone charger. I2C enabled. Double check that you have enabled the I2C bus."><meta property="og:type" content="article"><meta property="og:url" content="https://docs.zymbit.com/quickstart/faq/hsm4/"><meta property="og:image" content="https://docs.zymbit.com/doks.png"><meta property="article:modified_time" content="2021-08-16T16:38:29-07:00"><meta property="og:site_name" content="Zymbit Documentation"><meta itemprop=name content="HSM4 FAQ & Troubleshooting"><meta itemprop=description content="Troubleshooting  Troubleshooting Checklist Before contacting Zymbit with troubleshooting related questions, please read through the following troubleshooting checklist.
 Power supply. The recommended power for the PI4 is 5V and 3 amps. Most of the problems we see are from a poor power source. Start with a good power supply from the PI foundation or Canakit, not a phone charger. I2C enabled. Double check that you have enabled the I2C bus."><meta itemprop=dateModified content="2021-08-16T16:38:29-07:00"><meta itemprop=wordCount content="2639"><meta itemprop=image content="https://docs.zymbit.com/doks.png"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://docs.zymbit.com/doks.png"><meta name=twitter:title content="HSM4 FAQ & Troubleshooting"><meta name=twitter:description content="Troubleshooting  Troubleshooting Checklist Before contacting Zymbit with troubleshooting related questions, please read through the following troubleshooting checklist.
 Power supply. The recommended power for the PI4 is 5V and 3 amps. Most of the problems we see are from a poor power source. Start with a good power supply from the PI foundation or Canakit, not a phone charger. I2C enabled. Double check that you have enabled the I2C bus."><link rel=preload href=/scss/main.min.acbd5ea05b44bd9f342a15c7931930238e42668955943f2a2fb9ad6053ae9df6.css as=style><link href=/scss/main.min.acbd5ea05b44bd9f342a15c7931930238e42668955943f2a2fb9ad6053ae9df6.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><img class=navbar-logo src=https://docs.zymbit.com/Zymbit-Logo.gif></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-4 col-xl-3 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m--li><a href=/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section tree-root" id=m-><span>Welcome to Zymbit Documentation</span></a><ul class="pr-md-3 ul-1"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-quickstart-li><span class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section"><span>QUICKSTART</span></span><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-quickstartgetting-started-li><a href=/quickstart/getting-started/ title="Getting Started with Zymbit Products" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-quickstartgetting-started><i class="fas fa-caret-right"></i><span>Getting Started</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-quickstartgetting-startedzymkey4-li><a href=/quickstart/getting-started/zymkey4/ title="Getting Started with Zymkey4" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-quickstartgetting-startedzymkey4><span>ZYMKEY4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-quickstartgetting-startedhsm4-li><a href=/quickstart/getting-started/hsm4/ title="Getting Started with HSM4" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-quickstartgetting-startedhsm4><span>HSM4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-quickstartgetting-startedhsm6-li><a href=/quickstart/getting-started/hsm6/ title="Getting Started with HSM6" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-quickstartgetting-startedhsm6><span>HSM6</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-quickstartapi-li><a href=/quickstart/api/ title="API Documentation" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-quickstartapi><i class="fas fa-caret-right"></i><span>API</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-quickstartapic_api-li><a href=/quickstart/api/c_api/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-quickstartapic_api><span>C API Documentation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-quickstartapicpp_api-li><a href=/quickstart/api/cpp_api/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-quickstartapicpp_api><span>C++ API Documentation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-quickstartapipython_api-li><a href=/quickstart/api/python_api/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-quickstartapipython_api><span>Python API Documentation</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-quickstartfaq-li><a href=/quickstart/faq/ title="FAQ & Troubleshooting" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-quickstartfaq><i class="fas fa-caret-right"></i><span>FAQ</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-quickstartfaqzymkey4-li><a href=/quickstart/faq/zymkey4/ title="Zymkey4 FAQ & Troubleshooting" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-quickstartfaqzymkey4><span>ZYMKEY4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-quickstartfaqhsm4-li><a href=/quickstart/faq/hsm4/ title="HSM4 FAQ & Troubleshooting" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__page" id=m-quickstartfaqhsm4><span class=td-sidebar-nav-active-item>HSM4</span></a><ul class="pr-md-3 ul-4" id=InlineTOC><nav id=TableOfContents><ul><li><a href=#troubleshooting><strong>Troubleshooting</strong></a><ul><li><a href=#troubleshooting-checklist><strong>Troubleshooting Checklist</strong></a><ul><li></li></ul></li><li><a href=#encrypting-root-file-system><strong>Encrypting Root File System</strong></a><ul><li></li></ul></li><li><a href=#for-more-help-see-zymbits-community-forumhttpscommunityzymbitcom>For more help, see Zymbit&rsquo;s <a href=https://community.zymbit.com/>Community Forum</a>.</a></li></ul></li><li><a href=#features><strong>Features</strong></a><ul><li><ul><li></li></ul></li><li><a href=#battery--power-questions><strong>Battery & Power Questions</strong></a><ul><li></li></ul></li><li><a href=#kernel--kernel-boot-questions><strong>Kernel & Kernel Boot Questions</strong></a><ul><li></li></ul></li><li><a href=#production-self-destruct-mode-questions><strong>Production (“self-destruct”) Mode Questions</strong></a><ul><li></li></ul></li></ul></li><li><a href=#other><strong>Other</strong></a><ul><li><ul><li></li></ul></li></ul></li></ul></nav></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-quickstartfaqhsm6-li><a href=/quickstart/faq/hsm6/ title="HSM6 FAQ & Troubleshooting" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-quickstartfaqhsm6><span>HSM6</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-quickstartfaqgeneral-li><a href=/quickstart/faq/general/ title="FAQ & Troubleshooting" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-quickstartfaqgeneral><span>GENERAL</span></a></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-reference-li><span class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section"><span>REFERENCE</span></span><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referencecad-li><a href=/reference/cad/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-referencecad><i class="fas fa-caret-right"></i><span>CAD</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-referencecadzymkey4-li><a href=/reference/cad/zymkey4/ title="Zymkey4 CAD Files" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-referencecadzymkey4><span>ZYMKEY4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-referencecadhsm4-li><a href=/reference/cad/hsm4/ title="HSM4 CAD Files" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-referencecadhsm4><span>HSM4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-referencecadhsm6-li><a href=/reference/cad/hsm6/ title="HSM6 CAD Files" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-referencecadhsm6><span>HSM6</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referenceconformity-li><a href=/reference/conformity/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-referenceconformity><i class="fas fa-caret-right"></i><span>Conformity Documents</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-referenceconformityzymkey4-li><a href=/reference/conformity/zymkey4/ title="Zymkey4 Conformity Documents" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-referenceconformityzymkey4><span>ZYMKEY4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-referenceconformityhsm4-li><a href=/reference/conformity/hsm4/ title="HSM4 Conformity Documents" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-referenceconformityhsm4><span>HSM4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-referenceconformityhsm6-li><a href=/reference/conformity/hsm6/ title="HSM6 Conformity Documents" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-referenceconformityhsm6><span>HSM6</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referenceknown-issues-li><a href=/reference/known-issues/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-referenceknown-issues><i class="fas fa-caret-right"></i><span>Known Issues</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-referenceknown-issuescpu-scaling-li><a href=/reference/known-issues/cpu-scaling/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-referenceknown-issuescpu-scaling><span>CPU Scaling Governor</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencepower-quality-li><a href=/reference/power-quality/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-referencepower-quality><i class="fas fa-genderless"></i><span>Power Quality Considerations</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-referenceproduct-briefs-li><a href=/reference/product-briefs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-referenceproduct-briefs><i class="fas fa-caret-right"></i><span>Product Briefs</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-referenceproduct-briefszymkey4-li><a href=https://www.zymbit.com/datasheets/zymkey-4i target=_blank rel=noopener class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-referenceproduct-briefszymkey4><span>ZYMKEY4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-referenceproduct-briefshsm4-li><a href=https://www.zymbit.com/datasheets/hsm4 target=_blank rel=noopener class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-referenceproduct-briefshsm4><span>HSM4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-referenceproduct-briefshsm6-li><a href=https://www.zymbit.com/datasheets/hsm6 target=_blank rel=noopener class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-referenceproduct-briefshsm6><span>HSM6</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-referenceproduct-briefsmfg-app-li><a href=https://www.zymbit.com/datasheets/manufacturing-appliance-1 target=_blank rel=noopener class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-referenceproduct-briefsmfg-app><span>Manufacturing Appliance</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-referencereal-time-clock-li><a href=/reference/real-time-clock/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-referencereal-time-clock><i class="fas fa-genderless"></i><span>Real Time Clock Operation</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-tutorials-li><span class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section"><span>TUTORIALS</span></span><ul class="pr-md-3 ul-2"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialsalternative-gpio-li><a href=/tutorials/alternative-gpio/ title="Using an Alternative GPIO Pin" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-tutorialsalternative-gpio><i class="fas fa-genderless"></i><span>Alternative GPIO Pin</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialsdigital-wallet-li><a href=/tutorials/digital-wallet/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-tutorialsdigital-wallet><i class="fas fa-genderless"></i><span>Digital Wallet</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-tutorialsencrypt-rfs-li><a href=/tutorials/encrypt-rfs/ title="Encrypting your Root File System with dm-crypt and LUKS" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-tutorialsencrypt-rfs><i class="fas fa-caret-right"></i><span>Encrypt Root File System</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsencrypt-rfszymkey4-li><a href=/tutorials/encrypt-rfs/zymkey4/ title="Encrypting Root File System with Zymkey4" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-tutorialsencrypt-rfszymkey4><span>ZYMKEY4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsencrypt-rfshsm4-li><a href=/tutorials/encrypt-rfs/hsm4/ title="Encrypting Root File System with HSM4" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-tutorialsencrypt-rfshsm4><span>HSM4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsencrypt-rfshsm6-li><a href=/tutorials/encrypt-rfs/hsm6/ title="Encrypting Root File System with HSM6" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-tutorialsencrypt-rfshsm6><span>HSM6</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialssensor-data-li><a href=/tutorials/sensor-data/ title="Encrypting & Decrypting Sensor Data on Disk" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-tutorialssensor-data><i class="fas fa-genderless"></i><span>Encrypt Sensor Data</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-tutorialsaws-iot-li><a href=/tutorials/aws-iot/ title="AWS IoT Integrations & Client Certificates" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-tutorialsaws-iot><i class="fas fa-caret-right"></i><span>Integrate Zymbit with AWS</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsaws-iotintegrate-li><a href=/tutorials/aws-iot/integrate/ title="How to Integrate Zymbit with AWS Credentials Provider" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-tutorialsaws-iotintegrate><span>Integrate with AWS Credentials Provider</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsaws-iotjitr-li><a href=/tutorials/aws-iot/jitr/ title="AWS IoT - Just in Time Registration of Client Certificates using Lambda functions" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-tutorialsaws-iotjitr><span>Just In Time Registration</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsaws-iottls-li><a href=/tutorials/aws-iot/tls/ title="AWS IoT - TLS Client Certificate Authentication" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-tutorialsaws-iottls><span>Transport Level Security</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsaws-iotverify-sigs-li><a href=/tutorials/aws-iot/verify-sigs/ title="How to Verify Signatures against Public Key on AWS and Other Devices" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-tutorialsaws-iotverify-sigs><span>Verify Signatures</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-tutorialsperimeter-detect-li><a href=/tutorials/perimeter-detect/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-tutorialsperimeter-detect><i class="fas fa-caret-right"></i><span>Perimeter Detect</span></a><ul class="pr-md-3 ul-3"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsperimeter-detectzymkey4-li><a href=/tutorials/perimeter-detect/zymkey4/ title="Perimeter Detect: ZYMKEY4" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-tutorialsperimeter-detectzymkey4><span>ZYMKEY4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsperimeter-detecthsm4-li><a href=/tutorials/perimeter-detect/hsm4/ title="Perimeter Detect: HSM4" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-tutorialsperimeter-detecthsm4><span>HSM4</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsperimeter-detecthsm6-li><a href=/tutorials/perimeter-detect/hsm6/ title="Perimeter Detect: HSM6" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-tutorialsperimeter-detecthsm6><span>HSM6</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-tutorialsperimeter-detectexamples-li><a href=/tutorials/perimeter-detect/examples/ title="Perimeter Detect Circuit Examples" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__page" id=m-tutorialsperimeter-detectexamples><span>CIRCUIT EXAMPLES</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-tutorialsprotokit-li><a href=/tutorials/protokit/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-tutorialsprotokit><i class="fas fa-genderless"></i><span>ProtoKit5</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-forum-li><a href=https://community.zymbit.com/ target=_blank rel=noopener class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section" id=m-forum><span>FORUM</span></a></li></ul></li></ul></nav></div></div><main class="col-12 col-md-8 col-xl-7 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://docs.zymbit.com/quickstart/>QUICKSTART</a></li><li class=breadcrumb-item><a href=https://docs.zymbit.com/quickstart/faq/>FAQ</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://docs.zymbit.com/quickstart/faq/hsm4/>HSM4</a></li></ol></nav><div class=td-content><h1>HSM4 FAQ & Troubleshooting</h1><hr><h2 id=troubleshooting><strong>Troubleshooting</strong></h2><hr><h3 id=troubleshooting-checklist><strong>Troubleshooting Checklist</strong></h3><p>Before contacting Zymbit with troubleshooting related questions, please read through the following troubleshooting checklist.</p><ol><li>Power supply. The recommended power for the PI4 is 5V and 3 amps. Most of the problems we see are from a poor power source. Start with a good power supply from the PI foundation or Canakit, not a phone charger.</li><li>I2C enabled. Double check that you have enabled the I2C bus. An easy way to check is &ldquo;ls -l /dev/i2c-1&rdquo;. If /dev/i2c-1 exists, the I2C bus is enabled.</li><li>apt update and upgrade. Be sure that your software is up to date.</li><li>Installation. The curl script will reboot your system once completed. After the reboot, the blue LED on your Zymbit device should blink once every 3 seconds. You must get to this step before proceeding to encryption, etc.</li></ol><p>If your issue is not related to any of the above list, read through the FAQ below to see if your issue is answered. If you still do not see a solution to your problem, reach out on our <a href=https://community.zymbit.com/>Community Forum</a>. Thank you!</p><h5 id=q-why-does-the-led-continue-to-blink-rapidly-it-never-blinks-with-the-described-pattern-of-once-in-development-mode-or-three-times-in-production-mode-every-three-seconds>Q: Why does the LED continue to blink rapidly? It never blinks with the described pattern of once (in Development mode) or three times (in Production mode) every three seconds.</h5><details><summary>Expand for Answer</summary><br><p>A: Check the following:</p><ol><li><p>Check that the Raspberry Pi power is sufficient. The red LED on most Raspberry Pi models indicates if the Pi is being powered adequately. If it is not lit at all or flashes intermittently, try a different power supply or a different USB cable. For the RPi4, your power supply must provide at least 3 Amps.</p></li><li><p>Make sure that you have enabled i2c support using raspi-config BEFORE your install the software. Also, when you enable i2c communications be sure to follow the enable-disable-enable sequence.</p></li><li><p>If i2c support has been enabled correctly and the HSM4 LED is still rapidly blinking, check proper physical installation of the HSM4 as detailed in this &ldquo;Getting Started&rdquo; guide.</p></li><li><p>HSM4 uses GPIO header pins 3 and 5 for i2c communications and pin 7 as an interrupt signal to the Pi. Pin 7 should preferably be dedicated exclusively to HSM4. Other devices may share the i2c bus with HSM4, but there may still be address conflicts. By default, HSM4 uses slave address 0x30. If the address conflict cannot be resolved on the other i2c devices, there is a way of changing the i2c address through an API call. Using this application, the HSM4 address can be changed anywhere in the ranges of 0x30-0x37 or 0x60-0x67.</p></li></ol><details><summary>Expand for API information to change i2c address</summary><br><p>Python: <code>set_i2c_address</code></p><p>C: <code>int zkSetI2CAddr ( zkCTX ctx, int addr)</code></p><p><a href=http://docs.zymbit.com/quickstart/api/>See API Documentation</a></p></details><p></p><ol start=5><li><p>Oftentimes the 1-Wire interface relies on pin 7 (GPIO 4) for communication. If the 1-Wire interface is enabled, try disabling through raspi-config. If that resolves the problem take steps to either move the HSM4 interrupt signal from GPIO 4 or the 1-Wire interface from GPIO 4.</p></li><li><p>if the directory at <em>/var/lib/zymbit</em> or any of the files and/or subdirectories are corrupted or deleted, the HSM4 will fail to work.
<strong>IMPORTANT: if this happens when the HSM4 is locked (i.e. Production Mode), the HSM4 can never be used again.</strong></p></li></ol><hr></details><h5 id=q-the-led-blinks-rapidly-when-booting-but-eventually-turns-off-it-doesnt-blink-once-or-three-times-every-3-seconds-as-described>Q: The LED blinks rapidly when booting, but eventually turns off. It doesn&rsquo;t blink once or three times every 3 seconds as described.</h5><details><summary>Expand for Answer</summary><br><p>A: This issue could be caused by the same issues described in the first question (Why does the LED continue to blink rapidly?). Additionally, this can be caused if a locked (Production Mode) HSM4 is moved to another Pi.</p><hr></details><h5 id=q-what-do-the-different-led-blinking-patterns-mean>Q: What do the different LED blinking patterns mean?</h5><details><summary>Expand for Answer</summary><br><ol><li>1 second very rapid flash, 1 second off, 8 slow blinks<ul><li>This indicates interrupted communications.</li></ul></li></ol><p></p><ol start=2><li>1 second very rapid flash, 1 second off, 5 slow blinks<ul><li>This indicates a failure to communicate with ATECC. The most likely cause is the HSM4 is in Production Mode, tamper detect was set to self-destruct, and a tamper detect event caused the HSM4 to self-destruct. If tamper detect is not armed, this indicates a hardware problem.</li></ul></li></ol><p></p><ol start=3><li>Constant rapid blinking (waiting for host to connect)<ul><li>This indicates that you HSM4 is operational but has not bound to the host. If the HSM4 continues to blink this pattern, it could mean that there is a problem with the host Pi or that the i2c is not configured or that the i2c and wake pins are not making contact.</li></ul></li></ol><p></p><ol start=4><li>Once every 3 seconds<ul><li>This indicates that your HSM4 is working and running.</li></ul></li></ol><p></p><ol start=5><li>Three rapid blinks every 3 seconds<ul><li>This indicates the HSM4 is in Production Mode and is working and running.</li></ul></li></ol><p></p><ol start=6><li>Rapid blinking then LED off permanently<ul><li>This indicates the HSM4 is in Production Mode but cannot bind with the RPi / SD card pair. In Production Mode the binding with a particular Pi and SD card becomes permanent. Most likely cause for this is that the HSM4, the SD card, or the PI has been swapped out.</li></ul></li></ol><hr></details><h5 id=q-how-do-i-set-an-alternative-i2c-address>Q: How do I set an alternative I2C address?</h5><details><summary>Expand for Answer</summary><br><p>A: You can change the I2C address through our standard APIs:</p><ul><li>C: <code>int zkSetI2CAddr ( zkCTX ctx, int addr)</code></li><li>Python: <code>set_i2c_address</code></li></ul><p>The I2C communication between the Zymkey and the Host is encrypted, but will not interfere with other devices on the same bus (assuming there is no address conflict).</p><p><a href=http://docs.zymbit.com/quickstart/api/>See API Documentation</a></p><hr></details><h5 id=q-why-does-my-hsm4-fail-to-restart-after-cycling-power>Q: Why does my HSM4 fail to restart after cycling power?</h5><details><summary>Expand for Answer</summary><br><p>A: HSM4 monitors the quality of 5V power coming into the host computer. If the voltage drops below a specified limit, even momentarily, then HSM4 will disable all security services to the host. This is a security feature to prevent power cycle and brown-own attacks. If you are powering a display, modem, or other power-hungry device from your Pi, then check the capacity and quality of your power supply. <a href=https://docs.zymbit.com/reference/power-quality/><strong>Learn more ></strong></a></p><hr></details><h5 id=q-why-is-my-hsm4-invisible-to-the-i2c-tools-suite>Q: Why is my HSM4 &ldquo;invisible&rdquo; to the i2c-tools suite?</h5><details><summary>Expand for Answer</summary><br><p>A: Some people have become accustomed to using i2c-detect to do a first level check for correct installation and baseline functionality of i2c devices. However, these tools only really work if the i2c device communicates via a protocol that sits on top of i2c called SMBus or SMB (<a href=https://en.wikipedia.org/wiki/System_Management_Bus>System Management Bus</a>). Instead, HSM4 communicates to the host at a much more fundamental level, in part because the HSM4 protocol traffic is encrypted.</p><p>You can tell if you successfully installed it by observing the blue LED. If it is flashing once every 3 seconds, then binding completed. You can also use the systemctl command. It should say “active (running)”:</p><p><code>systemctl status zkifc</code></p><hr></details><h5 id=q-if-the-install-fails-can-i-run-it-more-than-once>Q: If the install fails, can I run it more than once?</h5><details><summary>Expand for Answer</summary><br><p>A: Yes, you should have no problem running it multiple times if it were to fail.</p><hr></details><h3 id=encrypting-root-file-system><strong>Encrypting Root File System</strong></h3><h5 id=summary-of-steps>Summary of steps</h5><ul><li>Start with a blank USB device.</li><li>USB storage should be twice the size of the SD card.</li><li>The process for encrypting the SD card stops zkifc. The blue LED will flash rapidly during the encryption process. It will return to blinking once every 3 seconds when complete.</li><li>The process will automatically do two reboots. Be patient.</li><li>If the encryption process does not complete, it&rsquo;s best to start fresh and try again.</li></ul><h5 id=q-how-can-i-check-if-the-system-matches-the-default-parameters>Q: How can I check if the system matches the default parameters?</h5><details><summary>Expand for Answer</summary><br><p>A: <code>lsblk</code> will show you the partitions. Look for the name of your / partition (default is mmcblk0p2) and the USB device (default is sda). Example output:</p><pre><code>NAME         MAJ:MIN  RM   SIZE  RO TYPE  MOUNTPOINT
mmcblk0      179:0    0   14.9G   0  disk
|-mmcblk0p1  179:1    0    256M   0  part   /boot
`-mmcblk0p2  179:2    0   14.6G   0  part   /
sda            8:0    0   32.0G   0  disk
|_sda1         8:1    0   32.0G   0  part   
</code></pre><hr></details><h5 id=q-how-can-i-monitor-the-status-after-phase-1-reboot>Q: How can I monitor the status after phase 1 reboot?</h5><details><summary>Expand for Answer</summary><br><p>A: Once you get to the second phase and login, you can monitor progress with</p><p><code>journalctl -fu cfg_SD_crfs</code></p><p>That will show you progress of the second half of the encryption process.</p><hr></details><h5 id=q-how-can-i-confirm-my-file-system-is-encrypted-and-protected>Q: How can I confirm my file system is encrypted and protected?</h5><details><summary>Expand for Answer</summary><br><p>A: Since <code>zkifc</code> is stopped during the process, the blue LED will flash rapidly until the whole process completes. Once both of the automautic reboots are completed, the blue LED will return to flashing once every 3 seconds.</p><p><code>lsblk</code> will show you that you now have a &ldquo;cryptrfs&rdquo; partition under your mmcblk0p2 (default)</p><p>If your system reboots twice, the LED returns to flashing once every 3 seconds, and <code>lsblk</code> displays a &ldquo;cryptrfs&rdquo; partition, you can be confident your system is encrypted and protected.</p><hr></details><h3 id=for-more-help-see-zymbits-community-forumhttpscommunityzymbitcom>For more help, see Zymbit&rsquo;s <a href=https://community.zymbit.com/>Community Forum</a>.</h3><hr><h2 id=features><strong>Features</strong></h2><hr><h5 id=q-what-curves-are-supported-for-zymbit-products>Q: What curves are supported for Zymbit products?</h5><details><summary>Expand for Answer</summary><br><p>Zymkey and HSM4: NIST P-256 and secp256r1</p><p>HSM6: NIST P-256, secp256r1, secp256k1, X25519, ED25519</p><hr></details><h5 id=q-how-do-i-use-hsm6s-store_foreign_public_key-function-to-store-a-zymkey-or-hsm4-public-key-on-hsm6>Q: How do I use HSM6’s <code>store_foreign_public_key</code> function to store a Zymkey or HSM4 public key on HSM6?</h5><details><summary>Expand for Answer</summary><br><p>A: The easiest way is to save the HSM4 key directly to a binary file, copy that file to the HSM6 and read in the binary file.</p><p>HSM4 side:</p><pre><code>#!/usr/bin/python3
import zymkey

# Get the public key from slot 0 and save it in a file
pub_key_file = '/tmp/pub_key_slot0'
slot = 0
key = zymkey.client.get_public_key(slot)
with open(pub_key_file, &quot;wb&quot;) as f:
    f.write(key)
</code></pre><p><em>copy /tmp/pub_key_slot0 over to the HSM6 PI</em></p><p>HSM6 side:</p><pre><code>#!/usr/bin/python3
import zymkey

key_file = &quot;/tmp/pub_key_slot0&quot;
key = open(key_file, &quot;rb&quot;).read()
# Store the key in the foreign key store
foreign_slot = zymkey.client.store_foreign_public_key('secp256r1', key)
</code></pre><hr></details><h5 id=q-how-can-i-reset-the-clock-to-the-current-timestamp>Q: How can I reset the clock to the current timestamp?</h5><details><summary>Expand for Answer</summary><br><p>A: The clock will sync to the current timestamp once the Pi has achieved NTP sync. This requires you to have access to the Internet.</p><hr></details><h5 id=q-how-do-i-access-the-devices-rtc-accelerometer-crypto-on-hsm4>Q: How do I access the devices (RTC, accelerometer, crypto) on HSM4?</h5><details><summary>Expand for Answer</summary><br><p>A: For Zymkey and HSMs, kernel drivers and libraries for all of the devices are included in the Zymkey software package via the APIs.</p><hr></details><h5 id=q-my-gpg-key-expired-and-i-cannot-access-the-zymkey-repository-how-do-i-update-the-key>Q: My GPG Key expired and I cannot access the Zymkey Repository. How do I update the Key?</h5><details><summary>Expand for Answer</summary><br><p>A: You can update your existing key with the following command:</p><p><code>curl -L https://zk-sw-repo.s3.amazonaws.com/apt-zymkey-pubkey.gpg | apt-key add -</code></p><hr></details><h5 id=q-can-the-hsm4-detect-if-the-sd-card-has-been-removed>Q: Can the HSM4 detect if the SD card has been removed?</h5><details><summary>Expand for Answer</summary><br><p>A: No, but perimeter detect can be configured to prevent access to the SD card. When a tamper event is detected, the HSM4 will, when properly configured via the API, destroy all critical key material and the root fs will fail to be decrypted upon boot.</p><hr></details><h3 id=battery--power-questions><strong>Battery & Power Questions</strong></h3><h5 id=q-should-i-use-an-external-battery-on-my-zymkey-or-hsm>Q: Should I use an external battery on my Zymkey or HSM?</h5><details><summary>Expand for Answer</summary><br><p>A: The following table compares Zymkey and HSM operational modes while connected to Main Power, Battery Power, and No Power.</p><p>The battery is required to maintain the Real Time Clock and the perimeter detect circuits when the host power is removed. Without the battery, these two functions will not be active when the host power is removed.</p><p><img src=../external-battery.png alt="external battery matrix"></p><hr></details><h5 id=q-what-happens-when-the-battery-dies-how-can-i-change-the-battery-when-it-dies-without-self-destructing-my-device>Q: What happens when the battery dies? How can I change the battery when it dies, without self-destructing my device?</h5><details><summary>Expand for Answer</summary><br><p>A: If the battery dies and the host is not connected to power, some features will go out, such as Perimeter Detect and Real Time Clock. See the table below for more information.</p><p><img src=../external-battery.png alt="external battery matrix"></p><p>With Zymkey and HSM4, if tamper detect is enabled and the battery dies or is removed, the device will self-destruct. This is an intentional security feature. If tamper detect is NOT enabled, you should connect the host device to power to change the battery.</p><p>HSM6 has a battery monitoring feature to help the user prevent the battery from dying. If the battery dies, HSM6 users have the ability to choose whether the device should self-destruct or hold in reset mode until the battery is changed.</p><hr></details><h3 id=kernel--kernel-boot-questions><strong>Kernel & Kernel Boot Questions</strong></h3><h5 id=q-can-you-tell-the-kernel-not-to-run-a-shell>Q: Can you tell the kernel not to run a shell?</h5><details><summary>Expand for Answer</summary><br><p>A: Someone could easily replace the kernel and, while it is possible to configure initramfs to not permit the busybox shell to, that can be sidestepped as well. Even if you hack your own changes to the kernel to ignore the <code>init</code> option, someone could replace your kernel. Also, kernel updates would have to be done manually and the updates from the apt repo would have to be blacklisted.</p><hr></details><h5 id=q--can-you-tell-the-kernel-to-ignore-cmdlinetxt>Q: Can you tell the kernel to ignore cmdline.txt?</h5><details><summary>Expand for Answer</summary><br><p>A: There are many reasons why this is infeasible, but the main one is that, since the GPU initially functions as a bootloader processor during boot and since Broadcom has not made the GPU compiler publicly available as well as the source code for the bootloader, one cannot simply compile their own code that would ignore cmdline.txt.</p><hr></details><h5 id=q-is-it-possible-to-encrypt-the-boot-partition>Q: Is it possible to encrypt the boot partition?</h5><details><summary>Expand for Answer</summary><br><p>A: No because the GPU bootloader does not have encryption features implemented and, even in lieu of that, it does not know how to communicate with HSM4. The best solution, then, would be to implement an independent secure boot procedure. As mentioned above, we are currently working on adding this feature in a future product.</p><hr></details><h3 id=production-self-destruct-mode-questions><strong>Production (“self-destruct”) Mode Questions</strong></h3><h5 id=q-when-using-the-perimeter-detect-feature-does-the-self-destruct-mode-work-destroy-all-of-its-key-material-even-when-the-lock-tab-hasnt-been-cut>Q: When using the perimeter-detect feature, does the “self-destruct” mode work (destroy all of its key material) even when the Lock Tab hasn’t been cut?</h5><details><summary>Expand for Answer</summary><br><p>A: Self-destruct mode works only after the Lock Tab has been cut.</p><hr></details><h5 id=q-is-there-a-way-to-turn-off-self-destruct-mode>Q: Is there a way to turn off “self-destruct” mode?</h5><details><summary>Expand for Answer</summary><br><p>A: No, once turned on, &ldquo;self-destruct&rdquo; mode is permanent.</p><hr></details><h5 id=q-if-my-hsm4-does-self-destruct-can-i-create-new-keys-and-reuse-the-hardware>Q: If my HSM4 does “self-destruct,” can I create new keys and reuse the hardware?</h5><details><summary>Expand for Answer</summary><br><ul><li>The SBC and SD card hardware will be reusable.</li><li>Because the SD card contents are encrypted and the decryption key was destroyed, the data is lost.</li><li>The HSM4 will not be reusable because the key slots will be destroyed.</li></ul><hr></details><h5 id=q-if-i-cut-the-lock-tab-on-a-hsm4-can-i-move-that-hsm4-to-another-pi-or-change-the-sd-card>Q: If I cut the Lock-Tab on a HSM4, can I move that HSM4 to another Pi or change the SD card?</h5><details><summary>Expand for Answer</summary><br><p>A: No. Cutting the Lock-Tab <strong>permanently</strong> binds that instance of HSM4 to the specific instances of host computer and SD card. This is a security feature to prevent credentials being moved from one host to another. <strong>DO NOT cut the Lock-Tab if you are still in development and expect to change the host or SD cards.</strong></p><hr></details><h5 id=q-will-hsm4-still-self-destruct-even-when-my-sbc-is-powered-off>Q: Will HSM4 still self-destruct, even when my SBC is powered off?</h5><details><summary>Expand for Answer</summary><br><p>A: Yes, because HSM4 is battery powered. As long as the battery is sufficiently charged, it will still self-destruct.</p><hr></details><p> </p><hr><h2 id=other><strong>Other</strong></h2><hr><h5 id=q-where-can-i-learn-about-andor-pre-order-future-products>Q: Where can I learn about and/or pre-order future products?</h5><details><summary>Expand for Answer</summary><br><p>A: Sign up for our new product email updates at the bottom of <a href=https://www.zymbit.com/>Zymbit&rsquo;s homepage</a>.</p><hr></details><h5 id=q-which-sbcs-are-compatible-with-hsm4>Q: Which SBCs are compatible with HSM4?</h5><details><summary>Expand for Answer</summary><br><ul><li>Electrically, the Zymkey-I2C will interface to any single board computer using I2C. Check compatibility with your particular Linux distribution.</li><li>Raspberry Pi 3, 3B+, 4, Zero</li><li>RPi Compute Module 3, 4</li><li>NVIDIA Jetson Nano, Xavier NX</li></ul><hr></details><h5 id=q-does-hsm4-work-with-arduino>Q: Does HSM4 work with Arduino?</h5><details><summary>Expand for Answer</summary><br><p>A: We have no plans to release an Arduino shield version. While we love Arduinos and use them all the time, they generally don’t have enough resources to handle cryptographic operations at this level.</p><hr></details><h5 id=q-does-hsm4-work-with-beaglebone>Q: Does HSM4 work with BeagleBone?</h5><details><summary>Expand for Answer</summary><br><p>A: Zymbit does not officially support the BeagleBoard platform at this time.</p><hr></details><h5 id=q-which-operating-systems-does-hsm4-support>Q: Which operating systems does HSM4 support?</h5><details><summary>Expand for Answer</summary><br><p><img src=../supported-os-dots.png alt="supported OSs"></p><hr></details><h5 id=q-how-much-power-does-hsm4-consume>Q: How much power does HSM4 consume?</h5><details><summary>Expand for Answer</summary><br><ul><li>HSM4-RPi (3.3V): idle approx. 1mA; max active &lt; 25mA with LED off, &lt; 35mA with LED on.</li><li>HSM4-USB (5V): idle approx. 1.5mA; max active &lt; 40mA with LEDs off, &lt; 60mA with LEDs on.</li></ul><p>See <a href=https://docs.zymbit.com/reference/power-quality/>Power Quality</a> for more information.</p><hr></details><div class="text-muted mt-5 pt-3 border-top"></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/js/main.min.2ba2da7d2fe4be755f96e1f7760bcc4a769c4b9369d2356a8872050735635419.js integrity="sha256-K6LafS/kvnVfluH3dgvMSnacS5Np0jVqiHIFBzVjVBk=" crossorigin=anonymous></script></body></html>