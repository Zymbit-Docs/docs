<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://docs.zymbit.com/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://docs.zymbit.com/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=https://docs.zymbit.com/main.c01bd6a1459e9eba251f9590a4017689eb83288b3abd2147b0cfa6adf0320dd965094135f389b4d02ffc8efc867ce86d9fc960482bdc058454e2e8f9eaa86fe0.css integrity="sha512-wBvWoUWenrolH5WQpAF2ieuDKIs6vSFHsM+mrfAyDdllCUE184m00C/8jvyGfOhtn8lgSCvcBYRU4uj56qhv4A==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>C API Documentation | Zymbit Documentation</title><meta name=description content="This is the official documentation for the official zkapputils C API library."><link rel=canonical href=https://docs.zymbit.com/api/c_api/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://docs.zymbit.com/doks.png"><meta name=twitter:title content="C API Documentation"><meta name=twitter:description content="This is the official documentation for the official zkapputils C API library."><meta name=twitter:site content="@zymbit"><meta name=twitter:creator content="@zymbit"><meta property="og:title" content="C API Documentation"><meta property="og:description" content="This is the official documentation for the official zkapputils C API library."><meta property="og:type" content="article"><meta property="og:url" content="https://docs.zymbit.com/api/c_api/"><meta property="og:image" content="https://docs.zymbit.com/doks.png"><meta property="article:published_time" content="2021-03-26T21:34:55+00:00"><meta property="article:modified_time" content="2021-03-26T17:43:36-04:00"><meta property="og:site_name" content="Zymbit Documentation"><meta property="article:publisher" content="https://www.facebook.com/zymbit"><meta property="article:author" content="https://www.facebook.com/zymbit"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/docs.zymbit.com"},{"@type":"ListItem","position":3,"name":"Api","item":"https:\/\/docs.zymbit.com\/api\/"},{"@type":"ListItem","position":4,"name":"C Api","item":"https:\/\/docs.zymbit.com\/api\/c_api\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://docs.zymbit.com/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://docs.zymbit.com/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://docs.zymbit.com/favicon-16x16.png><link rel=manifest href=https://docs.zymbit.com/site.webmanifest></head><body class="docs single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container-fluid><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 mr-auto" href=https://docs.zymbit.com><img class="mr-0 logo-light" src=https://docs.zymbit.com/logo-zymbit.png style=max-width:175px alt="Zymbit Documentation">
<img class="mr-0 logo-dark" src=https://docs.zymbit.com/logo-zymbit-dark.png style=max-width:175px alt="Zymbit Documentation"></a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/zymbit-docs><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ml-2 sr-only">GitHub</span></a></li><li class=nav-item><a class=nav-link href=https://twitter.com/zymbit><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><span class="ml-2 sr-only">Twitter</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav mr-auto order-5 order-md-2"><li class=nav-item><a class=nav-link href=https://docs.zymbit.com/>Docs</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container-fluid" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Getting Started</h3><ul class=docs-menu-top-list><li><a class=docs-link href=https://docs.zymbit.com/getting-started/introduction/>Introduction</a></li></ul><h3>Apis</h3><ul class=docs-menu-top-list><li><a class="docs-link active" href=https://docs.zymbit.com/api/c_api/>C API Documentation</a></li><li><a class=docs-link href=https://docs.zymbit.com/api/cpp_api/>C++ API Documentation</a></li><li><a class=docs-link href=https://docs.zymbit.com/api/api_docs_intro/>Intro to Zymkey Application Utilities</a></li><li><a class=docs-link href=https://docs.zymbit.com/api/python_api/>Python API Documentation</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#defines>Defines</a></li><li><a href=#typedefs>Typedefs</a></li><li><a href=#enums>Enums</a></li><li><a href=#structs>Structs</a></li><li><a href=#functions>Functions</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>C API Documentation</h1><p class=lead>This is the official documentation for the official zkapputils C API library.</p><p>C interface to Zymkey Application Utilities Library.</p><p>This file contains the C API to the the Zymkey Application Utilities library. This API facilitates writing user space applications which use Zymkey to perform cryptographic operations, such as:</p><ol><li><p>Signing of payloads using ECDSA</p></li><li><p>Verification of payloads that were signed using Zymkey</p></li><li><p>Exporting the public key that matches Zymkey’s private key</p></li><li><p>”Locking” and “unlocking” data objects</p></li><li><p>Generating random data Additionally, there are functions for changing the i2c address (i2c units only), setting tap sensitivity and controlling the LED.</p></li></ol><p><strong>Author</strong><br>Scott Miller</p><p><strong>Version</strong><br>1.0</p><p><strong>Date</strong><br>November 17, 2016</p><p><strong>Copyright</strong><br>Zymbit, Inc.</p><div id=defines class=section><h2 id=defines>Defines<a href=#defines class=anchor aria-hidden=true>#</a></h2><div class="breathe-sectiondef docutils container"><p>Defines</p><p><span id=zk__app__utils_8h_1a483ab601bc65411778a8573de194ca28 class=target></span><code>ZK_PERIMETER_EVENT_ACTION_NOTIFY</code><br>Perimeter breach action flag definitions.</p><p><span id=zk__app__utils_8h_1aeb46102a3b07a7dbc1938c2e64a3bc56 class=target></span><code>ZK_PERIMETER_EVENT_ACTION_SELF_DESTRUCT</code></p></div></div><div id=typedefs class=section><h2 id=typedefs>Typedefs<a href=#typedefs class=anchor aria-hidden=true>#</a></h2><div class="breathe-sectiondef docutils container"><p>Typedefs</p><p><span id=_CPPv35zkCTX></span><span id=_CPPv25zkCTX></span><span id=zkCTX></span><span id=zk__app__utils_8h_1ad9cb7324974b6700baaa38bb1e0dd692 class=target></span><em><span class=pre>typedef</span></em> <span class=pre>void</span> <span class=pre>*</span> <code>zkCTX</code></p><p><span id=_CPPv314ZK_EC_KEY_TYPE></span><span id=_CPPv214ZK_EC_KEY_TYPE></span><span id=ZK_EC_KEY_TYPE></span><span id=zk__app__utils_8h_1a466f1a324a212ed96c66e1c32e362ad9 class=target></span><em><span class=pre>typedef</span></em> <em><span class=pre>enum</span></em> <a href=index.html#_CPPv414ZK_EC_KEY_TYPE class="reference internal" title=ZK_EC_KEY_TYPE><span class=pre>ZK_EC_KEY_TYPE</span></a> <code>ZK_EC_KEY_TYPE</code><br>Supported key types.</p><p><span id=_CPPv316ZK_ECDH_KDF_TYPE></span><span id=_CPPv216ZK_ECDH_KDF_TYPE></span><span id=ZK_ECDH_KDF_TYPE></span><span id=zk__app__utils_8h_1a57faf2007f284dae9bb19d3a94a5463a class=target></span><em><span class=pre>typedef</span></em> <em><span class=pre>enum</span></em> <a href=index.html#_CPPv416ZK_ECDH_KDF_TYPE class="reference internal" title=ZK_ECDH_KDF_TYPE><span class=pre>ZK_ECDH_KDF_TYPE</span></a> <code>ZK_ECDH_KDF_TYPE</code><br>Supported ECDH key derivation function types.</p><p><span id=_CPPv318ZK_ACCEL_AXIS_TYPE></span><span id=_CPPv218ZK_ACCEL_AXIS_TYPE></span><span id=ZK_ACCEL_AXIS_TYPE></span><span id=zk__app__utils_8h_1a369df68bcf1bf7db34eace92022d26ff class=target></span><em><span class=pre>typedef</span></em> <em><span class=pre>enum</span></em> <a href=index.html#_CPPv418ZK_ACCEL_AXIS_TYPE class="reference internal" title=ZK_ACCEL_AXIS_TYPE><span class=pre>ZK_ACCEL_AXIS_TYPE</span></a> <code>ZK_ACCEL_AXIS_TYPE</code><br>Accelerometer axis enum, used to set tap sensitivity.</p><p><span id=_CPPv324ZK_THRESHOLD_ACTION_TYPE></span><span id=_CPPv224ZK_THRESHOLD_ACTION_TYPE></span><span id=ZK_THRESHOLD_ACTION_TYPE></span><span id=zk__app__utils_8h_1a0176b010ec1f1afafc61cce5fc80279e class=target></span><em><span class=pre>typedef</span></em> <em><span class=pre>enum</span></em> <a href=index.html#_CPPv424ZK_THRESHOLD_ACTION_TYPE class="reference internal" title=ZK_THRESHOLD_ACTION_TYPE><span class=pre>ZK_THRESHOLD_ACTION_TYPE</span></a> <code>ZK_THRESHOLD_ACTION_TYPE</code><br>Possible actions for threshold monitor functions.</p><p><span id=_CPPv319zkAccelAxisDataType></span><span id=_CPPv219zkAccelAxisDataType></span><span id=zkAccelAxisDataType></span><span id=zk__app__utils_8h_1a855b16a590ca334181860bf90a0c997f class=target></span><em><span class=pre>typedef</span></em> <em><span class=pre>struct</span></em> <a href=index.html#_CPPv419zkAccelAxisDataType class="reference internal" title=zkAccelAxisDataType><span class=pre>zkAccelAxisDataType</span></a> <code>zkAccelAxisDataType</code><br>zkGetAccelerometer data output.</p></div></div><div id=enums class=section><h2 id=enums>Enums<a href=#enums class=anchor aria-hidden=true>#</a></h2><div class="breathe-sectiondef docutils container"><p>Enums</p><p><span id=zk__app__utils_8h_1ad1e233079d658083389bcda3e66bffa7 class=target></span><em><span class=pre>enum</span></em> <code>ZK_EC_KEY_TYPE</code><br>Supported key types.</p><p><em>Values:</em></p><p><span id=_CPPv3N14ZK_EC_KEY_TYPE11ZK_NISTP256E></span><span id=_CPPv2N14ZK_EC_KEY_TYPE11ZK_NISTP256E></span><span id=zk__app__utils_8h_1ad1e233079d658083389bcda3e66bffa7a4b1eb00eb760cf6137262448dd924f66 class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_NISTP256</code></p><p><span id=_CPPv3N14ZK_EC_KEY_TYPE12ZK_SECP256R1E></span><span id=_CPPv2N14ZK_EC_KEY_TYPE12ZK_SECP256R1E></span><span id=zk__app__utils_8h_1ad1e233079d658083389bcda3e66bffa7a5bfe43be8b3a4df1be2416e607b99bf4 class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_SECP256R1</code></p><p><span id=_CPPv3N14ZK_EC_KEY_TYPE12ZK_SECP256K1E></span><span id=_CPPv2N14ZK_EC_KEY_TYPE12ZK_SECP256K1E></span><span id=zk__app__utils_8h_1ad1e233079d658083389bcda3e66bffa7ae9bdfaebeae5590ee19daa5757d216d6 class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_SECP256K1</code></p><p><span id=zk__app__utils_8h_1abee5b47d3dde7bd528de628f5330919e class=target></span><em><span class=pre>enum</span></em> <code>ZK_ECDH_KDF_TYPE</code><br>Supported ECDH key derivation function types.</p><p><em>Values:</em></p><p><span id=_CPPv3N16ZK_ECDH_KDF_TYPE21ZK_KDF_RFC5869_SHA256E></span><span id=_CPPv2N16ZK_ECDH_KDF_TYPE21ZK_KDF_RFC5869_SHA256E></span><span id=zk__app__utils_8h_1abee5b47d3dde7bd528de628f5330919ea5c03f868fbfae1cabab5b843f5fce3db class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_KDF_RFC5869_SHA256</code></p><p><span id=_CPPv3N16ZK_ECDH_KDF_TYPE21ZK_KDF_RFC5869_SHA512E></span><span id=_CPPv2N16ZK_ECDH_KDF_TYPE21ZK_KDF_RFC5869_SHA512E></span><span id=zk__app__utils_8h_1abee5b47d3dde7bd528de628f5330919ea7eef6f090fa056c47366d3c887c72d80 class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_KDF_RFC5869_SHA512</code></p><p><span id=_CPPv3N16ZK_ECDH_KDF_TYPE20ZK_KDF_PBKDF2_SHA256E></span><span id=_CPPv2N16ZK_ECDH_KDF_TYPE20ZK_KDF_PBKDF2_SHA256E></span><span id=zk__app__utils_8h_1abee5b47d3dde7bd528de628f5330919ea6218c948cfbd3276da30a47eac4c483f class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_KDF_PBKDF2_SHA256</code></p><p><span id=_CPPv3N16ZK_ECDH_KDF_TYPE20ZK_KDF_PBKDF2_SHA512E></span><span id=_CPPv2N16ZK_ECDH_KDF_TYPE20ZK_KDF_PBKDF2_SHA512E></span><span id=zk__app__utils_8h_1abee5b47d3dde7bd528de628f5330919ea0e80147f1a0b2f3256b6dd23809885d2 class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_KDF_PBKDF2_SHA512</code></p><p><span id=zk__app__utils_8h_1aedbdda1d06346a4a4c7b8b0a3ad70f61 class=target></span><em><span class=pre>enum</span></em> <code>ZK_ACCEL_AXIS_TYPE</code><br>Accelerometer axis enum, used to set tap sensitivity.</p><p><em>Values:</em></p><p><span id=_CPPv3N18ZK_ACCEL_AXIS_TYPE15ZK_ACCEL_AXIS_XE></span><span id=_CPPv2N18ZK_ACCEL_AXIS_TYPE15ZK_ACCEL_AXIS_XE></span><span id=zk__app__utils_8h_1aedbdda1d06346a4a4c7b8b0a3ad70f61a059eeb9df0335701c7049e9cb75ed0da class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_ACCEL_AXIS_X</code></p><p><span id=_CPPv3N18ZK_ACCEL_AXIS_TYPE15ZK_ACCEL_AXIS_YE></span><span id=_CPPv2N18ZK_ACCEL_AXIS_TYPE15ZK_ACCEL_AXIS_YE></span><span id=zk__app__utils_8h_1aedbdda1d06346a4a4c7b8b0a3ad70f61adb91693f4203922414d4c8190667c999 class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_ACCEL_AXIS_Y</code></p><p><span id=_CPPv3N18ZK_ACCEL_AXIS_TYPE15ZK_ACCEL_AXIS_ZE></span><span id=_CPPv2N18ZK_ACCEL_AXIS_TYPE15ZK_ACCEL_AXIS_ZE></span><span id=zk__app__utils_8h_1aedbdda1d06346a4a4c7b8b0a3ad70f61a25d262bab2dfd6ce743e06d49cc5b617 class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_ACCEL_AXIS_Z</code></p><p><span id=_CPPv3N18ZK_ACCEL_AXIS_TYPE17ZK_ACCEL_AXIS_ALLE></span><span id=_CPPv2N18ZK_ACCEL_AXIS_TYPE17ZK_ACCEL_AXIS_ALLE></span><span id=zk__app__utils_8h_1aedbdda1d06346a4a4c7b8b0a3ad70f61a467e1c997db20ac4d04c81cd1ab92b0d class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_ACCEL_AXIS_ALL</code></p><p><span id=zk__app__utils_8h_1a33917af8836db67d44da0de5f65c31f5 class=target></span><em><span class=pre>enum</span></em> <code>ZK_THRESHOLD_ACTION_TYPE</code><br>Possible actions for threshold monitor functions.</p><p><em>Values:</em></p><p><span id=_CPPv3N24ZK_THRESHOLD_ACTION_TYPE14ZK_ACTION_NONEE></span><span id=_CPPv2N24ZK_THRESHOLD_ACTION_TYPE14ZK_ACTION_NONEE></span><span id=zk__app__utils_8h_1a33917af8836db67d44da0de5f65c31f5adbd51f81cd5f9e013a0024ec505ce737 class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_ACTION_NONE</code></p><p><span id=_CPPv3N24ZK_THRESHOLD_ACTION_TYPE23ZK_ACTION_SELF_DESTRUCTE></span><span id=_CPPv2N24ZK_THRESHOLD_ACTION_TYPE23ZK_ACTION_SELF_DESTRUCTE></span><span id=zk__app__utils_8h_1a33917af8836db67d44da0de5f65c31f5a56e327600bf958958912d1788ce84842 class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_ACTION_SELF_DESTRUCT</code></p><p><span id=_CPPv3N24ZK_THRESHOLD_ACTION_TYPE15ZK_ACTION_SLEEPE></span><span id=_CPPv2N24ZK_THRESHOLD_ACTION_TYPE15ZK_ACTION_SLEEPE></span><span id=zk__app__utils_8h_1a33917af8836db67d44da0de5f65c31f5a5079d5b11b4d84929cf5fa7861f42326 class=target></span><em><span class=pre>enumerator</span></em> <code>ZK_ACTION_SLEEP</code></p></div></div><div id=structs class=section><h2 id=structs>Structs<a href=#structs class=anchor aria-hidden=true>#</a></h2><p><span id=structzk_accel_axis_data_type class=target></span><em><span class=pre>struct</span></em> <code>zkAccelAxisDataType</code><br>zkGetAccelerometer data output.</p><div class="breathe-sectiondef docutils container"><p>Public Members</p><p><span id=_CPPv3N19zkAccelAxisDataType1gE></span><span id=_CPPv2N19zkAccelAxisDataType1gE></span><span id=zkAccelAxisDataType::g__double></span><span id=structzk_accel_axis_data_type_1a0b0263b57b8cfdee66bc8ba88832f30a class=target></span><span class=pre>double</span> <code>g</code><br>the axis reading in units of g-force</p><p><span id=_CPPv3N19zkAccelAxisDataType12tapDirectionE></span><span id=_CPPv2N19zkAccelAxisDataType12tapDirectionE></span><span id=zkAccelAxisDataType::tapDirection__i></span><span id=structzk_accel_axis_data_type_1af3b1fd34e286b65f39293b9035460966 class=target></span><span class=pre>int</span> <code>tapDirection</code><br>the direction of the force along the axis which caused a tap event: -1 = negative +1 = positive 0 = did not cause a tap event</p></div></div><div id=functions class=section><h2 id=functions>Functions<a href=#functions class=anchor aria-hidden=true>#</a></h2><div class="breathe-sectiondef docutils container"><p>Zymkey Context</p><p><span id=_CPPv36zkOpenP5zkCTX></span><span id=_CPPv26zkOpenP5zkCTX></span><span id=zkOpen__zkCTXP></span><span id=zk__app__utils_8h_1a48a562243cd2902b84bb7347a540b8d6 class=target></span><span class=pre>int</span> <code>zkOpen</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <span class=pre>*</span> <em><span class=pre>ctx</span></em> <span class=sig-paren>)</span><br>Open a Zymkey context.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>ctx </code>: (output) returns a pointer to a Zymkey context.</li></ul><p><span id=_CPPv37zkClose5zkCTX></span><span id=_CPPv27zkClose5zkCTX></span><span id=zkClose__zkCTX></span><span id=zk__app__utils_8h_1af427eb2bb73d78bb7acdf723ec99750a class=target></span><span class=pre>int</span> <code>zkClose</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> <span class=sig-paren>)</span><br>Close a Zymkey context.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>ctx </code>: (input) The Zymkey context to close</li></ul></div><div class="breathe-sectiondef docutils container"><p>Random Number Generation</p><p><span id=_CPPv320zkCreateRandDataFile5zkCTXPKci></span><span id=_CPPv220zkCreateRandDataFile5zkCTXPKci></span><span id=zkCreateRandDataFile__zkCTX.cCP.i></span><span id=zk__app__utils_8h_1a899ce7a6aebb542b5796fc027f021695 class=target></span><span class=pre>int</span> <code>zkCreateRandDataFile</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>dst_filename</span></em> , <span class=pre>int</span> <em><span class=pre>rdata_sz</span></em> <span class=sig-paren>)</span><br>Fill a file with random numbers.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>dst_filename </code>: (input) Absolute path name for the destination file.</p></li><li><p><code>rdata_sz </code>: (input) The number of random bytes to generate.</p></li></ul><p><span id=_CPPv314zkGetRandBytes5zkCTXPP7uint8_ti></span><span id=_CPPv214zkGetRandBytes5zkCTXPP7uint8_ti></span><span id=zkGetRandBytes__zkCTX.uint8_tPP.i></span><span id=zk__app__utils_8h_1a7b2e6031f9f72f3810c47202ca04b8b5 class=target></span><span class=pre>int</span> <code>zkGetRandBytes</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>uint8_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>rdata</span></em> , <span class=pre>int</span> <em><span class=pre>rdata_sz</span></em> <span class=sig-paren>)</span><br>Get an array of random bytes.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>rdata </code>: (input) Pointer to a pointer of bytes.</p></li><li><p><code>rdata_sz </code>: (input) The number of random bytes to generate.</p></li></ul></div><div class="breathe-sectiondef docutils container"><p>Lock Data</p><p><span id=_CPPv313zkLockDataF2F5zkCTXPKcPKcb></span><span id=_CPPv213zkLockDataF2F5zkCTXPKcPKcb></span><span id=zkLockDataF2F__zkCTX.cCP.cCP.b></span><span id=zk__app__utils_8h_1aa0885303a749fe9c049f277ba8c11e21 class=target></span><span class=pre>int</span> <code>zkLockDataF2F</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>src_pt_filename</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>dst_ct_filename</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=sig-paren>)</span><br>Lock up source (plaintext) data from a file and store the results (ciphertext) in a destination file.</p><p>This function encrypts and signs a block of plaintext data from a file and stores the result in a destination file.</p><p><strong>Note</strong><br>The zymkey has two keys that can be used for locking/unlocking operations, designated as ‘shared’ and ‘one-way’.</p><ol><li><p>The one-way key is meant to lock up data only on the local host computer. Data encrypted using this key cannot be exported and deciphered anywhere else.</p></li><li><p>The shared key is meant for publishing data to other sources that have the capability to generate the shared key, such as the Zymbit cloud server.</p></li></ol><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>src_pt_filename </code>: (input) The absolute path to the file where the source (plaintext) data is located.</p></li><li><p><code>dst_ct_filename </code>: (input) The absolute path to the file where the destination (ciphertext) data should be deposited.</p></li><li><p><code>use_shared_key </code>: (input) This parameter specifies which key will be used to used to lock the data up. A value of ‘false’ specifies that the Zymkey will use the one-way key whereas ‘true’ specifies that the shared key will be used. Specify ‘true’ for publishing data to another that has the shared key (e.g. Zymbit cloud) and ‘False’ when the data is meant to reside exclusively withing the host computer.</p></li></ul><p><span id=_CPPv313zkLockDataB2F5zkCTXPK7uint8_tiPKcb></span><span id=_CPPv213zkLockDataB2F5zkCTXPK7uint8_tiPKcb></span><span id=zkLockDataB2F__zkCTX.uint8_tCP.i.cCP.b></span><span id=zk__app__utils_8h_1ad18866d7ca51cacbc750f8a39e6e1e6c class=target></span><span class=pre>int</span> <code>zkLockDataB2F</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>src_pt</span></em> , <span class=pre>int</span> <em><span class=pre>src_pt_sz</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>dst_ct_filename</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=sig-paren>)</span><br>Lock up source (plaintext) data from a byte array and store the results (ciphertext) in a destination file.</p><p>This function encrypts and signs a block of binary plaintext data and stores the result in a destination file.</p><p><strong>Note</strong><br>(See zkLockDataF2F for notes about keys)</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>src_pt </code>: (input) Binary plaintext source byte array.</p></li><li><p><code>src_pt_sz </code>: (input) Size of plaintext source data.</p></li><li><p><code>dst_ct_filename </code>: (input) The absolute path to the file where the destination (ciphertext) data should be deposited.</p></li><li><p><code>use_shared_key </code>: (input) Specifies if shared key is to be used. See zkLockDataF2F.</p></li></ul><p><span id=_CPPv313zkLockDataF2B5zkCTXPKcPP7uint8_tPib></span><span id=_CPPv213zkLockDataF2B5zkCTXPKcPP7uint8_tPib></span><span id=zkLockDataF2B__zkCTX.cCP.uint8_tPP.iP.b></span><span id=zk__app__utils_8h_1adfed9aa2d8ca8f631fb83ee51e82cb6b class=target></span><span class=pre>int</span> <code>zkLockDataF2B</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>src_pt_filename</span></em> , <span class=pre>uint8_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>dst_ct</span></em> , <span class=pre>int</span> <span class=pre>*</span> <em><span class=pre>dst_ct_sz</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=sig-paren>)</span><br>Lock up source (plaintext) data from a file and store the results (ciphertext) in a destination byte array.</p><p>This function encrypts and signs a block of plaintext data from a file and stores the result in a binary byte array.</p><p><strong>Note</strong><br>(See zkLockDataF2F for notes about keys)</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>src_pt_filename </code>: (input) The absolute path to the file where the source (plaintext) data is located.</p></li><li><p><code>dst_ct </code>: (output) A pointer to a pointer to an array of unsigned bytes created by this function. This pointer must be freed by the application when no longer needed.</p></li><li><p><code>dst_ct_sz </code>: (output) A pointer to an integer which contains the size of the destination array.</p></li><li><p><code>use_shared_key </code>: (input) Specifies if shared key is to be used. See zkLockDataF2F.</p></li></ul><p><span id=_CPPv313zkLockDataB2B5zkCTXPK7uint8_tiPP7uint8_tPib></span><span id=_CPPv213zkLockDataB2B5zkCTXPK7uint8_tiPP7uint8_tPib></span><span id=zkLockDataB2B__zkCTX.uint8_tCP.i.uint8_tPP.iP.b></span><span id=zk__app__utils_8h_1a98ed878370908120142f5e353a369448 class=target></span><span class=pre>int</span> <code>zkLockDataB2B</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>src_pt</span></em> , <span class=pre>int</span> <em><span class=pre>src_pt_sz</span></em> , <span class=pre>uint8_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>dst_ct</span></em> , <span class=pre>int</span> <span class=pre>*</span> <em><span class=pre>dst_ct_sz</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=sig-paren>)</span><br>Lock up source (plaintext) data from a byte array and store the results (ciphertext) in a destination byte array.</p><p>This function encrypts and signs a block of plaintext data and stores the result in a binary byte array.</p><p><strong>Note</strong><br>(See zkLockDataF2F for notes about keys)</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>src_pt </code>: (input) Binary plaintext source byte array.</p></li><li><p><code>src_pt_sz </code>: (input) Size of plaintext source data.</p></li><li><p><code>dst_ct </code>: (output) A pointer to a pointer to an array of unsigned bytes created by this function. This pointer must be freed by the application when no longer needed.</p></li><li><p><code>dst_ct_sz </code>: (output) A pointer to an integer which contains the size of the destination array.</p></li><li><p><code>use_shared_key </code>: (input) Specifies if shared key is to be used. See zkLockDataF2F.</p></li></ul></div><div class="breathe-sectiondef docutils container"><p>Unlock Data</p><p><span id=_CPPv315zkUnlockDataF2F5zkCTXPKcPKcb></span><span id=_CPPv215zkUnlockDataF2F5zkCTXPKcPKcb></span><span id=zkUnlockDataF2F__zkCTX.cCP.cCP.b></span><span id=zk__app__utils_8h_1a4a8c161f1dfcdf08d741f5926d5f77f2 class=target></span><span class=pre>int</span> <code>zkUnlockDataF2F</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>src_ct_filename</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>dst_pt_filename</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=sig-paren>)</span><br>Unlock source (ciphertext) data from a file and store the results (plaintext) in a destination file.</p><p>This function verifies a locked object signature and decrypts the associated ciphertext data.</p><p><strong>Note</strong><br>(See zkLockDataF2F for notes about keys)</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>src_ct_filename </code>: (input) The absolute path to the file where the source (ciphertext) data is located.</p></li><li><p><code>dst_pt_filename </code>: (input) The absolute path to the file where the destination (plaintext) data should be deposited.</p></li><li><p><code>use_shared_key </code>: (input) This parameter specifies which key will be used to used to lock the data up. A value of ‘false’ specifies that the Zymkey will use the one-way key whereas ‘true’ specifies that the shared key will be used. Specify ‘true’ for publishing data to another that has the shared key (e.g. Zymbit cloud) and ‘False’ when the data is meant to reside exclusively withing the host computer.</p></li></ul><p><span id=_CPPv315zkUnlockDataB2F5zkCTXPK7uint8_tiPKcb></span><span id=_CPPv215zkUnlockDataB2F5zkCTXPK7uint8_tiPKcb></span><span id=zkUnlockDataB2F__zkCTX.uint8_tCP.i.cCP.b></span><span id=zk__app__utils_8h_1a2c63c6a31a2a9d787bb670c0e855795c class=target></span><span class=pre>int</span> <code>zkUnlockDataB2F</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>src_ct</span></em> , <span class=pre>int</span> <em><span class=pre>src_ct_sz</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>dst_pt_filename</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=sig-paren>)</span><br>Unlock source (ciphertext) data from a byte array and store the results (plaintext) in a destination file.</p><p>This function verifies a locked object signature and decrypts the associated ciphertext data.</p><p><strong>Note</strong><br>(See zkLockDataF2F for notes about keys)</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>src_ct </code>: (input) Binary ciphertext source byte array.</p></li><li><p><code>src_ct_sz </code>: (input) Size of ciphertext source data.</p></li><li><p><code>dst_pt_filename </code>: (input) The absolute path to the file where the destination (plaintext) data should be deposited.</p></li><li><p><code>use_shared_key </code>: (input) Specifies if shared key is to be used. See zkLockDataF2F.</p></li></ul><p><span id=_CPPv315zkUnlockDataF2B5zkCTXPKcPP7uint8_tPib></span><span id=_CPPv215zkUnlockDataF2B5zkCTXPKcPP7uint8_tPib></span><span id=zkUnlockDataF2B__zkCTX.cCP.uint8_tPP.iP.b></span><span id=zk__app__utils_8h_1a7553aa0574bf2bfe13b7b32d2774baa8 class=target></span><span class=pre>int</span> <code>zkUnlockDataF2B</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>src_ct_filename</span></em> , <span class=pre>uint8_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>dst_pt</span></em> , <span class=pre>int</span> <span class=pre>*</span> <em><span class=pre>dst_pt_sz</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=sig-paren>)</span><br>Unlock source (ciphertext) data from a file and store the results (plaintext) in a destination byte array.</p><p>This function verifies a locked object signature and decrypts the associated ciphertext data.</p><p><strong>Note</strong><br>(See zkLockDataF2F for notes about keys)</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>src_ct_filename </code>: (input) The absolute path to the file where the source (ciphertext) data is located.</p></li><li><p><code>dst_pt </code>: (output) A pointer to a pointer to an array of unsigned bytes created by this function. This pointer must be freed by the application when no longer needed.</p></li><li><p><code>dst_pt_sz </code>: (output) A pointer to an integer which contains the size of the destination array.</p></li><li><p><code>use_shared_key </code>: (input) Specifies if shared key is to be used. See zkLockDataF2F.</p></li></ul><p><span id=_CPPv315zkUnlockDataB2B5zkCTXPK7uint8_tiPP7uint8_tPib></span><span id=_CPPv215zkUnlockDataB2B5zkCTXPK7uint8_tiPP7uint8_tPib></span><span id=zkUnlockDataB2B__zkCTX.uint8_tCP.i.uint8_tPP.iP.b></span><span id=zk__app__utils_8h_1acfe501ceb80ecb6b51385a5573b4da3a class=target></span><span class=pre>int</span> <code>zkUnlockDataB2B</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>src_ct</span></em> , <span class=pre>int</span> <em><span class=pre>src_ct_sz</span></em> , <span class=pre>uint8_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>dst_pt</span></em> , <span class=pre>int</span> <span class=pre>*</span> <em><span class=pre>dst_pt_sz</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=sig-paren>)</span><br>Unlock source (ciphertext) data from a byte array and store the results (plaintext) in a destination byte array.</p><p>This function verifies a locked object signature and decrypts the associated ciphertext data.</p><p><strong>Note</strong><br>(See zkLockDataF2F for notes about keys)</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>src_ct </code>: (input) Binary ciphertext source byte array.</p></li><li><p><code>src_ct_sz </code>: (input) Size of ciphertext source data.</p></li><li><p><code>dst_pt </code>: (output) A pointer to a pointer to an array of unsigned bytes created by this function. This pointer must be freed by the application when no longer needed.</p></li><li><p><code>dst_pt_sz </code>: (output) A pointer to an integer which contains the size of the destination array.</p></li><li><p><code>use_shared_key </code>: (input) Specifies if shared key is to be used. See zkLockDataF2F.</p></li></ul></div><div class="breathe-sectiondef docutils container"><p>ECDSA</p><p><span id=_CPPv323zkGenECDSASigFromDigest5zkCTXPK7uint8_tiPP7uint8_tPi></span><span id=_CPPv223zkGenECDSASigFromDigest5zkCTXPK7uint8_tiPP7uint8_tPi></span><span id=zkGenECDSASigFromDigest__zkCTX.uint8_tCP.i.uint8_tPP.iP></span><span id=zk__app__utils_8h_1a803174f6dbeba5d1e59d63bd127cc746 class=target></span><span class=pre>int</span> <code>zkGenECDSASigFromDigest</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>digest</span></em> , <span class=pre>int</span> <em><span class=pre>slot</span></em> , <span class=pre>uint8_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>sig</span></em> , <span class=pre>int</span> <span class=pre>*</span> <em><span class=pre>sig_sz</span></em> <span class=sig-paren>)</span><br>Generate a signature using the Zymkey’s ECDSA private key.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>digest </code>: (input) This parameter contains the digest of the data that will be used to generate the signature.</p></li><li><p><code>slot </code>: (input) The key slot to generate a signature from. This parameter is only valid for Zymkey models 4i and beyond.</p></li><li><p><code>sig </code>: (output) A pointer to a pointer to an array of unsigned bytes which contains the generated signature. This pointer is created by this function and must be freed by the application when no longer needed.</p></li><li><p><code>sig_sz </code>: (output) A pointer to an integer which contains the size of the signature.</p></li></ul><p><span id=_CPPv326zkVerifyECDSASigFromDigest5zkCTXPK7uint8_tiPK7uint8_ti></span><span id=_CPPv226zkVerifyECDSASigFromDigest5zkCTXPK7uint8_tiPK7uint8_ti></span><span id=zkVerifyECDSASigFromDigest__zkCTX.uint8_tCP.i.uint8_tCP.i></span><span id=zk__app__utils_8h_1af2fff1ad2dc2962c075d86e4c7f32910 class=target></span><span class=pre>int</span> <code>zkVerifyECDSASigFromDigest</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>digest</span></em> , <span class=pre>int</span> <em><span class=pre>pubkey_slot</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>sig</span></em> , <span class=pre>int</span> <em><span class=pre>sig_sz</span></em> <span class=sig-paren>)</span><br>Verify a signature using one of the Zymkey’s public keys.</p><p>Verify a signature using an internal public key from the Zymkey private/public key store.</p><p><strong>Return</strong><br>0 for signature verification failed, 1 for signature verification passed, less than 0 for general failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>digest </code>: (input) This parameter contains the digest of the data that will be used to generate the signature.</p></li><li><p><code>pubkey_slot </code>: (input) The key slot to generate a signature from. This parameter is only valid for Zymkey models 4i and beyond.</p></li><li><p><code>sig </code>: (input) Array of bytes which contains the signature.</p></li><li><p><code>sig_sz </code>: (input) Size of signature.</p></li></ul><p><span id=_CPPv344zkVerifyECDSASigFromDigestWithForeignKeySlot5zkCTXPK7uint8_tiPK7uint8_ti></span><span id=_CPPv244zkVerifyECDSASigFromDigestWithForeignKeySlot5zkCTXPK7uint8_tiPK7uint8_ti></span><span id=zkVerifyECDSASigFromDigestWithForeignKeySlot__zkCTX.uint8_tCP.i.uint8_tCP.i></span><span id=zk__app__utils_8h_1ac01a977ceac50cd7a4fb8ddb1672c7b4 class=target></span><span class=pre>int</span> <code>zkVerifyECDSASigFromDigestWithForeignKeySlot</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>digest</span></em> , <span class=pre>int</span> <em><span class=pre>pubkey_slot</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>sig</span></em> , <span class=pre>int</span> <em><span class=pre>sig_sz</span></em> <span class=sig-paren>)</span><br>Verify a signature using one of the Zymkey’s foreign public keys.</p><p>Verify a signature using a public key from the Zymkey foreign key store.</p><p><strong>Return</strong><br>0 for signature verification failed, 1 for signature verification passed, less than 0 for general failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>digest </code>: (input) This parameter contains the digest of the data that will be used to generate the signature.</p></li><li><p><code>pubkey_slot </code>: (input) The key slot to generate a signature from. This parameter is only valid for Zymkey models 4i and beyond.</p></li><li><p><code>sig </code>: (input) Array of bytes which contains the signature.</p></li><li><p><code>sig_sz </code>: (input) Size of signature.</p></li></ul></div><div class="breathe-sectiondef docutils container"><p>ECDH and KDF</p><p><span id=_CPPv311zkDoRawECDH5zkCTXiPK7uint8_tiPP7uint8_t></span><span id=_CPPv211zkDoRawECDH5zkCTXiPK7uint8_tiPP7uint8_t></span><span id=zkDoRawECDH__zkCTX.i.uint8_tCP.i.uint8_tPP></span><span id=zk__app__utils_8h_1adc168549885a25d8967e6f0537ea0253 class=target></span><span class=pre>int</span> <code>zkDoRawECDH</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>slot</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>peer_pubkey</span></em> , <span class=pre>int</span> <em><span class=pre>peer_pubkey_sz</span></em> , <span class=pre>uint8_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>pre_master_secret</span></em> <span class=sig-paren>)</span><br>Perform a raw ECDH operation. (model >= HSM6)</p><p>Perform an ECDH operation with no Key Derivation Function (KDF). The raw pre-master secret is returned in the response. The peer public key is presented in the call.</p><p><strong>Return</strong><br>0 for success, less than 0 for general failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>slot </code>: (input) The key slot to use for the local key. If this parameter is -1, the ephemeral key is used.</p></li><li><p><code>peer_pubkey </code>: (input) The peer public key.</p></li><li><p><code>peer_pubkey_sz </code>: (input) Size of the peer public key.</p></li><li><p><code>pre_master_secret </code>: (output) returned pointer to the pre-master secret</p></li></ul><p><span id=_CPPv328zkDoRawECDHWithIntPeerPubkey5zkCTXiibPP7uint8_t></span><span id=_CPPv228zkDoRawECDHWithIntPeerPubkey5zkCTXiibPP7uint8_t></span><span id=zkDoRawECDHWithIntPeerPubkey__zkCTX.i.i.b.uint8_tPP></span><span id=zk__app__utils_8h_1ac1222347f2bd12f688db3a5bbbb83f97 class=target></span><span class=pre>int</span> <code>zkDoRawECDHWithIntPeerPubkey</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>slot</span></em> , <span class=pre>int</span> <em><span class=pre>peer_pubkey_slot</span></em> , <span class=pre>bool</span> <em><span class=pre>peer_pubkey_slot_is_foreign</span></em> , <span class=pre>uint8_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>pre_master_secret</span></em> <span class=sig-paren>)</span><br>Perform a raw ECDH operation. (model >= HSM6)</p><p>Perform an ECDH operation with no Key Derivation Function (KDF). The raw pre-master secret is returned in the response. The peer public key is referenced from the zymkey internal key store.</p><p><strong>Return</strong><br>0 for success, less than 0 for general failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>slot </code>: (input) The key slot to use for the local key. If this parameter is -1, the ephemeral key is used.</p></li><li><p><code>peer_pubkey_slot </code>: (input) The peer public key slot where the peer public key is to be found.</p></li><li><p><code>peer_pubkey_slot_is_foreign </code>: (input) If true, the peer public key slot is found in the foreign public keyring.</p></li><li><p><code>pre_master_secret </code>: (output) returned pointer to the pre-master secret</p></li></ul><p><span id=_CPPv314zkDoECDHAndKDF5zkCTX16ZK_ECDH_KDF_TYPEiPK7uint8_tiPK7uint8_tiPK7uint8_tiiiPP7uint8_t></span><span id=_CPPv214zkDoECDHAndKDF5zkCTX16ZK_ECDH_KDF_TYPEiPK7uint8_tiPK7uint8_tiPK7uint8_tiiiPP7uint8_t></span><span id=zkDoECDHAndKDF__zkCTX.ZK_ECDH_KDF_TYPE.i.uint8_tCP.i.uint8_tCP.i.uint8_tCP.i.i.i.uint8_tPP></span><span id=zk__app__utils_8h_1a772ea57e2db2aeab6d3e30e32c1af3b9 class=target></span><span class=pre>int</span> <code>zkDoECDHAndKDF</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <a href=index.html#_CPPv416ZK_ECDH_KDF_TYPE class="reference internal" title=ZK_ECDH_KDF_TYPE><span class=pre>ZK_ECDH_KDF_TYPE</span></a> <em><span class=pre>kdf_type</span></em> , <span class=pre>int</span> <em><span class=pre>slot</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>peer_pubkey</span></em> , <span class=pre>int</span> <em><span class=pre>peer_pubkey_sz</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>salt</span></em> , <span class=pre>int</span> <em><span class=pre>salt_sz</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>info</span></em> , <span class=pre>int</span> <em><span class=pre>info_sz</span></em> , <span class=pre>int</span> <em><span class=pre>num_iterations</span></em> , <span class=pre>int</span> <em><span class=pre>derived_key_sz</span></em> , <span class=pre>uint8_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>derived_key</span></em> <span class=sig-paren>)</span><br>Perform an ECDH operation plus Key Derivation Function. (model >= HSM6)</p><p>Perform an ECDH operation with Key Derivation Function (KDF). The derived key is returned in the response. The peer public key is presented in the call.</p><p><strong>Return</strong><br>0 for success, less than 0 for general failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>slot </code>: (input) The key slot to use for the local key. If this parameter is -1, the ephemeral key is used.</p></li><li><p><code>peer_pubkey </code>: (input) The peer public key.</p></li><li><p><code>peer_pubkey_sz </code>: (input) Size of the peer public key.</p></li><li><p><code>salt </code>: (input) The salt to use for the selected KDF.</p></li><li><p><code>salt_sz </code>: (input) The salt size. Must be less than or equal to 128 bytes.</p></li><li><p><code>info </code>: (input) The info field to use for RFC 5869. Ignored for PBKDF2.</p></li><li><p><code>info_sz </code>: (input) The size of the info parameter. Must be less than or equal to 128 bytes.</p></li><li><p><code>num_iterations </code>: (input) Number of iterations to carry out (PBKDF only)</p></li><li><p><code>derived_key_sz </code>: (input) The desired number of bytes to return for the KDF. For RFC 5869, this value must be less than 8160 bytes (SHA256) or 16320 (SHA512).</p></li><li><p><code>derived_key </code>: (output) returned pointer to the derived key.</p></li></ul><p><span id=_CPPv331zkDoECDHAndKDFWithIntPeerPubkey5zkCTX16ZK_ECDH_KDF_TYPEiibPK7uint8_tiPK7uint8_tiiiPP7uint8_t></span><span id=_CPPv231zkDoECDHAndKDFWithIntPeerPubkey5zkCTX16ZK_ECDH_KDF_TYPEiibPK7uint8_tiPK7uint8_tiiiPP7uint8_t></span><span id=zkDoECDHAndKDFWithIntPeerPubkey__zkCTX.ZK_ECDH_KDF_TYPE.i.i.b.uint8_tCP.i.uint8_tCP.i.i.i.uint8_tPP></span><span id=zk__app__utils_8h_1a38ce470571919d1fc26e877b4c1edc16 class=target></span><span class=pre>int</span> <code>zkDoECDHAndKDFWithIntPeerPubkey</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <a href=index.html#_CPPv416ZK_ECDH_KDF_TYPE class="reference internal" title=ZK_ECDH_KDF_TYPE><span class=pre>ZK_ECDH_KDF_TYPE</span></a> <em><span class=pre>kdf_type</span></em> , <span class=pre>int</span> <em><span class=pre>slot</span></em> , <span class=pre>int</span> <em><span class=pre>peer_pubkey_slot</span></em> , <span class=pre>bool</span> <em><span class=pre>peer_pubkey_slot_is_foreign</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>salt</span></em> , <span class=pre>int</span> <em><span class=pre>salt_sz</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>info</span></em> , <span class=pre>int</span> <em><span class=pre>info_sz</span></em> , <span class=pre>int</span> <em><span class=pre>num_iterations</span></em> , <span class=pre>int</span> <em><span class=pre>derived_key_sz</span></em> , <span class=pre>uint8_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>derived_key</span></em> <span class=sig-paren>)</span><br>Perform an ECDH operation plus Key Derivation Function. (model >= HSM6)</p><p>Perform an ECDH operation with Key Derivation Function (KDF). The derived key is returned in the response. The peer public key is referenced from the zymkey internal key store.</p><p><strong>Return</strong><br>0 for success, less than 0 for general failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>slot </code>: (input) The key slot to use for the local key. If this parameter is -1, the ephemeral key is used.</p></li><li><p><code>peer_pubkey_slot </code>: (input) The peer public key slot where the peer public key is to be found.</p></li><li><p><code>peer_pubkey_slot_is_foreign </code>: (input) If true, the peer public key slot is found in the foreign public keyring.</p></li><li><p><code>salt </code>: (input) The salt to use for the selected KDF.</p></li><li><p><code>salt_sz </code>: (input) The salt size. Must be less than or equal to 128 bytes.</p></li><li><p><code>info </code>: (input) The info field to use for RFC 5869. Ignored for PBKDF2.</p></li><li><p><code>info_sz </code>: (input) The size of the info parameter. Must be less than or equal to 128 bytes.</p></li><li><p><code>num_iterations </code>: (input) Number of iterations to carry out (PBKDF only)</p></li><li><p><code>derived_key_sz </code>: (input) The desired number of bytes to return for the KDF. For RFC 5869, this value must be less than 8160 bytes (SHA256) or 16320 (SHA512).</p></li><li><p><code>derived_key </code>: (output) returned pointer to the derived key.</p></li></ul></div><div class="breathe-sectiondef docutils container"><p>Key Management</p><p><span id=_CPPv322zkSaveECDSAPubKey2File5zkCTXPKci></span><span id=_CPPv222zkSaveECDSAPubKey2File5zkCTXPKci></span><span id=zkSaveECDSAPubKey2File__zkCTX.cCP.i></span><span id=zk__app__utils_8h_1a2843e04c508eb3b242bf3ec2a10b90bb class=target></span><span class=pre>int</span> <code>zkSaveECDSAPubKey2File</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>filename</span></em> , <span class=pre>int</span> <em><span class=pre>slot</span></em> <span class=sig-paren>)</span><br>[DEPRECATED] Use zkExportPubKey2File. Store the public key to a host file in PEM format.</p><p>This function is useful for generating Certificate Signing Requests (CSR).</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>filename </code>: (input) Filename where PEM formatted public key is to be stored.</p></li><li><p><code>slot </code>: (input) The key slot to retrieve. Only valid for model 4i and above.</p></li></ul><p><span id=_CPPv319zkExportPubKey2File5zkCTXPKcib></span><span id=_CPPv219zkExportPubKey2File5zkCTXPKcib></span><span id=zkExportPubKey2File__zkCTX.cCP.i.b></span><span id=zk__app__utils_8h_1a6446ab63ac57d94a77e5c6373ee24399 class=target></span><span class=pre>int</span> <code>zkExportPubKey2File</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>filename</span></em> , <span class=pre>int</span> <em><span class=pre>pubkey_slot</span></em> , <span class=pre>bool</span> <em><span class=pre>slot_is_foreign</span></em> <span class=sig-paren>)</span><br>Store the public key to a host file in PEM format.</p><p>This function is useful for generating Certificate Signing Requests (CSR).</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>filename </code>: (input) Filename where PEM formatted public key is to be stored.</p></li><li><p><code>pubkey_slot </code>: (input) The key slot to retrieve. Zymkey and HSM4 have slots 0, 1, and 2.</p></li><li><p><code>slot_is_foreign </code>: (input) If true, designates the pubkey slot to come from the foreign keystore. (model >= HSM6)</p></li></ul><p><span id=_CPPv316zkGetECDSAPubKey5zkCTXPP7uint8_tPii></span><span id=_CPPv216zkGetECDSAPubKey5zkCTXPP7uint8_tPii></span><span id=zkGetECDSAPubKey__zkCTX.uint8_tPP.iP.i></span><span id=zk__app__utils_8h_1a2c71f05a6b2b14d0440b9d3c81b41bfa class=target></span><span class=pre>int</span> <code>zkGetECDSAPubKey</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>uint8_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>pk</span></em> , <span class=pre>int</span> <span class=pre>*</span> <em><span class=pre>pk_sz</span></em> , <span class=pre>int</span> <em><span class=pre>slot</span></em> <span class=sig-paren>)</span><br>[DEPRECATED] Use zkExportPubKey. Gets the public key and stores in a byte array created by this function.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>pk </code>: (output) Pointer to a pointer created by this function which contains the public key.</p></li><li><p><code>pk_sz </code>: (output) Pointer to an integer which contains the size of the public key.</p></li><li><p><code>slot </code>: (input) The key slot to retrieve. Only valid for model 4i and above.</p></li></ul><p><span id=_CPPv314zkExportPubKey5zkCTXPP7uint8_tPiib></span><span id=_CPPv214zkExportPubKey5zkCTXPP7uint8_tPiib></span><span id=zkExportPubKey__zkCTX.uint8_tPP.iP.i.b></span><span id=zk__app__utils_8h_1a8f43ab1e3cfd0429a33f6e1292dced00 class=target></span><span class=pre>int</span> <code>zkExportPubKey</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>uint8_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>pk</span></em> , <span class=pre>int</span> <span class=pre>*</span> <em><span class=pre>pk_sz</span></em> , <span class=pre>int</span> <em><span class=pre>pubkey_slot</span></em> , <span class=pre>bool</span> <em><span class=pre>slot_is_foreign</span></em> <span class=sig-paren>)</span><br>Gets the public key and stores in a byte array created by this function.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>pk </code>: (output) Pointer to a pointer created by this function which contains the public key.</p></li><li><p><code>pk_sz </code>: (output) Pointer to an integer which contains the size of the public key.</p></li><li><p><code>pubkey_slot </code>: (input) The key slot to retrieve. Zymkey and HSM4 have slots 0, 1, and 2.</p></li><li><p><code>slot_is_foreign </code>: (input) If true, designates the pubkey slot to come from the foreign keystore (model >= HSM6).</p></li></ul><p><span id=_CPPv319zkGetAllocSlotsList5zkCTXbPiPPiPi></span><span id=_CPPv219zkGetAllocSlotsList5zkCTXbPiPPiPi></span><span id=zkGetAllocSlotsList__zkCTX.b.iP.iPP.iP></span><span id=zk__app__utils_8h_1ac4f620af7fafbf32fd820f6db8861e5f class=target></span><span class=pre>int</span> <code>zkGetAllocSlotsList</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>bool</span> <em><span class=pre>is_foreign</span></em> , <span class=pre>int</span> <span class=pre>*</span> <em><span class=pre>max_num_keys</span></em> , <span class=pre>int</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>alloc_key_list</span></em> , <span class=pre>int</span> <span class=pre>*</span> <em><span class=pre>alloc_key_list_sz</span></em> <span class=sig-paren>)</span><br>Get the list of allocated keys (model >= HSM6).</p><p>This function returns a list of all allocated key slots.</p><p><strong>Return</strong><br>0 if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>is_foreign </code>: (input) if true, retrieve allocation list of the foreign keys</p></li><li><p><code>max_num_keys </code>: (input) retrieves the key pool size</p></li><li><p><code>alloc_key_list </code>: (output) a pointer to an array of integers provided by this function to the caller</p></li><li><p><code>alloc_key_list_sz </code>: (output) a pointer to an integer which contains the size of the returned key list</p></li></ul><p><span id=_CPPv320zkStoreForeignPubKey5zkCTX14ZK_EC_KEY_TYPEP7uint8_ti></span><span id=_CPPv220zkStoreForeignPubKey5zkCTX14ZK_EC_KEY_TYPEP7uint8_ti></span><span id=zkStoreForeignPubKey__zkCTX.ZK_EC_KEY_TYPE.uint8_tP.i></span><span id=zk__app__utils_8h_1a558efd96315d7e1e7245e52cdfa0bd0e class=target></span><span class=pre>int</span> <code>zkStoreForeignPubKey</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <a href=index.html#_CPPv414ZK_EC_KEY_TYPE class="reference internal" title=ZK_EC_KEY_TYPE><span class=pre>ZK_EC_KEY_TYPE</span></a> <em><span class=pre>pk_type</span></em> , <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>pk</span></em> , <span class=pre>int</span> <em><span class=pre>pk_sz</span></em> <span class=sig-paren>)</span><br>Store a new foreign public key in Zymkey. (model >= HSM6)</p><p>This function stores a new foreign public key in the Zymkey public key ring. This public key can be used for signature verification in use cases where it is desirable to hide the public key.</p><p><strong>Return</strong><br>allocated slot number in foreign key store, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>pk_type </code>: (input) The type of the public key.</p></li><li><p><code>pk </code>: (input) Pointer to the public key to store.</p></li><li><p><code>pk_sz </code>: (input) The public key size.</p></li></ul><p><span id=_CPPv321zkDisablePubKeyExport5zkCTXib></span><span id=_CPPv221zkDisablePubKeyExport5zkCTXib></span><span id=zkDisablePubKeyExport__zkCTX.i.b></span><span id=zk__app__utils_8h_1a156c256f416f2e5b466fe7379d64899b class=target></span><span class=pre>int</span> <code>zkDisablePubKeyExport</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>pubkey_slot</span></em> , <span class=pre>bool</span> <em><span class=pre>slot_is_foreign</span></em> <span class=sig-paren>)</span><br>Prevent a public key from being exported to the host. (model >= HSM6)</p><p>This function prevents the public key at the specified slot from being exported to the host using the API zkExportPubKey.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>pubkey_slot </code>: (input) The key slot to disable pubkey export on.</p></li><li><p><code>slot_is_foreign </code>: (input) The slot parameter refers to a slot in the foreign keyring.</p></li></ul><p><span id=_CPPv312zkGenKeyPair5zkCTX14ZK_EC_KEY_TYPE></span><span id=_CPPv212zkGenKeyPair5zkCTX14ZK_EC_KEY_TYPE></span><span id=zkGenKeyPair__zkCTX.ZK_EC_KEY_TYPE></span><span id=zk__app__utils_8h_1a7d440c70c23f8fe1144a4a95b2ada1e3 class=target></span><span class=pre>int</span> <code>zkGenKeyPair</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <a href=index.html#_CPPv414ZK_EC_KEY_TYPE class="reference internal" title=ZK_EC_KEY_TYPE><span class=pre>ZK_EC_KEY_TYPE</span></a> <em><span class=pre>type</span></em> <span class=sig-paren>)</span><br>Generate a new persistent key pair. (model >= HSM6)</p><p>This function generates a new key pair of the specified type and store it persistently. This key pair cannot be used as part of the zymkey’s digital wallet operations.</p><p><strong>Return</strong><br>allocated slot number if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>type </code>: (input) The type of key to generate (ZK_EC_KEY_TYPE).</p></li></ul><p><span id=_CPPv321zkGenEphemeralKeyPair5zkCTX14ZK_EC_KEY_TYPE></span><span id=_CPPv221zkGenEphemeralKeyPair5zkCTX14ZK_EC_KEY_TYPE></span><span id=zkGenEphemeralKeyPair__zkCTX.ZK_EC_KEY_TYPE></span><span id=zk__app__utils_8h_1ab97b544f292dae99810a4d2128a0ba53 class=target></span><span class=pre>int</span> <code>zkGenEphemeralKeyPair</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <a href=index.html#_CPPv414ZK_EC_KEY_TYPE class="reference internal" title=ZK_EC_KEY_TYPE><span class=pre>ZK_EC_KEY_TYPE</span></a> <em><span class=pre>type</span></em> <span class=sig-paren>)</span><br>Generate an ephemeral key pair. (model >= HSM6)</p><p>This function generates an ephemeral key pair of the specified type. Ephemeral key pairs are useful when performing ECDH for time-of-flight encryption. Only one ephemeral key slot is available and is not persistent between reboots.</p><p><strong>Return</strong><br>0 if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>type </code>: (input) The type of key to generate (ZK_EC_KEY_TYPE).</p></li></ul><p><span id=_CPPv311zkRemoveKey5zkCTXib></span><span id=_CPPv211zkRemoveKey5zkCTXib></span><span id=zkRemoveKey__zkCTX.i.b></span><span id=zk__app__utils_8h_1a68c45329be1247878b4d0d9a690e2915 class=target></span><span class=pre>int</span> <code>zkRemoveKey</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>slot</span></em> , <span class=pre>bool</span> <em><span class=pre>slot_is_foreign</span></em> <span class=sig-paren>)</span><br>Remove a key pair or a foreign public key. (model >= HSM6)</p><p>This function deletes a key pair or a foreign public key from persistent storage.</p><p><strong>Return</strong><br>0 if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>slot </code>: (input) The slot</p></li><li><p><code>slot_is_foreign </code>: (input) The slot parameter refers to a slot in the foreign keyring.</p></li></ul><p><span id=_CPPv324zkInvalidateEphemeralKey5zkCTX></span><span id=_CPPv224zkInvalidateEphemeralKey5zkCTX></span><span id=zkInvalidateEphemeralKey__zkCTX></span><span id=zk__app__utils_8h_1a6d74d4a5fd5748dd90c30c372bf23e2b class=target></span><span class=pre>int</span> <code>zkInvalidateEphemeralKey</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> <span class=sig-paren>)</span><br>Invalidate the ephemeral key. (model >= HSM6)</p><p>This function invalidates the ephemeral key.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>ctx </code>: (input) Zymkey context.</li></ul></div><div class="breathe-sectiondef docutils container"><p>Digital Wallet (BIP32/39/44)</p><p><span id=_CPPv321zkGenWalletMasterSeed5zkCTX14ZK_EC_KEY_TYPEPKcPK7uint8_tiPPc></span><span id=_CPPv221zkGenWalletMasterSeed5zkCTX14ZK_EC_KEY_TYPEPKcPK7uint8_tiPPc></span><span id=zkGenWalletMasterSeed__zkCTX.ZK_EC_KEY_TYPE.cCP.uint8_tCP.i.cPP></span><span id=zk__app__utils_8h_1a3c5b9d59df297fd5a20c8f098279c4e0 class=target></span><span class=pre>int</span> <code>zkGenWalletMasterSeed</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <a href=index.html#_CPPv414ZK_EC_KEY_TYPE class="reference internal" title=ZK_EC_KEY_TYPE><span class=pre>ZK_EC_KEY_TYPE</span></a> <em><span class=pre>type</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>wallet_name</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>master_generator_key</span></em> , <span class=pre>int</span> <em><span class=pre>master_generator_key_size</span></em> , <span class=pre>char</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>bip39_mnemonic</span></em> <span class=sig-paren>)</span><br>Generate master seed to start a new blockchain wallet. (model >= HSM6)</p><p>This function generates a new blockchain master seed for creating a new wallet.</p><p><strong>Return</strong><br>allocated slot number if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>type </code>: (input) The type of key to generate (ZK_EC_KEY_TYPE).</p></li><li><p><code>wallet_name </code>: (input) An ASCII string which contains the name of the wallet.</p></li><li><p><code>master_generator_key </code>: (input) The master generator key used to help generate the master seed.</p></li><li><p><code>master_generator_key_size </code>: (input) The size of the master generator key. If 0, no master generator key is used in the formulation of the master seed.</p></li><li><p><code>bip39_mnemonic </code>: (output) A pointer to the bip39 mnemonic sentence. If NULL, the master seed is generated per BIP32. Otherwise, the master seed is generated per BIP39 and the mnemonic sentence is returned in this parameter. The string is null terminated and encoded in UTF-8 NFKD from the BIP39 Enlish dictionary.</p></li></ul><p><span id=_CPPv319zkGenWalletChildKey5zkCTXi8uint32_tb></span><span id=_CPPv219zkGenWalletChildKey5zkCTXi8uint32_tb></span><span id=zkGenWalletChildKey__zkCTX.i.uint32_t.b></span><span id=zk__app__utils_8h_1aaab64bbea25d2d10f7f889ff24d0080b class=target></span><span class=pre>int</span> <code>zkGenWalletChildKey</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>parent_key_slot</span></em> , <span class=pre>uint32_t</span> <em><span class=pre>index</span></em> , <span class=pre>bool</span> <em><span class=pre>is_hardened</span></em> <span class=sig-paren>)</span><br>Generate child key from a parent key in a blockchain wallet . (model >= HSM6)</p><p>This function generates a new child key descendent from a specified parent key in a wallet.</p><p><strong>Return</strong><br>allocated slot number if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>parent_key_slot </code>: (input) The parent key slot to base the child key derivation on.</p></li><li><p><code>index </code>: (input) The index of the child seed. This determines the node address as well as the outcome of the key generation.</p></li><li><p><code>is_hardened </code>: (input) If true, a hardened key is generated.</p></li></ul><p><span id=_CPPv337zkRestoreWalletMasterSeedFromMnemonic5zkCTX14ZK_EC_KEY_TYPEPKcPK7uint8_tiPc></span><span id=_CPPv237zkRestoreWalletMasterSeedFromMnemonic5zkCTX14ZK_EC_KEY_TYPEPKcPK7uint8_tiPc></span><span id=zkRestoreWalletMasterSeedFromMnemonic__zkCTX.ZK_EC_KEY_TYPE.cCP.uint8_tCP.i.cP></span><span id=zk__app__utils_8h_1a89be1f197af0af5fbd69dc860dde49c4 class=target></span><span class=pre>int</span> <code>zkRestoreWalletMasterSeedFromMnemonic</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <a href=index.html#_CPPv414ZK_EC_KEY_TYPE class="reference internal" title=ZK_EC_KEY_TYPE><span class=pre>ZK_EC_KEY_TYPE</span></a> <em><span class=pre>type</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>wallet_name</span></em> , <em><span class=pre>const</span></em> <span class=pre>uint8_t</span> <span class=pre>*</span> <em><span class=pre>master_generator_key</span></em> , <span class=pre>int</span> <em><span class=pre>master_generator_key_size</span></em> , <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>bip39_mnemonic</span></em> <span class=sig-paren>)</span><br>Restore a master seed from a BIP39 mnemonic and a master generator key. (model >= HSM6)</p><p>This function restores a wallet master seed from a supplied BIP39 mnemonic string and a master generator key.</p><p><strong>Return</strong><br>allocated slot number if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>type </code>: (input) The type of key to generate (ZK_KEY_TYPE).</p></li><li><p><code>wallet_name </code>: (input) An ASCII string which contains the name of the wallet.</p></li><li><p><code>master_generator_key </code>: (input) The master generator key used to help generate the master seed.</p></li><li><p><code>master_generator_key_size </code>: (input) The size of the master generator key. If 0, no master generator key is used in the formulation of the master seed.</p></li><li><p><code>bip39_mnemonic </code>: (input) The bip39_mnemonic string, null terminated and UTF-8 NFKD encoded from the BIP39 English dictionary.</p></li></ul><p><span id=_CPPv330zkGetWalletNodeAddrFromKeySlot5zkCTXiPPcPPcPi></span><span id=_CPPv230zkGetWalletNodeAddrFromKeySlot5zkCTXiPPcPPcPi></span><span id=zkGetWalletNodeAddrFromKeySlot__zkCTX.i.cPP.cPP.iP></span><span id=zk__app__utils_8h_1a5d6c1880618a06e360fad5f3b6b554a9 class=target></span><span class=pre>int</span> <code>zkGetWalletNodeAddrFromKeySlot</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>slot</span></em> , <span class=pre>char</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>node_addr</span></em> , <span class=pre>char</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>wallet_name</span></em> , <span class=pre>int</span> <span class=pre>*</span> <em><span class=pre>master_seed_slot</span></em> <span class=sig-paren>)</span><br>Derive the node address from a key slot number. (model >= HSM6)</p><p>This function derives a node address from an input key slot number.</p><p><strong>Return</strong><br>0 if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>slot </code>: (input) A key slot number that is part of a digital wallet.</p></li><li><p><code>node_addr </code>: (output) A pointer to a pointer which will contain the node address in ASCII.</p></li><li><p><code>wallet_name </code>: (output) A pointer to a pointer which will contain the wallet name in ASCII. If NULL, this parameter will not be retrieved.</p></li><li><p><code>master_seed_slot </code>: (output) A pointer to an integer which will contain the master seed key slot. If NULL, this parameter will not be retrieved.</p></li></ul><p><span id=_CPPv330zkGetWalletKeySlotFromNodeAddr5zkCTXPKcPKciPi></span><span id=_CPPv230zkGetWalletKeySlotFromNodeAddr5zkCTXPKcPKciPi></span><span id=zkGetWalletKeySlotFromNodeAddr__zkCTX.cCP.cCP.i.iP></span><span id=zk__app__utils_8h_1ab8d71adf4a175f319cc56ce83fc745d0 class=target></span><span class=pre>int</span> <code>zkGetWalletKeySlotFromNodeAddr</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>node_addr</span></em> , <em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <em><span class=pre>wallet_name</span></em> , <span class=pre>int</span> <em><span class=pre>master_seed_slot</span></em> , <span class=pre>int</span> <span class=pre>*</span> <em><span class=pre>slot</span></em> <span class=sig-paren>)</span><br>Derive the slot address from a node address. (model >= HSM6)</p><p>This function returns the slot number associated with a given node address.</p><p><strong>Return</strong><br>0 if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>node_addr </code>: (input) A pointer which contains the node address in ASCII.</p></li><li><p><code>wallet_name </code>: (input) A pointer which contains the wallet name in ASCII, used to identify the wallet identity. If desired, this parameter can be NULL and the master_seed_slot parameter can be specified instead.</p></li><li><p><code>master_seed_slot </code>: (input) The master seed slot. Can be used to specify the wallet identity instead of the wallet name.</p></li><li><p><code>slot </code>: (output) A pointer to an integer which contains the associated key slot.</p></li></ul></div><div class="breathe-sectiondef docutils container"><p>Perimeter Detect</p><p><span id=_CPPv325zkSetPerimeterEventAction5zkCTXi8uint32_t></span><span id=_CPPv225zkSetPerimeterEventAction5zkCTXi8uint32_t></span><span id=zkSetPerimeterEventAction__zkCTX.i.uint32_t></span><span id=zk__app__utils_8h_1a099e0f45cd4ddeaddc9089ee1ee4618f class=target></span><span class=pre>int</span> <code>zkSetPerimeterEventAction</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>channel</span></em> , <span class=pre>uint32_t</span> <em><span class=pre>action_flags</span></em> <span class=sig-paren>)</span><br>Set perimeter breach action.</p><p>This function specifies the action to take when a perimeter breach event occurs. The possible actions are any combination of:</p><ul><li><p>Notify host</p></li><li><p>Zymkey self-destruct</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>channel </code>: (input) The channel (0 or 1) that the action flags will be applied to.</p></li><li><p><code>action_flags </code>: (input) The actions to apply to the perimeter event channel:</p><ul><li><p>Notify (ZK_PERIMETER_EVENT_ACTION_NOTIFY)</p></li><li><p>Self-destruct (ZK_PERIMETER_EVENT_ACTION_SELF_DESTRUCT)</p></li></ul></li></ul></li></ul><p><span id=_CPPv335zkSetDigitalPerimeterDetectLPPeriod5zkCTXi></span><span id=_CPPv235zkSetDigitalPerimeterDetectLPPeriod5zkCTXi></span><span id=zkSetDigitalPerimeterDetectLPPeriod__zkCTX.i></span><span id=zk__app__utils_8h_1af3e8e23e3a8cdbf5ec95f115fb154915 class=target></span><span class=pre>int</span> <code>zkSetDigitalPerimeterDetectLPPeriod</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>lp_period</span></em> <span class=sig-paren>)</span><br>Set the low power period (model >= HSM6).</p><p>This function sets low power period on the digital perimeter detect</p><p><strong>Return</strong><br>0 if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>lp_period </code>: (input) low power period in microseconds</p></li></ul><p><span id=_CPPv336zkSetDigitalPerimeterDetectLPMaxBits5zkCTXi></span><span id=_CPPv236zkSetDigitalPerimeterDetectLPMaxBits5zkCTXi></span><span id=zkSetDigitalPerimeterDetectLPMaxBits__zkCTX.i></span><span id=zk__app__utils_8h_1a6e29752c07d3f08810b1ef78162e00d2 class=target></span><span class=pre>int</span> <code>zkSetDigitalPerimeterDetectLPMaxBits</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>max_num_bits</span></em> <span class=sig-paren>)</span><br>Set the low power max number of bits (model >= HSM6).</p><p>This function sets low power max number of bits on the digital perimeter detect</p><p><strong>Return</strong><br>0 if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>max_num_bits </code>: (input) max number of bits</p></li></ul><p><span id=_CPPv333zkSetDigitalPerimeterDetectDelays5zkCTXii></span><span id=_CPPv233zkSetDigitalPerimeterDetectDelays5zkCTXii></span><span id=zkSetDigitalPerimeterDetectDelays__zkCTX.i.i></span><span id=zk__app__utils_8h_1a32d0c0a1960f271c4c37b173fd6f6fde class=target></span><span class=pre>int</span> <code>zkSetDigitalPerimeterDetectDelays</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>min_delay_ns</span></em> , <span class=pre>int</span> <em><span class=pre>max_delay_ns</span></em> <span class=sig-paren>)</span><br>Set the delays (model >= HSM6).</p><p>This function sets delays on the digital perimeter detect</p><p><strong>Return</strong><br>0 if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>min_delay_ns </code>: (input) minimum delay in nanoseconds</p></li><li><p><code>max_delay_ns </code>: (input) maximum delay in nanoseconds</p></li></ul><p><span id=_CPPv323zkWaitForPerimeterEvent5zkCTX8uint32_t></span><span id=_CPPv223zkWaitForPerimeterEvent5zkCTX8uint32_t></span><span id=zkWaitForPerimeterEvent__zkCTX.uint32_t></span><span id=zk__app__utils_8h_1a8ee9b92164a922565327aae70ea12578 class=target></span><span class=pre>int</span> <code>zkWaitForPerimeterEvent</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>uint32_t</span> <em><span class=pre>timeout_ms</span></em> <span class=sig-paren>)</span><br>Wait for a perimeter breach event to be detected.</p><p>This function is called in order to wait for a perimeter breach event to occur. This function blocks the calling thread unless called with a timeout of zero. Note that, in order to receive perimeter events, the zymkey must have been configured to notify the host on either or both of the perimeter detect channels via a call to “zkSetPerimeterEventAction”.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure, -ETIMEDOUT when no perimeter events detected within the specified timeout</p><p><strong>Parameters</strong></p><ul><li><code>timeout_ms </code>: (input) The maximum amount of time in milliseconds to wait for a perimeter event to arrive.</li></ul><p><span id=_CPPv324zkGetPerimeterDetectInfo5zkCTXPP8uint32_tPi></span><span id=_CPPv224zkGetPerimeterDetectInfo5zkCTXPP8uint32_tPi></span><span id=zkGetPerimeterDetectInfo__zkCTX.uint32_tPP.iP></span><span id=zk__app__utils_8h_1ac21dfdb0c57067772fe45c6481551029 class=target></span><span class=pre>int</span> <code>zkGetPerimeterDetectInfo</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>uint32_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>timestamps_sec</span></em> , <span class=pre>int</span> <span class=pre>*</span> <em><span class=pre>num_timestamps</span></em> <span class=sig-paren>)</span><br>Get current perimeter detect info.</p><p>This function gets the timestamp of the first perimeter detect event for the given channel</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>timestamps_sec </code>: (output) The timestamps for when any breach occurred. The index in this array corresponds to the channel number used by zkSetPerimeterEventAction. A 0 value means no breach has occurred on this channel. This array is allocated by this routine and so it must be freed by the caller.</p></li><li><p><code>num_timestamps </code>: (output) The number of timestamps in the returned array</p></li></ul><p><span id=_CPPv328zkClearPerimeterDetectEvents5zkCTX></span><span id=_CPPv228zkClearPerimeterDetectEvents5zkCTX></span><span id=zkClearPerimeterDetectEvents__zkCTX></span><span id=zk__app__utils_8h_1aaba47000d3349d6278c4e0389f3be92d class=target></span><span class=pre>int</span> <code>zkClearPerimeterDetectEvents</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> <span class=sig-paren>)</span><br>Clear perimeter detect events.</p><p>This function clears all perimeter detect event info and rearms all perimeter detect channels</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p></div><div class="breathe-sectiondef docutils container"><p>LED Control</p><p><span id=_CPPv38zkLEDOff5zkCTX></span><span id=_CPPv28zkLEDOff5zkCTX></span><span id=zkLEDOff__zkCTX></span><span id=zk__app__utils_8h_1a0a8056c9a978f68358a6c30e32a0554a class=target></span><span class=pre>int</span> <code>zkLEDOff</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> <span class=sig-paren>)</span><br>Turns the LED off.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>ctx </code>: (input) Zymkey context.</li></ul><p><span id=_CPPv37zkLEDOn5zkCTX></span><span id=_CPPv27zkLEDOn5zkCTX></span><span id=zkLEDOn__zkCTX></span><span id=zk__app__utils_8h_1a95b9136c02dd481c3c5da5835e47dc4c class=target></span><span class=pre>int</span> <code>zkLEDOn</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> <span class=sig-paren>)</span><br>Turns the LED on.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>ctx </code>: (input) Zymkey context.</li></ul><p><span id=_CPPv310zkLEDFlash5zkCTX8uint32_t8uint32_t8uint32_t></span><span id=_CPPv210zkLEDFlash5zkCTX8uint32_t8uint32_t8uint32_t></span><span id=zkLEDFlash__zkCTX.uint32_t.uint32_t.uint32_t></span><span id=zk__app__utils_8h_1a83ef549eec6c821909be6a542995ebca class=target></span><span class=pre>int</span> <code>zkLEDFlash</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>uint32_t</span> <em><span class=pre>on_ms</span></em> , <span class=pre>uint32_t</span> <em><span class=pre>off_ms</span></em> , <span class=pre>uint32_t</span> <em><span class=pre>num_flashes</span></em> <span class=sig-paren>)</span><br>Flashes the LED.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>on_ms </code>: (input) The amount of time, in milliseconds, that the LED will stay on during a flash cycle.</p></li><li><p><code>off_ms </code>: (input) The amount of time, in milliseconds, that the LED will stay off during a flash cycle.</p></li><li><p><code>num_flashes </code>: (input) The number of on/off flash cycles to complete. If this parameter is 0, then the LED will flash indefinitely.</p></li></ul></div><div class="breathe-sectiondef docutils container"><p>Administrative Ops</p><p><span id=_CPPv312zkSetI2CAddr5zkCTXi></span><span id=_CPPv212zkSetI2CAddr5zkCTXi></span><span id=zkSetI2CAddr__zkCTX.i></span><span id=zk__app__utils_8h_1a17a243ae1bf977c5357aae425c0613a9 class=target></span><span class=pre>int</span> <code>zkSetI2CAddr</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>addr</span></em> <span class=sig-paren>)</span><br>Sets the i2c address of the Zymkey (i2c versions only)</p><p>This method should be called if the i2c address of the Zymkey is shared with another i2c device on the same i2c bus. The default i2c address for Zymkey units is 0x30. Currently, the address may be set in the ranges of 0x30 - 0x37 and 0x60 - 0x67. After successful completion of this command, the Zymkey will reset itself.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>addr </code>: (input) The i2c address that the Zymkey will set itself to.</li></ul></div><div class="breathe-sectiondef docutils container"><p>Time</p><p><span id=_CPPv39zkGetTime5zkCTXP8uint32_tb></span><span id=_CPPv29zkGetTime5zkCTXP8uint32_tb></span><span id=zkGetTime__zkCTX.uint32_tP.b></span><span id=zk__app__utils_8h_1a4bcc349ef785502a3e5eabdc33629181 class=target></span><span class=pre>int</span> <code>zkGetTime</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>uint32_t</span> <span class=pre>*</span> <em><span class=pre>epoch_time_sec</span></em> , <span class=pre>bool</span> <em><span class=pre>precise_time</span></em> <span class=sig-paren>)</span><br>Get current GMT time.</p><p>This function is called to get the time directly from a Zymkey’s Real Time Clock (RTC)</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>epoch_time_sec </code>: (output) The time in seconds from the epoch (Jan. 1, 1970).</p></li><li><p><code>precise_time </code>: (input) If true, this API returns the time after the next second falls. This means that the caller could be blocked up to one second. If false, the API returns immediately with the current time reading.</p></li></ul></div><div class="breathe-sectiondef docutils container"><p>Accelerometer</p><p><span id=_CPPv319zkSetTapSensitivity5zkCTXif></span><span id=_CPPv219zkSetTapSensitivity5zkCTXif></span><span id=zkSetTapSensitivity__zkCTX.i.float></span><span id=zk__app__utils_8h_1a4f378947ae177504717b050ee892c48f class=target></span><span class=pre>int</span> <code>zkSetTapSensitivity</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>axis</span></em> , <span class=pre>float</span> <em><span class=pre>pct</span></em> <span class=sig-paren>)</span><br>Sets the sensitivity of tap operations.</p><p>This method permits setting the sensitivity of the tap detection feature. Each axis may be individually configured or all at once.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>axis </code>: (input) The axis to configure. This parameter should contain one of the values in the enum typedef ACCEL_AXIS_TYPE.</p></li><li><p><code>pct </code>: (input) The sensitivity expressed as percentage.</p><ol><li><p>0% = Shut down: Tap detection should not occur along the axis.</p></li><li><p>100% = Maximum sensitivity.</p></li></ol></li></ul><p><span id=_CPPv312zkWaitForTap5zkCTX8uint32_t></span><span id=_CPPv212zkWaitForTap5zkCTX8uint32_t></span><span id=zkWaitForTap__zkCTX.uint32_t></span><span id=zk__app__utils_8h_1a59be1e5f44001cfe4dbaac2a77bbab4c class=target></span><span class=pre>int</span> <code>zkWaitForTap</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>uint32_t</span> <em><span class=pre>timeout_ms</span></em> <span class=sig-paren>)</span><br>Wait for a tap event to be detected.</p><p>This function is called in order to wait for a tap event to occur. This function blocks the calling thread unless called with a timeout of zero.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure, -ETIMEDOUT when no tap events detected within the specified timeout</p><p><strong>Parameters</strong></p><ul><li><code>timeout_ms </code>: (input) The maximum amount of time in milliseconds to wait for a tap event to arrive.</li></ul><p><span id=_CPPv322zkGetAccelerometerData5zkCTXP19zkAccelAxisDataTypeP19zkAccelAxisDataTypeP19zkAccelAxisDataType></span><span id=_CPPv222zkGetAccelerometerData5zkCTXP19zkAccelAxisDataTypeP19zkAccelAxisDataTypeP19zkAccelAxisDataType></span><span id=zkGetAccelerometerData__zkCTX.zkAccelAxisDataTypeP.zkAccelAxisDataTypeP.zkAccelAxisDataTypeP></span><span id=zk__app__utils_8h_1aafb16259abbab1dc1a65c0efa54d5a42 class=target></span><span class=pre>int</span> <code>zkGetAccelerometerData</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <a href=index.html#_CPPv419zkAccelAxisDataType class="reference internal" title=zkAccelAxisDataType><span class=pre>zkAccelAxisDataType</span></a> <span class=pre>*</span> <em><span class=pre>x</span></em> , <a href=index.html#_CPPv419zkAccelAxisDataType class="reference internal" title=zkAccelAxisDataType><span class=pre>zkAccelAxisDataType</span></a> <span class=pre>*</span> <em><span class=pre>y</span></em> , <a href=index.html#_CPPv419zkAccelAxisDataType class="reference internal" title=zkAccelAxisDataType><span class=pre>zkAccelAxisDataType</span></a> <span class=pre>*</span> <em><span class=pre>z</span></em> <span class=sig-paren>)</span><br>Get current accelerometer data and tap info.</p><p>This function gets the most recent accelerometer data in units of g forces plus the tap direction per axis.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>x </code>: (output) x axis accelerometer information y (output) y axis accelerometer information z (output) z axis accelerometer information</li></ul></div><div class="breathe-sectiondef docutils container"><p>Binding Management</p><p><span id=_CPPv313zkLockBinding5zkCTX></span><span id=_CPPv213zkLockBinding5zkCTX></span><span id=zkLockBinding__zkCTX></span><span id=zk__app__utils_8h_1a34dcd3e4579174085cc753e7148bc3e7 class=target></span><span class=pre>int</span> <code>zkLockBinding</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> <span class=sig-paren>)</span><br>Set soft binding lock.</p><p>This function locks the binding for a specific HSM. This API is only valid for HSM series products.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><span id=_CPPv323zkGetCurrentBindingInfo5zkCTXPbPb></span><span id=_CPPv223zkGetCurrentBindingInfo5zkCTXPbPb></span><span id=zkGetCurrentBindingInfo__zkCTX.bP.bP></span><span id=zk__app__utils_8h_1a9c1ac0054642eb48f4d9b604e1fb0ab5 class=target></span><span class=pre>int</span> <code>zkGetCurrentBindingInfo</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>bool</span> <span class=pre>*</span> <em><span class=pre>binding_is_locked</span></em> , <span class=pre>bool</span> <span class=pre>*</span> <em><span class=pre>is_bound</span></em> <span class=sig-paren>)</span><br>Get current binding info.</p><p>This function gets the current binding lock state as well as the current binding state. This API is only valid for devices in the HSM family.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>binding_is_locked </code>: (output) Binary value which expresses the current binding lock state. is_bound (output) Binary value which expresses the current bind state.</li></ul></div><div class="breathe-sectiondef docutils container"><p>Module Info</p><p><span id=_CPPv322zkGetModelNumberString5zkCTXPPc></span><span id=_CPPv222zkGetModelNumberString5zkCTXPPc></span><span id=zkGetModelNumberString__zkCTX.cPP></span><span id=zk__app__utils_8h_1a96ef2502bb9c17c1884cd8e5a481ec55 class=target></span><span class=pre>int</span> <code>zkGetModelNumberString</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>char</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>model_str</span></em> <span class=sig-paren>)</span><br>Get Zymkey model number.</p><p>This function retrieves the model number of the zymkey referred to in a specified context</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context which was created with zkOpen</p></li><li><p><code>model_str </code>: (output) A double pointer to the model string. This function allocates this string. It is the caller’s responsibility to free it.</p></li></ul><p><span id=_CPPv326zkGetFirmwareVersionString5zkCTXPPc></span><span id=_CPPv226zkGetFirmwareVersionString5zkCTXPPc></span><span id=zkGetFirmwareVersionString__zkCTX.cPP></span><span id=zk__app__utils_8h_1a277fddb2c0abff8b8b2e532b46481fe5 class=target></span><span class=pre>int</span> <code>zkGetFirmwareVersionString</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>char</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>fw_ver_str</span></em> <span class=sig-paren>)</span><br>Get Zymkey firmware version.</p><p>This function retrieves the firmware version number of the zymkey referred to in a specified context</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context which was created with zkOpen</p></li><li><p><code>version_str </code>: (output) A double pointer to the firmware version string. This function allocates this string. It is the caller’s responsibility to free it.</p></li></ul><p><span id=_CPPv323zkGetSerialNumberString5zkCTXPPc></span><span id=_CPPv223zkGetSerialNumberString5zkCTXPPc></span><span id=zkGetSerialNumberString__zkCTX.cPP></span><span id=zk__app__utils_8h_1a2de34f6c567cf67e908d6aafce53b323 class=target></span><span class=pre>int</span> <code>zkGetSerialNumberString</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>char</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>serial_num_str</span></em> <span class=sig-paren>)</span><br>Get Zymkey serial number.</p><p>This function retrieves the serial number of the zymkey referred to in a specified context</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context which was created with zkOpen</p></li><li><p><code>serial_num_str </code>: (output) A double pointer to the serial number string. This function allocates this string. It is the caller’s responsibility to free it.</p></li></ul><p><span id=_CPPv312zkGetCPUTemp5zkCTXPf></span><span id=_CPPv212zkGetCPUTemp5zkCTXPf></span><span id=zkGetCPUTemp__zkCTX.floatP></span><span id=zk__app__utils_8h_1a2e463f92b62c58b0ffb3d036998de8cd class=target></span><span class=pre>int</span> <code>zkGetCPUTemp</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>float</span> <span class=pre>*</span> <em><span class=pre>cpu_temp</span></em> <span class=sig-paren>)</span><br>Get current HSM CPU temperature. (model >= HSM6)</p><p>This function gets the current HSM CPU temp.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>cpu_temp </code>: (output) The temperature in celsius of the CPU.</li></ul><p><span id=_CPPv313zkGetRTCDrift5zkCTXPf></span><span id=_CPPv213zkGetRTCDrift5zkCTXPf></span><span id=zkGetRTCDrift__zkCTX.floatP></span><span id=zk__app__utils_8h_1a4fb1581bda04b621f56af043173159f7 class=target></span><span class=pre>int</span> <code>zkGetRTCDrift</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>float</span> <span class=pre>*</span> <em><span class=pre>rtc_drift</span></em> <span class=sig-paren>)</span><br>Get current RTC drift. (model >= HSM6)</p><p>This function is called to get the current RTC drift.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>rtc_drift </code>: (output) The RTC drift.</li></ul><p><span id=_CPPv319zkGetBatteryVoltage5zkCTXPf></span><span id=_CPPv219zkGetBatteryVoltage5zkCTXPf></span><span id=zkGetBatteryVoltage__zkCTX.floatP></span><span id=zk__app__utils_8h_1a9c2d7b0c22146f89ba04ccc7df38052b class=target></span><span class=pre>int</span> <code>zkGetBatteryVoltage</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>float</span> <span class=pre>*</span> <em><span class=pre>batt_voltage</span></em> <span class=sig-paren>)</span><br>Get the battery voltage (model >= HSM6).</p><p>This function gets the current battery voltage</p><p><strong>Return</strong><br>0 if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>ctx </code>: (input) Zymkey context.</p></li><li><p><code>battV </code>: (output) The current battery voltage value</p></li></ul></div><div class="breathe-sectiondef docutils container"><p>Battery Voltage Monitor</p><p><span id=_CPPv325zkSetBatteryVoltageAction5zkCTXi></span><span id=_CPPv225zkSetBatteryVoltageAction5zkCTXi></span><span id=zkSetBatteryVoltageAction__zkCTX.i></span><span id=zk__app__utils_8h_1a004db48c634667dab0d53c745aa36266 class=target></span><span class=pre>int</span> <code>zkSetBatteryVoltageAction</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>action</span></em> <span class=sig-paren>)</span><br>Set battery voltage threshold action. (model >= HSM6)</p><p>This function specifies the action to take when the battery voltage falls below the threshold set by zkSetBatteryVoltageThreshold. If this function is never called, do nothing is default. There are three actions:</p><ul><li><p>Do nothing</p></li><li><p>Go to sleep until battery is replaced</p></li><li><p>Self-destruct</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>action </code>: (input) The action to apply, specify one of the ZK_THRESHOLD_ACTION_TYPE:</p><ul><li><p>Do nothing (ZK_ACTION_NONE)</p></li><li><p>Sleep (ZK_ACTION_SLEEP)</p></li><li><p>Self-destruct (ZK_ACTION_SELF_DESTRUCT)</p></li></ul></li></ul></li></ul><p><span id=_CPPv328zkSetBatteryVoltageThreshold5zkCTXf></span><span id=_CPPv228zkSetBatteryVoltageThreshold5zkCTXf></span><span id=zkSetBatteryVoltageThreshold__zkCTX.float></span><span id=zk__app__utils_8h_1a85d7e20bba98c94d2bd92b1f8dfc68c9 class=target></span><span class=pre>int</span> <code>zkSetBatteryVoltageThreshold</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>float</span> <em><span class=pre>threshold</span></em> <span class=sig-paren>)</span><br>Sets the battery voltage threshold. (model >= HSM6)</p><p>This function sets the threshold at which if the battery voltage falls bellow, the action set by zkSetBatteryVoltageAction will be carried out. The recommended threshold is 2.3V. If this function isn’t called 2.5V is assumed by default. 2.5V is also the maximum threshold you can set.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>threshold </code>: (input) The threshold in Volts.</li></ul></div><div class="breathe-sectiondef docutils container"><p>CPU Temperature Monitor</p><p><span id=_CPPv318zkSetCPUTempAction5zkCTXi></span><span id=_CPPv218zkSetCPUTempAction5zkCTXi></span><span id=zkSetCPUTempAction__zkCTX.i></span><span id=zk__app__utils_8h_1a9e7e23bdb88149047344b1522f62a627 class=target></span><span class=pre>int</span> <code>zkSetCPUTempAction</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>int</span> <em><span class=pre>action</span></em> <span class=sig-paren>)</span><br>Set HSM CPU temperature threshold action. (model >= HSM6)</p><p>This function specifies the action to take when the HSM CPU temperature falls below the threshold set by zkSetCPULowTempThreshold, or rises above the threshold set by zkSetCPUHighTempThreshold. There are two actions to apply:</p><ul><li><p>Do nothing</p></li><li><p>Self-destruct</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>action </code>: (input) The action to apply, used it’s named constant from ZK_THRESHOLD_ACTION_TYPE:</p><ul><li><p>Do nothing (ZK_ACTION_NONE)</p></li><li><p>Self-destruct (ZK_ACTION_SELF_DESTRUCT)</p></li></ul></li></ul></li></ul><p><span id=_CPPv324zkSetCPULowTempThreshold5zkCTXf></span><span id=_CPPv224zkSetCPULowTempThreshold5zkCTXf></span><span id=zkSetCPULowTempThreshold__zkCTX.float></span><span id=zk__app__utils_8h_1a0bf795c9bed846f2d87855816e70c114 class=target></span><span class=pre>int</span> <code>zkSetCPULowTempThreshold</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>float</span> <em><span class=pre>threshold</span></em> <span class=sig-paren>)</span><br>Sets the HSM CPU low temperature threshold. (model >= HSM6)</p><p>This function sets the threshold at which if the on-board HSM CPU’s tempreature falls below, the action set by zkSetCPUTempAction will be carried out. WARNING: You can lock yourself out in dev mode if you set a threshold above the CPU’s ambient temperature. The recommended setting is no more than 20C. If no threshold is set, -10 degrees celsius is set as default.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>threshold </code>: (input) The threshold in celsius.</li></ul><p><span id=_CPPv325zkSetCPUHighTempThreshold5zkCTXf></span><span id=_CPPv225zkSetCPUHighTempThreshold5zkCTXf></span><span id=zkSetCPUHighTempThreshold__zkCTX.float></span><span id=zk__app__utils_8h_1a26fab5ddba18b8d79feebcebe8583e1a class=target></span><span class=pre>int</span> <code>zkSetCPUHighTempThreshold</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv45zkCTX class="reference internal" title=zkCTX><span class=pre>zkCTX</span></a> <em><span class=pre>ctx</span></em> , <span class=pre>float</span> <em><span class=pre>threshold</span></em> <span class=sig-paren>)</span><br>Sets the HSM CPU high temperature threshold. (model >= HSM6)</p><p>This function sets the threshold at which if the on-board HSM CPU’s tempreature rises above, the action set by zkSetCPUTempAction will be carried out. WARNING: You can lock yourself out in dev mode if you set a threshold below the CPU’s ambient temperature. The recommended setting is no less than 40C. If no threshold is set, 65 degrees celsius is set as default.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>threshold </code>: (input) The threshold in celsius.</li></ul></div></div><p class=edit-page><a href=https://github.com/zymbit-docs/docs/blob/master/content/api/c_api.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></p><div class="docs-navigation d-flex justify-content-between"><a class=ml-auto href=https://docs.zymbit.com/api/cpp_api/><div class="card my-1"><div class="card-body py-2">C++ API Documentation &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-fluid><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://gohugo.io/>Hugo</a>.</li><li class=list-inline-item>Page last updated on 2021-03-26 21:43 UTC (<a href=https://github.com/zymbit-docs/docs/commit/0c3f3486b75aa54dc0302b53c5c6f67c65826abb><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg> <code>0c3f348</code></a>).</li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-right"><ul class=list-inline></ul></div></div></div></footer><script src=https://docs.zymbit.com/main.f6b484f556ad1f3bcf6061082139a2f21fa759f13930c39a25fe4a9f78f35e64122c2d86dffd56e67b292dabbda4095d8077194f196e0e348441c106a9f3d40e.js integrity="sha512-9rSE9VatHzvPYGEIITmi8h+nWfE5MMOaJf5Kn3jzXmQSLC2G3/1W5nspLau9pAldgHcZTxluDjSEQcEGqfPUDg==" crossorigin=anonymous defer></script><script src=https://docs.zymbit.com/index.min.95c2fb57984ca6cb1914e6658c1095cc47073a398c805d5ee842114fab739d64b4d5cd0626cda1be56c95e7f8c6e9c4d231866d1065245c873d731a6a7b01c5e.js integrity="sha512-lcL7V5hMpssZFOZljBCVzEcHOjmMgF1e6EIRT6tznWS01c0GJs2hvlbJXn+MbpxNIxhm0QZSRchz1zGmp7AcXg==" crossorigin=anonymous defer></script></body></html>