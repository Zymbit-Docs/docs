<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://docs.zymbit.com/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://docs.zymbit.com/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=https://docs.zymbit.com/main.c01bd6a1459e9eba251f9590a4017689eb83288b3abd2147b0cfa6adf0320dd965094135f389b4d02ffc8efc867ce86d9fc960482bdc058454e2e8f9eaa86fe0.css integrity="sha512-wBvWoUWenrolH5WQpAF2ieuDKIs6vSFHsM+mrfAyDdllCUE184m00C/8jvyGfOhtn8lgSCvcBYRU4uj56qhv4A==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>C++ API Documentation | Zymbit Documentation</title><meta name=description content="This is the official documentation for the official zkapputils Cpp API library."><link rel=canonical href=https://docs.zymbit.com/api/cpp_api/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://docs.zymbit.com/doks.png"><meta name=twitter:title content="C++ API Documentation"><meta name=twitter:description content="This is the official documentation for the official zkapputils Cpp API library."><meta name=twitter:site content="@zymbit"><meta name=twitter:creator content="@zymbit"><meta property="og:title" content="C++ API Documentation"><meta property="og:description" content="This is the official documentation for the official zkapputils Cpp API library."><meta property="og:type" content="article"><meta property="og:url" content="https://docs.zymbit.com/api/cpp_api/"><meta property="og:image" content="https://docs.zymbit.com/doks.png"><meta property="article:published_time" content="2021-03-26T21:34:55+00:00"><meta property="article:modified_time" content="2021-03-26T17:43:36-04:00"><meta property="og:site_name" content="Zymbit Documentation"><meta property="article:publisher" content="https://www.facebook.com/zymbit"><meta property="article:author" content="https://www.facebook.com/zymbit"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/docs.zymbit.com"},{"@type":"ListItem","position":3,"name":"Api","item":"https:\/\/docs.zymbit.com\/api\/"},{"@type":"ListItem","position":4,"name":"Cpp Api","item":"https:\/\/docs.zymbit.com\/api\/cpp_api\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://docs.zymbit.com/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://docs.zymbit.com/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://docs.zymbit.com/favicon-16x16.png><link rel=manifest href=https://docs.zymbit.com/site.webmanifest></head><body class="docs single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container-fluid><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 mr-auto" href=https://docs.zymbit.com><img class="mr-0 logo-light" src=https://docs.zymbit.com/logo-zymbit.png style=max-width:175px alt="Zymbit Documentation">
<img class="mr-0 logo-dark" src=https://docs.zymbit.com/logo-zymbit-dark.png style=max-width:175px alt="Zymbit Documentation"></a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/zymbit-docs><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ml-2 sr-only">GitHub</span></a></li><li class=nav-item><a class=nav-link href=https://twitter.com/zymbit><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><span class="ml-2 sr-only">Twitter</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav mr-auto order-5 order-md-2"><li class=nav-item><a class=nav-link href=https://docs.zymbit.com/>Docs</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container-fluid" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Getting Started</h3><ul class=docs-menu-top-list><li><a class=docs-link href=https://docs.zymbit.com/getting-started/introduction/>Introduction</a></li></ul><h3>Apis</h3><ul class=docs-menu-top-list><li><a class=docs-link href=https://docs.zymbit.com/api/c_api/>C API Documentation</a></li><li><a class="docs-link active" href=https://docs.zymbit.com/api/cpp_api/>C++ API Documentation</a></li><li><a class=docs-link href=https://docs.zymbit.com/api/api_docs_intro/>Intro to Zymkey Application Utilities</a></li><li><a class=docs-link href=https://docs.zymbit.com/api/python_api/>Python API Documentation</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#typedefs>Typedefs</a></li><li><a href=#structs>Structs</a></li><li><a href=#exceptions>Exceptions</a></li><li><a href=#classes>Classes</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>C++ API Documentation</h1><p class=lead>This is the official documentation for the official zkapputils Cpp API library.</p><p>C++ interface to Zymkey Application Utilities Library.</p><p>This file contains the C API to the the Zymkey Application Utilities library. This API facilitates writing user space applications which use Zymkey to perform cryptographic operations, such as:</p><ol><li><p>Signing of payloads using ECDSA</p></li><li><p>Verification of payloads that were signed using Zymkey</p></li><li><p>Exporting the public key that matches Zymkey’s private key</p></li><li><p>”Locking” and “unlocking” data objects</p></li><li><p>Generating random data Additionally, there are functions for changing the i2c address (i2c units only), setting tap sensitivity and controlling the LED.</p></li></ol><p><strong>Author</strong><br>Scott Miller</p><p><strong>Version</strong><br>1.0</p><p><strong>Date</strong><br>November 17, 2016</p><p><strong>Copyright</strong><br>Zymbit, Inc.</p><div id=typedefs class=section><h2 id=typedefs>Typedefs<a href=#typedefs class=anchor aria-hidden=true>#</a></h2><p><span id=_CPPv3N10zkAppUtils9byteArrayE></span><span id=_CPPv2N10zkAppUtils9byteArrayE></span><span id=zkAppUtils::byteArray></span><span id=zk_app_utils_class_8h_1a8cb247b41a182478fcdf780c1ce524e3 class=target></span><em><span class=pre>typedef</span></em> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>vector</span> <span class=pre>&lt;</span> <span class=pre>uint8_t</span> <span class=pre>></span> <code>zkAppUtils ::</code> <code>byteArray</code><br>Typedef for a simple unsigned bytes container.</p><p><span id=_CPPv3N10zkAppUtils8intArrayE></span><span id=_CPPv2N10zkAppUtils8intArrayE></span><span id=zkAppUtils::intArray></span><span id=zk_app_utils_class_8h_1a7cc12af0cdc6374a29588629bd450da6 class=target></span><em><span class=pre>typedef</span></em> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>vector</span> <span class=pre>&lt;</span> <span class=pre>int</span> <span class=pre>></span> <code>zkAppUtils ::</code> <code>intArray</code><br>Typedef for a simple integer container.</p></div><div id=structs class=section><h2 id=structs>Structs<a href=#structs class=anchor aria-hidden=true>#</a></h2><p><span id=_CPPv3N10zkAppUtils9accelDataE></span><span id=_CPPv2N10zkAppUtils9accelDataE></span><span id=zkAppUtils::accelData></span><span id=structzk_app_utils_1_1accel_data class=target></span><em><span class=pre>struct</span></em> <code>zkAppUtils ::</code> <code>accelData</code><br>Structure typedef used for retrieval of accelerometer data.</p><div class="breathe-sectiondef docutils container"><p>Public Members</p><p><span id=_CPPv3N10zkAppUtils9accelData1xE></span><span id=_CPPv2N10zkAppUtils9accelData1xE></span><span id=zkAppUtils::accelData::x__double></span><span id=structzk_app_utils_1_1accel_data_1ade088cb17d564e9ab8de27df8e529b53 class=target></span><span class=pre>double</span> <code>x</code></p><p><span id=_CPPv3N10zkAppUtils9accelData1yE></span><span id=_CPPv2N10zkAppUtils9accelData1yE></span><span id=zkAppUtils::accelData::y__double></span><span id=structzk_app_utils_1_1accel_data_1a523ccaa6bbe89ac2e2e7ccd6ed56ba92 class=target></span><span class=pre>double</span> <code>y</code></p><p><span id=_CPPv3N10zkAppUtils9accelData1zE></span><span id=_CPPv2N10zkAppUtils9accelData1zE></span><span id=zkAppUtils::accelData::z__double></span><span id=structzk_app_utils_1_1accel_data_1a5080fb3abbdeeac3b6b99bbeab84d2af class=target></span><span class=pre>double</span> <code>z</code></p><p><span id=_CPPv3N10zkAppUtils9accelData7tapDirXE></span><span id=_CPPv2N10zkAppUtils9accelData7tapDirXE></span><span id=zkAppUtils::accelData::tapDirX__i></span><span id=structzk_app_utils_1_1accel_data_1acad0eacf3d403f2b9337223f915e7693 class=target></span><span class=pre>int</span> <code>tapDirX</code></p><p><span id=_CPPv3N10zkAppUtils9accelData7tapDirYE></span><span id=_CPPv2N10zkAppUtils9accelData7tapDirYE></span><span id=zkAppUtils::accelData::tapDirY__i></span><span id=structzk_app_utils_1_1accel_data_1acee9fe0835114a7ee167ebe706dc807e class=target></span><span class=pre>int</span> <code>tapDirY</code></p><p><span id=_CPPv3N10zkAppUtils9accelData7tapDirZE></span><span id=_CPPv2N10zkAppUtils9accelData7tapDirZE></span><span id=zkAppUtils::accelData::tapDirZ__i></span><span id=structzk_app_utils_1_1accel_data_1a411a716f8caae78a98ea4983d796779f class=target></span><span class=pre>int</span> <code>tapDirZ</code></p></div></div><div id=exceptions class=section><h2 id=exceptions>Exceptions<a href=#exceptions class=anchor aria-hidden=true>#</a></h2><p><span id=_CPPv3N10zkAppUtils15commonExceptionE></span><span id=_CPPv2N10zkAppUtils15commonExceptionE></span><span id=zkAppUtils::commonException></span><span id=classzk_app_utils_1_1common_exception class=target></span><em><span class=pre>class</span></em> <code>zkAppUtils ::</code> <code>commonException</code> <span class=pre>:</span> <em><span class=pre>public</span></em> <span class=pre>exception</span><br>Exception class derived from std::exception.</p><div class="breathe-sectiondef docutils container"><p>Public Functions</p><p><span id=_CPPv3N10zkAppUtils15commonException15commonExceptionENSt6stringE></span><span id=_CPPv2N10zkAppUtils15commonException15commonExceptionENSt6stringE></span><span id=zkAppUtils::commonException::commonException__ss></span><span id=classzk_app_utils_1_1common_exception_1a02a5816cccdcd19e719bb288080c0e82 class=target></span><code>commonException</code> <span class=sig-paren>(</span> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <em><span class=pre>status</span></em> <span class=sig-paren>)</span><br>Constructor.</p><p><strong>Parameters</strong></p><ul><li><code>status </code>: A string which described the verbose exception</li></ul><p><span id=_CPPv3N10zkAppUtils15commonExceptionD0Ev></span><span id=_CPPv2N10zkAppUtils15commonExceptionD0Ev></span><span id=zkAppUtils::commonException::~commonException></span><span id=classzk_app_utils_1_1common_exception_1a3c0053dca967e9c898837a8a1f949f28 class=target></span><em><span class=pre>inline</span></em> <em><span class=pre>virtual</span></em> <code>~commonException</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Destructor.</p><p><span id=_CPPv3NK10zkAppUtils15commonException4whatEv></span><span id=_CPPv2NK10zkAppUtils15commonException4whatEv></span><span id=zkAppUtils::commonException::whatC></span><span id=classzk_app_utils_1_1common_exception_1a91506a3f15bd559b94d9239a661390cb class=target></span><em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <code>what</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span> <em><span class=pre>const</span></em><br>Override of std::exception <a href=#classzk_app_utils_1_1common_exception_1a91506a3f15bd559b94d9239a661390cb class="reference internal"><span class="std std-ref">what()</span></a> method.</p></div><p><span id=_CPPv3N10zkAppUtils16timeoutExceptionE></span><span id=_CPPv2N10zkAppUtils16timeoutExceptionE></span><span id=zkAppUtils::timeoutException></span><span id=classzk_app_utils_1_1timeout_exception class=target></span><em><span class=pre>class</span></em> <code>zkAppUtils ::</code> <code>timeoutException</code> <span class=pre>:</span> <em><span class=pre>public</span></em> <span class=pre>exception</span><br>Exception class derived from std::exception.</p><div class="breathe-sectiondef docutils container"><p>Public Functions</p><p><span id=_CPPv3N10zkAppUtils16timeoutException16timeoutExceptionENSt6stringE></span><span id=_CPPv2N10zkAppUtils16timeoutException16timeoutExceptionENSt6stringE></span><span id=zkAppUtils::timeoutException::timeoutException__ss></span><span id=classzk_app_utils_1_1timeout_exception_1aa5da5e052dc4c819ad7294fb0c840d58 class=target></span><code>timeoutException</code> <span class=sig-paren>(</span> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <em><span class=pre>status</span></em> <span class=sig-paren>)</span><br>Constructor.</p><p><strong>Parameters</strong></p><ul><li><code>status </code>: A string which described the verbose exception</li></ul><p><span id=_CPPv3N10zkAppUtils16timeoutExceptionD0Ev></span><span id=_CPPv2N10zkAppUtils16timeoutExceptionD0Ev></span><span id=zkAppUtils::timeoutException::~timeoutException></span><span id=classzk_app_utils_1_1timeout_exception_1abf7d12b6c879936a5e91438133716e31 class=target></span><em><span class=pre>inline</span></em> <em><span class=pre>virtual</span></em> <code>~timeoutException</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Destructor.</p><p><span id=_CPPv3NK10zkAppUtils16timeoutException4whatEv></span><span id=_CPPv2NK10zkAppUtils16timeoutException4whatEv></span><span id=zkAppUtils::timeoutException::whatC></span><span id=classzk_app_utils_1_1timeout_exception_1aa02ea9cf2775e88dd07620569e2a9904 class=target></span><em><span class=pre>const</span></em> <span class=pre>char</span> <span class=pre>*</span> <code>what</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span> <em><span class=pre>const</span></em><br>Override of std::exception <a href=#classzk_app_utils_1_1timeout_exception_1aa02ea9cf2775e88dd07620569e2a9904 class="reference internal"><span class="std std-ref">what()</span></a> method.</p></div></div><div id=classes class=section><h2 id=classes>Classes<a href=#classes class=anchor aria-hidden=true>#</a></h2><p><span id=zkapputils-zkclass class=target></span></p><p><span id=_CPPv3N10zkAppUtils7zkClassE></span><span id=_CPPv2N10zkAppUtils7zkClassE></span><span id=zkAppUtils::zkClass></span><span id=classzk_app_utils_1_1zk_class class=target></span><em><span class=pre>class</span></em> <code>zkAppUtils ::</code> <code>zkClass</code><br>The main class.</p><div class="breathe-sectiondef docutils container"><p>Zymkey Context</p><p><span id=_CPPv3N10zkAppUtils7zkClass7zkClassEv></span><span id=_CPPv2N10zkAppUtils7zkClass7zkClassEv></span><span id=zkAppUtils::zkClass::zkClass></span><span id=classzk_app_utils_1_1zk_class_1af2017a24669f2f1f84743ab8eb1b2e6d class=target></span><code>zkClass</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Constructor: a Zymkey context is opened.</p><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClassD0Ev></span><span id=_CPPv2N10zkAppUtils7zkClassD0Ev></span><span id=zkAppUtils::zkClass::~zkClass></span><span id=classzk_app_utils_1_1zk_class_1a9fd36f5cebc6fc718abd7c63b0e30035 class=target></span><em><span class=pre>virtual</span></em> <code>~zkClass</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Destructor: the Zymkey context is closed.</p></div><div class="breathe-sectiondef docutils container"><p>Random Number Generation</p><p><span id=_CPPv3N10zkAppUtils7zkClass18createRandDataFileERNSt6stringEi></span><span id=_CPPv2N10zkAppUtils7zkClass18createRandDataFileERNSt6stringEi></span><span id=zkAppUtils::zkClass::createRandDataFile__ssR.i></span><span id=classzk_app_utils_1_1zk_class_1a9a4a7c019b82d8b1760ae9f743de944d class=target></span><span class=pre>void</span> <code>createRandDataFile</code> <span class=sig-paren>(</span> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>dst_filename</span></em> , <span class=pre>int</span> <em><span class=pre>rdata_sz</span></em> <span class=sig-paren>)</span><br>Write random data to a file.</p><p><strong>Parameters</strong></p><ul><li><p><code>dst_filename </code>: A string containing the absolute path to the file where random data is written</p></li><li><p><code>rdata_sz </code>: The number of random bytes to generate</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass12getRandBytesEi></span><span id=_CPPv2N10zkAppUtils7zkClass12getRandBytesEi></span><span id=zkAppUtils::zkClass::getRandBytes__i></span><span id=classzk_app_utils_1_1zk_class_1aa15449b33414f6da9074c51b525eca03 class=target></span><a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>*</span> <code>getRandBytes</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>rdata_sz</span></em> <span class=sig-paren>)</span><br>Generate a block of random data.</p><p><strong>Return</strong><br>A pointer to container with the random bytes</p><p><strong>Parameters</strong></p><ul><li><code>rdata_sz </code>: The number of random bytes to generate</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></div><div class="breathe-sectiondef docutils container"><p>Lock Data</p><p><span id=_CPPv3N10zkAppUtils7zkClass8lockDataERKNSt6stringERKNSt6stringEb></span><span id=_CPPv2N10zkAppUtils7zkClass8lockDataERKNSt6stringERKNSt6stringEb></span><span id=zkAppUtils::zkClass::lockData__ssCR.ssCR.b></span><span id=classzk_app_utils_1_1zk_class_1a65aee74e18121f104b8420822013452e class=target></span><span class=pre>void</span> <code>lockData</code> <span class=sig-paren>(</span> <em><span class=pre>const</span></em> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>src_pt_filename</span></em> , <em><span class=pre>const</span></em> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>dst_ct_filename</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=pre>=</span> <span class=pre>false</span> <span class=sig-paren>)</span><br>Locks data from a plaintext source file and stores locked data object to a destination file.</p><p><strong>Parameters</strong></p><ul><li><p><code>src_pt_filename </code>: Absolute path to source plaintext file</p></li><li><p><code>dst_ct_filename </code>: Absolute path to destination file which will contain locked data object</p></li><li><p><code>use_shared_key </code>: Determines whether one-way or shared key is used for locking. Default = false.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass8lockDataERK9byteArrayRKNSt6stringEb></span><span id=_CPPv2N10zkAppUtils7zkClass8lockDataERK9byteArrayRKNSt6stringEb></span><span id=zkAppUtils::zkClass::lockData__byteArrayCR.ssCR.b></span><span id=classzk_app_utils_1_1zk_class_1a12a0b56f2d9957e4f6f66964b1dc88c8 class=target></span><span class=pre>void</span> <code>lockData</code> <span class=sig-paren>(</span> <em><span class=pre>const</span></em> <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>src_pt_data</span></em> , <em><span class=pre>const</span></em> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>dst_ct_filename</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=pre>=</span> <span class=pre>false</span> <span class=sig-paren>)</span><br>Locks data from a plaintext source byte container and stores locked data object to a destination file.</p><p><strong>Parameters</strong></p><ul><li><p><code>src_pt_data </code>: Unsigned byte container which holds source plaintext data</p></li><li><p><code>dst_ct_filename </code>: Absolute path to destination file which will contain locked data object</p></li><li><p><code>use_shared_key </code>: Determines whether one-way or shared key is used for locking. Default = false.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass8lockDataERKNSt6stringEb></span><span id=_CPPv2N10zkAppUtils7zkClass8lockDataERKNSt6stringEb></span><span id=zkAppUtils::zkClass::lockData__ssCR.b></span><span id=classzk_app_utils_1_1zk_class_1ae676bd567545ed2030db7ccffef2b4b7 class=target></span><a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>*</span> <code>lockData</code> <span class=sig-paren>(</span> <em><span class=pre>const</span></em> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>src_pt_filename</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=pre>=</span> <span class=pre>false</span> <span class=sig-paren>)</span><br>Locks data from a plaintext source file and stores locked data object in a container of unsigned bytes.</p><p><strong>Return</strong><br>Byte container with locked data</p><p><strong>Parameters</strong></p><ul><li><p><code>src_pt_filename </code>: Absolute path to source plaintext file</p></li><li><p><code>use_shared_key </code>: Determines whether one-way or shared key is used for locking. Default = false.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass8lockDataERK9byteArrayb></span><span id=_CPPv2N10zkAppUtils7zkClass8lockDataERK9byteArrayb></span><span id=zkAppUtils::zkClass::lockData__byteArrayCR.b></span><span id=classzk_app_utils_1_1zk_class_1a78026efcb7d94cbbf93ae3800241b22d class=target></span><a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>*</span> <code>lockData</code> <span class=sig-paren>(</span> <em><span class=pre>const</span></em> <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>src_pt_data</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=pre>=</span> <span class=pre>false</span> <span class=sig-paren>)</span><br>Locks data from a plaintext source byte container and stores locked data object in a container of unsigned bytes.</p><p><strong>Return</strong><br>Byte container with locked data</p><p><strong>Parameters</strong></p><ul><li><p><code>src_pt_data </code>: Unsigned byte container which holds source plaintext data</p></li><li><p><code>use_shared_key </code>: Determines whether one-way or shared key is used for locking. Default = false.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></div><div class="breathe-sectiondef docutils container"><p>Unlock Data</p><p><span id=_CPPv3N10zkAppUtils7zkClass10unlockDataERKNSt6stringERKNSt6stringEb></span><span id=_CPPv2N10zkAppUtils7zkClass10unlockDataERKNSt6stringERKNSt6stringEb></span><span id=zkAppUtils::zkClass::unlockData__ssCR.ssCR.b></span><span id=classzk_app_utils_1_1zk_class_1a0ecbe6c828556f8f762fb74e628f13af class=target></span><span class=pre>void</span> <code>unlockData</code> <span class=sig-paren>(</span> <em><span class=pre>const</span></em> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>src_ct_filename</span></em> , <em><span class=pre>const</span></em> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>dst_pt_filename</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=pre>=</span> <span class=pre>false</span> <span class=sig-paren>)</span><br>Unocks a locked data object from source file and stores unlocked data object to a destination file.</p><p><strong>Parameters</strong></p><ul><li><p><code>src_ct_filename </code>: Absolute path to source file which contains locked data object</p></li><li><p><code>dst_pt_filename </code>: Absolute path to destination file which will contain unlocked plaintext data</p></li><li><p><code>use_shared_key </code>: Determines whether one-way or shared key is used for locking. Default = false.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass10unlockDataERK9byteArrayRKNSt6stringEb></span><span id=_CPPv2N10zkAppUtils7zkClass10unlockDataERK9byteArrayRKNSt6stringEb></span><span id=zkAppUtils::zkClass::unlockData__byteArrayCR.ssCR.b></span><span id=classzk_app_utils_1_1zk_class_1a40befc1bfc64e6a06e2169c8a102cd2f class=target></span><span class=pre>void</span> <code>unlockData</code> <span class=sig-paren>(</span> <em><span class=pre>const</span></em> <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>src_ct_data</span></em> , <em><span class=pre>const</span></em> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>dst_pt_filename</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=pre>=</span> <span class=pre>false</span> <span class=sig-paren>)</span><br>Unlocks a locked data object contained in an unsigned byte container and stores plaintext data to a destination file.</p><p><strong>Parameters</strong></p><ul><li><p><code>src_ct_data </code>: Unsigned byte container which holds locked data object</p></li><li><p><code>dst_pt_filename </code>: Absolute path to destination file which will contain unlocked plaintext data</p></li><li><p><code>use_shared_key </code>: Determines whether one-way or shared key is used for locking. Default = false.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass10unlockDataERKNSt6stringEb></span><span id=_CPPv2N10zkAppUtils7zkClass10unlockDataERKNSt6stringEb></span><span id=zkAppUtils::zkClass::unlockData__ssCR.b></span><span id=classzk_app_utils_1_1zk_class_1a8b26b3c35b2985ae5f7d8b6b50b5ec1d class=target></span><a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>*</span> <code>unlockData</code> <span class=sig-paren>(</span> <em><span class=pre>const</span></em> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>src_ct_filename</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=pre>=</span> <span class=pre>false</span> <span class=sig-paren>)</span><br>Unlocks a locked data object from a plaintext source file and stores plaintext data in a container of unsigned bytes.</p><p><strong>Return</strong><br>Byte container with plaintext data</p><p><strong>Parameters</strong></p><ul><li><p><code>src_ct_filename </code>: Absolute path to source file which contains locked data object</p></li><li><p><code>use_shared_key </code>: Determines whether one-way or shared key is used for locking. Default = false.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass10unlockDataERK9byteArrayb></span><span id=_CPPv2N10zkAppUtils7zkClass10unlockDataERK9byteArrayb></span><span id=zkAppUtils::zkClass::unlockData__byteArrayCR.b></span><span id=classzk_app_utils_1_1zk_class_1a6527e117b67f19853e40423aa782fd6f class=target></span><a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>*</span> <code>unlockData</code> <span class=sig-paren>(</span> <em><span class=pre>const</span></em> <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>src_ct_bytes</span></em> , <span class=pre>bool</span> <em><span class=pre>use_shared_key</span></em> <span class=pre>=</span> <span class=pre>false</span> <span class=sig-paren>)</span><br>Unlocks a locked data object contained in an unsigned byte container and stores plaintext data in a container of unsigned bytes.</p><p><strong>Return</strong><br>Byte container with plaintext data</p><p><strong>Parameters</strong></p><ul><li><p><code>src_ct_data </code>: Unsigned byte container which holds locked data object</p></li><li><p><code>use_shared_key </code>: Determines whether one-way or shared key is used for locking. Default = false.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></div><div class="breathe-sectiondef docutils container"><p>ECDSA</p><p><span id=_CPPv3N10zkAppUtils7zkClass21genECDSASigFromDigestER9byteArrayi></span><span id=_CPPv2N10zkAppUtils7zkClass21genECDSASigFromDigestER9byteArrayi></span><span id=zkAppUtils::zkClass::genECDSASigFromDigest__byteArrayR.i></span><span id=classzk_app_utils_1_1zk_class_1a14702ae32491257edc3618fe44f65cc8 class=target></span><a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>*</span> <code>genECDSASigFromDigest</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>digest</span></em> , <span class=pre>int</span> <em><span class=pre>slot</span></em> <span class=pre>=</span> <span class=pre>0</span> <span class=sig-paren>)</span><br>Generate a signature from a data digest using the Zymkey’s private key.</p><p><strong>Return</strong><br>Byte container with binary signature</p><p><strong>Parameters</strong></p><ul><li><p><code>digest </code>: Currently, this should be a SHA256 digest</p></li><li><p><code>slot </code>: The key slot to use for verification.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass24verifyECDSASigFromDigestER9byteArrayR9byteArrayib></span><span id=_CPPv2N10zkAppUtils7zkClass24verifyECDSASigFromDigestER9byteArrayR9byteArrayib></span><span id=zkAppUtils::zkClass::verifyECDSASigFromDigest__byteArrayR.byteArrayR.i.b></span><span id=classzk_app_utils_1_1zk_class_1a5046d6ddc2fb67c7c352df859c84089d class=target></span><span class=pre>bool</span> <code>verifyECDSASigFromDigest</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>digest</span></em> , <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>sig</span></em> , <span class=pre>int</span> <em><span class=pre>pub_key_slot</span></em> <span class=pre>=</span> <span class=pre>0</span>, <span class=pre>bool</span> <em><span class=pre>pub_key_is_foreign</span></em> <span class=pre>=</span> <span class=pre>false</span> <span class=sig-paren>)</span><br>Verify a signature from a data digest using the Zymkey’s public key. The public key is not given as an input. Rather, the Zymkey uses its own copy of the private key. This insures that the public key that matches the private key is used.</p><p><strong>Return</strong><br>true = signature verification passed, false = signature verification failed</p><p><strong>Parameters</strong></p><ul><li><p><code>digest </code>: Currently, this should be a SHA256 digest</p></li><li><p><code>sig </code>: The signature to verify</p></li><li><p><code>pub_key_slot </code>: The key slot to use for verification.</p></li><li><p><code>pub_key_is_foreign </code>: If false, the normal key store is referenced. Otherwise, the foreign public key store is referenced.</p></li><li><p><code>pub_key_is_foreign </code>: If false, the normal key store is referenced. Otherwise, the foreign public key store is referenced.</p></li></ul></div><div class="breathe-sectiondef docutils container"><p>ECDH and KDF</p><p><span id=_CPPv3N10zkAppUtils7zkClass9doRawECDHEiR9byteArray></span><span id=_CPPv2N10zkAppUtils7zkClass9doRawECDHEiR9byteArray></span><span id=zkAppUtils::zkClass::doRawECDH__i.byteArrayR></span><span id=classzk_app_utils_1_1zk_class_1a5081a2fa23323039ce2d6b082c55bc1b class=target></span><a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>*</span> <code>doRawECDH</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>slot</span></em> , <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>peer_pubkey</span></em> <span class=sig-paren>)</span><br>Perform a raw ECDH operation. (model >= HSM6)</p><p>Perform an ECDH operation with no Key Derivation Function (KDF). The raw pre-master secret is returned in the response. The peer public key is presented in the call.</p><p><strong>Return</strong><br>Byte container with pre master secret</p><p><strong>Parameters</strong></p><ul><li><p><code>slot </code>: The key slot to use for the local key. If this parameter is -1, the ephemeral key is used.</p></li><li><p><code>peer_pubkey </code>: The peer public key.</p></li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass26doRawECDHWithIntPeerPubkeyEiib></span><span id=_CPPv2N10zkAppUtils7zkClass26doRawECDHWithIntPeerPubkeyEiib></span><span id=zkAppUtils::zkClass::doRawECDHWithIntPeerPubkey__i.i.b></span><span id=classzk_app_utils_1_1zk_class_1ae7f1572cb081e4fb915ed2076fe3a092 class=target></span><a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>*</span> <code>doRawECDHWithIntPeerPubkey</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>slot</span></em> , <span class=pre>int</span> <em><span class=pre>peer_pubkey_slot</span></em> , <span class=pre>bool</span> <em><span class=pre>peer_pubkey_slot_is_foreign</span></em> <span class=sig-paren>)</span><br>Perform a raw ECDH operation. (model >= HSM6)</p><p>Perform an ECDH operation with no Key Derivation Function (KDF). The raw pre-master secret is returned in the response. The peer public key is referenced from the zymkey internal key store.</p><p><strong>Return</strong><br>Byte container with pre master secret</p><p><strong>Parameters</strong></p><ul><li><p><code>slot </code>: The key slot to use for the local key. If this parameter is -1, the ephemeral key is used.</p></li><li><p><code>peer_pubkey_slot </code>: The peer public key slot where the peer public key is to be found.</p></li><li><p><code>peer_pubkey_slot_is_foreign </code>: If true, the peer public key slot is found in the foreign public keyring.</p></li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass12doECDHAndKDFE16ZK_ECDH_KDF_TYPEiR9byteArrayR9byteArrayR9byteArrayii></span><span id=_CPPv2N10zkAppUtils7zkClass12doECDHAndKDFE16ZK_ECDH_KDF_TYPEiR9byteArrayR9byteArrayR9byteArrayii></span><span id=zkAppUtils::zkClass::doECDHAndKDF__ZK_ECDH_KDF_TYPE.i.byteArrayR.byteArrayR.byteArrayR.i.i></span><span id=classzk_app_utils_1_1zk_class_1a16388137bf11d6d38f6fdaee0a87c08a class=target></span><a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>*</span> <code>doECDHAndKDF</code> <span class=sig-paren>(</span> <span class=pre>ZK_ECDH_KDF_TYPE</span> <em><span class=pre>kdf_type</span></em> , <span class=pre>int</span> <em><span class=pre>slot</span></em> , <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>peer_pubkey</span></em> , <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>salt</span></em> , <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>info</span></em> , <span class=pre>int</span> <em><span class=pre>num_iterations</span></em> , <span class=pre>int</span> <em><span class=pre>derived_key_sz</span></em> <span class=sig-paren>)</span><br>Perform an ECDH operation plus Key Derivation Function. (model >= HSM6)</p><p>Perform an ECDH operation with Key Derivation Function (KDF). The derived key is returned in the response. The peer public key is presented in the call.</p><p><strong>Return</strong><br>Byte container with pre master secret.</p><p><strong>Parameters</strong></p><ul><li><p><code>slot </code>: The key slot to use for the local key. If this parameter is -1, the ephemeral key is used.</p></li><li><p><code>peer_pubkey </code>: The peer public key.</p></li><li><p><code>salt </code>: The salt to use for the selected KDF.</p></li><li><p><code>info </code>: The info field to use for RFC 5869. Ignored for PBKDF2.</p></li><li><p><code>num_iterations </code>: Number of iterations to carry out (PBKDF only)</p></li><li><p><code>derived_key_sz </code>: The desired number of bytes to return for the KDF. For RFC 5869, this value must be less than 8160 bytes (SHA256) or 16320 (SHA512).</p></li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass29doECDHAndKDFWithIntPeerPubkeyE16ZK_ECDH_KDF_TYPEiibR9byteArrayR9byteArrayii></span><span id=_CPPv2N10zkAppUtils7zkClass29doECDHAndKDFWithIntPeerPubkeyE16ZK_ECDH_KDF_TYPEiibR9byteArrayR9byteArrayii></span><span id=zkAppUtils::zkClass::doECDHAndKDFWithIntPeerPubkey__ZK_ECDH_KDF_TYPE.i.i.b.byteArrayR.byteArrayR.i.i></span><span id=classzk_app_utils_1_1zk_class_1af719207421b038378dc30f07611b3e6b class=target></span><a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>*</span> <code>doECDHAndKDFWithIntPeerPubkey</code> <span class=sig-paren>(</span> <span class=pre>ZK_ECDH_KDF_TYPE</span> <em><span class=pre>kdf_type</span></em> , <span class=pre>int</span> <em><span class=pre>slot</span></em> , <span class=pre>int</span> <em><span class=pre>peer_pubkey_slot</span></em> , <span class=pre>bool</span> <em><span class=pre>peer_pubkey_slot_is_foreign</span></em> , <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>salt</span></em> , <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>info</span></em> , <span class=pre>int</span> <em><span class=pre>num_iterations</span></em> , <span class=pre>int</span> <em><span class=pre>derived_key_sz</span></em> <span class=sig-paren>)</span><br>Perform an ECDH operation plus Key Derivation Function. (model >= HSM6)</p><p>Perform an ECDH operation with Key Derivation Function (KDF). The derived key is returned in the response. The peer public key is referenced from the zymkey internal key store.</p><p><strong>Return</strong><br>Byte container with pre master secret.</p><p><strong>Parameters</strong></p><ul><li><p><code>slot </code>: The key slot to use for the local key. If this parameter is -1, the ephemeral key is used.</p></li><li><p><code>peer_pubkey_slot </code>: The peer public key slot where the peer public key is to be found.</p></li><li><p><code>peer_pubkey_slot_is_foreign </code>: If true, the peer public key slot is found in the foreign public keyring.</p></li><li><p><code>salt </code>: The salt to use for the selected KDF.</p></li><li><p><code>info </code>: The info field to use for RFC 5869. Ignored for PBKDF2.</p></li><li><p><code>num_iterations </code>: Number of iterations to carry out (PBKDF only)</p></li><li><p><code>derived_key_sz </code>: The desired number of bytes to return for the KDF. For RFC 5869, this value must be less than 8160 bytes (SHA256) or 16320 (SHA512).</p></li></ul></div><div class="breathe-sectiondef docutils container"><p>Key Management</p><p><span id=_CPPv3N10zkAppUtils7zkClass20saveECDSAPubKey2FileENSt6stringEi></span><span id=_CPPv2N10zkAppUtils7zkClass20saveECDSAPubKey2FileENSt6stringEi></span><span id=zkAppUtils::zkClass::saveECDSAPubKey2File__ss.i></span><span id=classzk_app_utils_1_1zk_class_1a90e0ace2d84e42b6ccdaad122f9035c8 class=target></span><span class=pre>void</span> <code>saveECDSAPubKey2File</code> <span class=sig-paren>(</span> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <em><span class=pre>dst_filename</span></em> , <span class=pre>int</span> <em><span class=pre>slot</span></em> <span class=pre>=</span> <span class=pre>0</span> <span class=sig-paren>)</span><br>[DEPRECATED] Use exportPubKey2File. Save the public key that matches the Zymkey’s private key into a PEM formatted file. Mainly used for Certificate Signing Request (CSR) generation.</p><p><strong>Parameters</strong></p><ul><li><p><code>dst_filename </code>: Absolute location where the PEM formatted file is to be stored</p></li><li><p><code>slot </code>: Reserved for future use</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass17exportPubKey2FileENSt6stringEib></span><span id=_CPPv2N10zkAppUtils7zkClass17exportPubKey2FileENSt6stringEib></span><span id=zkAppUtils::zkClass::exportPubKey2File__ss.i.b></span><span id=classzk_app_utils_1_1zk_class_1a1bdc2d2f9d479a28af6de6cd7889020b class=target></span><span class=pre>void</span> <code>exportPubKey2File</code> <span class=sig-paren>(</span> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <em><span class=pre>dst_filename</span></em> , <span class=pre>int</span> <em><span class=pre>pubkey_slot</span></em> <span class=pre>=</span> <span class=pre>0</span>, <span class=pre>bool</span> <em><span class=pre>slot_is_foreign</span></em> <span class=pre>=</span> <span class=pre>false</span> <span class=sig-paren>)</span><br>Store the public key to a host file in PEM format.</p><p>This function is useful for generating Certificate Signing Requests (CSR).</p><p><strong>Parameters</strong></p><ul><li><p><code>dst_filename </code>: Filename where PEM formatted public key is to be stored.</p></li><li><p><code>pubkey_slot </code>: The key slot to retrieve. Zymkey and HSM4 have slots 0, 1, and 2.</p></li><li><p><code>slot_is_foreign </code>: If true, designates the pubkey slot to come from the foreign keystore. (model >= HSM6)</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass14getECDSAPubKeyEi></span><span id=_CPPv2N10zkAppUtils7zkClass14getECDSAPubKeyEi></span><span id=zkAppUtils::zkClass::getECDSAPubKey__i></span><span id=classzk_app_utils_1_1zk_class_1ae5f9669f44c14e15c795b313f6ae5a08 class=target></span><a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>*</span> <code>getECDSAPubKey</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>slot</span></em> <span class=pre>=</span> <span class=pre>0</span> <span class=sig-paren>)</span><br>[DEPRECATED] Use exportPubKey. Get a container of bytes which contains the ECDSA public key</p><p><strong>Return</strong><br>Byte container with binary public key</p><p><strong>Parameters</strong></p><ul><li><code>slot </code>: Reserved for future use.</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass12exportPubKeyEib></span><span id=_CPPv2N10zkAppUtils7zkClass12exportPubKeyEib></span><span id=zkAppUtils::zkClass::exportPubKey__i.b></span><span id=classzk_app_utils_1_1zk_class_1a6bb9ac93c1aac45a45f7e58002e9dcd7 class=target></span><a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>*</span> <code>exportPubKey</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>pubkey_slot</span></em> <span class=pre>=</span> <span class=pre>0</span>, <span class=pre>bool</span> <em><span class=pre>slot_is_foreign</span></em> <span class=pre>=</span> <span class=pre>0</span> <span class=sig-paren>)</span><br>Gets the public key and stores in a byte array created by this function.</p><p><strong>Parameters</strong></p><ul><li><p><code>pubkey_slot </code>: The key slot to retrieve. Zymkey and HSM4 have slots 0, 1, and 2.</p></li><li><p><code>slot_is_foreign </code>: If true, designates the pubkey slot to come from the foreign keystore. (model >= HSM6)</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass17getAllocSlotsListEb></span><span id=_CPPv2N10zkAppUtils7zkClass17getAllocSlotsListEb></span><span id=zkAppUtils::zkClass::getAllocSlotsList__b></span><span id=classzk_app_utils_1_1zk_class_1a636729b4700e21c3392bd75aac2d8873 class=target></span><a href=index.html#_CPPv4N10zkAppUtils8intArrayE class="reference internal" title=zkAppUtils::intArray><span class=pre>intArray</span></a> <span class=pre>*</span> <code>getAllocSlotsList</code> <span class=sig-paren>(</span> <span class=pre>bool</span> <em><span class=pre>foreign_key_pool</span></em> <span class=sig-paren>)</span><br>Get the list of allocated keys. (model >= HSM6)</p><p>This function returns a list of all allocated key slots.</p><p><strong>Return</strong><br>Array of the allocated keys.</p><p><strong>Parameters</strong></p><ul><li><code>foreign_key_pool </code>: (input) if true, retrieve allocation list of the foreign keys</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass18storeForeignPubKeyE14ZK_EC_KEY_TYPER9byteArray></span><span id=_CPPv2N10zkAppUtils7zkClass18storeForeignPubKeyE14ZK_EC_KEY_TYPER9byteArray></span><span id=zkAppUtils::zkClass::storeForeignPubKey__ZK_EC_KEY_TYPE.byteArrayR></span><span id=classzk_app_utils_1_1zk_class_1aa95d4e59e180197bf8e847b4d52d5001 class=target></span><span class=pre>int</span> <code>storeForeignPubKey</code> <span class=sig-paren>(</span> <span class=pre>ZK_EC_KEY_TYPE</span> <em><span class=pre>pk_type</span></em> , <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>pk</span></em> <span class=sig-paren>)</span><br>Store a new foreign public key in Zymkey. (model >= HSM6)</p><p>This function stores a new foreign public key in the Zymkey public key ring. This public key can be used for signature verification in use cases where it is desirable to hide the public key.</p><p><strong>Return</strong><br>Allocated slot number in foreign key store, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>pk_type </code>: The type of the public key. {ZK_NISTP256, ZK_SECP256R1 = ZK_NISTP256, ZK_SECP256K1}</p></li><li><p><code>pk </code>: Public key to store.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass19disablePubKeyExportEib></span><span id=_CPPv2N10zkAppUtils7zkClass19disablePubKeyExportEib></span><span id=zkAppUtils::zkClass::disablePubKeyExport__i.b></span><span id=classzk_app_utils_1_1zk_class_1ab730469e9e5ffb217455a775960732d1 class=target></span><span class=pre>void</span> <code>disablePubKeyExport</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>pubkey_slot</span></em> , <span class=pre>bool</span> <em><span class=pre>slot_is_foreign</span></em> <span class=pre>=</span> <span class=pre>false</span> <span class=sig-paren>)</span><br>Prevent a public key from being exported to the host. (model >= HSM6)</p><p>This function prevents the public key at the specified slot from being exported to the host using the API zkExportPubKey.</p><p><strong>Parameters</strong></p><ul><li><p><code>pubkey_slot </code>: The key slot to disable pubkey export on.</p></li><li><p><code>slot_is_foreign </code>: The slot parameter refers to a slot in the foreign keyring.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass10genKeyPairE14ZK_EC_KEY_TYPE></span><span id=_CPPv2N10zkAppUtils7zkClass10genKeyPairE14ZK_EC_KEY_TYPE></span><span id=zkAppUtils::zkClass::genKeyPair__ZK_EC_KEY_TYPE></span><span id=classzk_app_utils_1_1zk_class_1afa4595edba19c2c98109763898dbfc9a class=target></span><span class=pre>int</span> <code>genKeyPair</code> <span class=sig-paren>(</span> <span class=pre>ZK_EC_KEY_TYPE</span> <em><span class=pre>type</span></em> <span class=sig-paren>)</span><br>Generate a new persistent key pair. (model >= HSM6)</p><p>This function generates a new key pair of the specified type and store it persistently. This key pair cannot be used as part of the zymkey’s digital wallet operations.</p><p><strong>Return</strong><br>Allocated slot number if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>type </code>: The type of key to generate (ZK_EC_KEY_TYPE). {ZK_NISTP256, ZK_SECP256R1 = ZK_NISTP256, ZK_SECP256K1}</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass19genEphemeralKeyPairE14ZK_EC_KEY_TYPE></span><span id=_CPPv2N10zkAppUtils7zkClass19genEphemeralKeyPairE14ZK_EC_KEY_TYPE></span><span id=zkAppUtils::zkClass::genEphemeralKeyPair__ZK_EC_KEY_TYPE></span><span id=classzk_app_utils_1_1zk_class_1ada05198c035f694fda303a8b7e30b4b5 class=target></span><span class=pre>void</span> <code>genEphemeralKeyPair</code> <span class=sig-paren>(</span> <span class=pre>ZK_EC_KEY_TYPE</span> <em><span class=pre>type</span></em> <span class=sig-paren>)</span><br>Generate an ephemeral key pair. (model >= HSM6)</p><p>This function generates an ephemeral key pair of the specified type. Ephemeral key pairs are useful when performing ECDH for time-of-flight encryption. Only one ephemeral key slot is available and is not persistent between reboots.</p><p><strong>Parameters</strong></p><ul><li><code>type </code>: The type of key to generate (ZK_EC_KEY_TYPE). {ZK_NISTP256, ZK_SECP256R1 = ZK_NISTP256, ZK_SECP256K1}</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass9removeKeyEib></span><span id=_CPPv2N10zkAppUtils7zkClass9removeKeyEib></span><span id=zkAppUtils::zkClass::removeKey__i.b></span><span id=classzk_app_utils_1_1zk_class_1a62f486dc7c3502fd49c43f628a48fd62 class=target></span><span class=pre>void</span> <code>removeKey</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>slot</span></em> , <span class=pre>bool</span> <em><span class=pre>slot_is_foreign</span></em> <span class=pre>=</span> <span class=pre>false</span> <span class=sig-paren>)</span><br>Remove a key pair or a foreign public key. (model >= HSM6)</p><p>This function deletes a key pair or a foreign public key from persistent storage.</p><p><strong>Parameters</strong></p><ul><li><p><code>slot </code>: The slot</p></li><li><p><code>slot_is_foreign </code>: The slot parameter refers to a slot in the foreign keyring.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass22invalidateEphemeralKeyEv></span><span id=_CPPv2N10zkAppUtils7zkClass22invalidateEphemeralKeyEv></span><span id=zkAppUtils::zkClass::invalidateEphemeralKey></span><span id=classzk_app_utils_1_1zk_class_1a2b2d25ba5fa9e7ddd56e293aeac069c6 class=target></span><span class=pre>void</span> <code>invalidateEphemeralKey</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Invalidate the ephemeral key. (model >= HSM6)</p><p>This function invalidates the ephemeral key.</p><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></div><div class="breathe-sectiondef docutils container"><p>Digital Wallet (BIP32/39/44)</p><p><span id=_CPPv3N10zkAppUtils7zkClass24genBIP32WalletMasterSeedE14ZK_EC_KEY_TYPERNSt6stringER9byteArray></span><span id=_CPPv2N10zkAppUtils7zkClass24genBIP32WalletMasterSeedE14ZK_EC_KEY_TYPERNSt6stringER9byteArray></span><span id=zkAppUtils::zkClass::genBIP32WalletMasterSeed__ZK_EC_KEY_TYPE.ssR.byteArrayR></span><span id=classzk_app_utils_1_1zk_class_1a0444ee1fc1bf9ca89dfe6dc2584d4d22 class=target></span><span class=pre>int</span> <code>genBIP32WalletMasterSeed</code> <span class=sig-paren>(</span> <span class=pre>ZK_EC_KEY_TYPE</span> <em><span class=pre>type</span></em> , <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>wallet_name</span></em> , <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>master_generator_key</span></em> <span class=sig-paren>)</span><br>Generate a BIP32 master seed to start a new blockchain wallet. (model >= HSM6)</p><p>This function generates a new blockchain master seed for creating a new wallet per BIP32.</p><p><strong>Return</strong><br>Allocated slot number if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>type </code>: The type of key to generate (ZK_EC_KEY_TYPE). {ZK_NISTP256, ZK_SECP256R1 = ZK_NISTP256, ZK_SECP256K1}</p></li><li><p><code>wallet_name </code>: An ASCII string which contains the name of the wallet.</p></li><li><p><code>master_generator_key </code>: The master generator key used to help generate the master seed.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass24genBIP39WalletMasterSeedE14ZK_EC_KEY_TYPERNSt6stringER9byteArrayPi></span><span id=_CPPv2N10zkAppUtils7zkClass24genBIP39WalletMasterSeedE14ZK_EC_KEY_TYPERNSt6stringER9byteArrayPi></span><span id=zkAppUtils::zkClass::genBIP39WalletMasterSeed__ZK_EC_KEY_TYPE.ssR.byteArrayR.iP></span><span id=classzk_app_utils_1_1zk_class_1a6db3f774b7220c58977d47fb27d5b98e class=target></span><span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>*</span> <code>genBIP39WalletMasterSeed</code> <span class=sig-paren>(</span> <span class=pre>ZK_EC_KEY_TYPE</span> <em><span class=pre>type</span></em> , <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>wallet_name</span></em> , <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>master_generator_key</span></em> , <span class=pre>int</span> <span class=pre>*</span> <em><span class=pre>slot_num</span></em> <span class=sig-paren>)</span><br>Generate a BIP39 master seed to start a new blockchain wallet. (model >= HSM6)</p><p>This function generates a new blockchain master seed for creating a new wallet per BIP39.</p><p><strong>Return</strong><br>A pointer to the bip39 mnemonic sentence.The string is null terminated and encoded in UTF-8 NFKD from the BIP39 Enlish dictionary.</p><p><strong>Parameters</strong></p><ul><li><p><code>type </code>: The type of key to generate (ZK_EC_KEY_TYPE). {ZK_NISTP256, ZK_SECP256R1 = ZK_NISTP256, ZK_SECP256K1}</p></li><li><p><code>wallet_name </code>: An ASCII string which contains the name of the wallet.</p></li><li><p><code>master_generator_key </code>: The master generator key used to help generate the master seed.</p></li><li><p><code>(output) </code>: Allocated slot number if successful.</p></li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass17genWalletChildKeyEi8uint32_tb></span><span id=_CPPv2N10zkAppUtils7zkClass17genWalletChildKeyEi8uint32_tb></span><span id=zkAppUtils::zkClass::genWalletChildKey__i.uint32_t.b></span><span id=classzk_app_utils_1_1zk_class_1a908e3ce1eb468f08d48d542d0b27145e class=target></span><span class=pre>int</span> <code>genWalletChildKey</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>parent_key_slot</span></em> , <span class=pre>uint32_t</span> <em><span class=pre>index</span></em> , <span class=pre>bool</span> <em><span class=pre>is_hardened</span></em> <span class=sig-paren>)</span><br>Generate child key from a parent key in a blockchain wallet . (model >= HSM6)</p><p>This function generates a new child key descendent from a specified parent key in a wallet.</p><p><strong>Return</strong><br>Allocated slot number if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>parent_key_slot </code>: The parent key slot to base the child key derivation on.</p></li><li><p><code>index </code>: The index of the child seed. This determines the node address as well as the outcome of the key generation.</p></li><li><p><code>is_hardened </code>: If true, a hardened key is generated.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass40restoreWalletMasterSeedFromBIP39MnemonicE14ZK_EC_KEY_TYPERNSt6stringER9byteArrayRNSt6stringE></span><span id=_CPPv2N10zkAppUtils7zkClass40restoreWalletMasterSeedFromBIP39MnemonicE14ZK_EC_KEY_TYPERNSt6stringER9byteArrayRNSt6stringE></span><span id=zkAppUtils::zkClass::restoreWalletMasterSeedFromBIP39Mnemonic__ZK_EC_KEY_TYPE.ssR.byteArrayR.ssR></span><span id=classzk_app_utils_1_1zk_class_1afd1180d3d857b3f4adb11201c72af7fb class=target></span><span class=pre>int</span> <code>restoreWalletMasterSeedFromBIP39Mnemonic</code> <span class=sig-paren>(</span> <span class=pre>ZK_EC_KEY_TYPE</span> <em><span class=pre>type</span></em> , <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>wallet_name</span></em> , <a href=index.html#_CPPv4N10zkAppUtils9byteArrayE class="reference internal" title=zkAppUtils::byteArray><span class=pre>byteArray</span></a> <span class=pre>&</span> <em><span class=pre>master_generator_key</span></em> , <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>bip39_mnemonic</span></em> <span class=sig-paren>)</span><br>Restore a master seed from a BIP39 mnemonic and a master generator key. (model >= HSM6)</p><p>This function restores a wallet master seed from a supplied BIP39 mnemonic string and a master generator key.</p><p><strong>Return</strong><br>Allocated slot number if successful, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><p><code>type </code>: The type of key to generate (ZK_KEY_TYPE). {ZK_NISTP256, ZK_SECP256R1 = ZK_NISTP256, ZK_SECP256K1}</p></li><li><p><code>wallet_name </code>: An ASCII string which contains the name of the wallet.</p></li><li><p><code>master_generator_key </code>: The master generator key used to help generate the master seed.</p></li><li><p><code>bip39_mnemonic </code>: The bip39_mnemonic string, null terminated and UTF-8 NFKD encoded from the BIP39 English dictionary.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass28getWalletNodeAddrFromKeySlotEiPNSt6stringEPNSt6stringE></span><span id=_CPPv2N10zkAppUtils7zkClass28getWalletNodeAddrFromKeySlotEiPNSt6stringEPNSt6stringE></span><span id=zkAppUtils::zkClass::getWalletNodeAddrFromKeySlot__i.ssP.ssP></span><span id=classzk_app_utils_1_1zk_class_1a62bc7fcc98b1b71507a959451322fc31 class=target></span><span class=pre>int</span> <code>getWalletNodeAddrFromKeySlot</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>slot</span></em> , <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>*</span> <em><span class=pre>out_node_addr</span></em> , <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>*</span> <em><span class=pre>out_wallet_name</span></em> <span class=pre>=</span> <span class=pre>NULL</span> <span class=sig-paren>)</span><br>Derive the node address from a key slot number. (model >= HSM6)</p><p>This function derives a node address from an input key slot number.</p><p><strong>Return</strong><br>The master seed key slot.</p><p><strong>Parameters</strong></p><ul><li><p><code>slot </code>: (input) A key slot number that is part of a digital wallet.</p></li><li><p><code>out_node_addr </code>: (output) A pointer to a string which will contain the node address in ASCII.</p></li><li><p><code>wallet_name </code>: (output) A pointer to a string which will contain the wallet name in ASCII. If NULL, this parameter will not be retrieved.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass28getWalletKeySlotFromNodeAddrERNSt6stringERNSt6stringEi></span><span id=_CPPv2N10zkAppUtils7zkClass28getWalletKeySlotFromNodeAddrERNSt6stringERNSt6stringEi></span><span id=zkAppUtils::zkClass::getWalletKeySlotFromNodeAddr__ssR.ssR.i></span><span id=classzk_app_utils_1_1zk_class_1af955d4038166b61c98da8d6a03796f1c class=target></span><span class=pre>int</span> <code>getWalletKeySlotFromNodeAddr</code> <span class=sig-paren>(</span> <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>node_addr</span></em> , <span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>&</span> <em><span class=pre>wallet_name</span></em> , <span class=pre>int</span> <em><span class=pre>master_seed_slot</span></em> <span class=sig-paren>)</span><br>Derive the slot address from a node address. (model >= HSM6)</p><p>This function returns the slot number associated with a given node address.</p><p><strong>Return</strong><br>The associated key slot.</p><p><strong>Parameters</strong></p><ul><li><p><code>node_addr </code>: (input) A pointer which contains the node address in ASCII.</p></li><li><p><code>wallet_name </code>: (input) A pointer which contains the wallet name in ASCII, used to identify the wallet identity. If desired, this parameter can be NULL and the master_seed_slot parameter can be specified instead.</p></li><li><p><code>master_seed_slot </code>: (input) The master seed slot. Can be used to specify the wallet identity instead of the wallet name.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></div><div class="breathe-sectiondef docutils container"><p>LED Control</p><p><span id=_CPPv3N10zkAppUtils7zkClass6ledOffEv></span><span id=_CPPv2N10zkAppUtils7zkClass6ledOffEv></span><span id=zkAppUtils::zkClass::ledOff></span><span id=classzk_app_utils_1_1zk_class_1a0071ea33df7fcddd04d53c1314d535c3 class=target></span><span class=pre>void</span> <code>ledOff</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Turn LED off.</p><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass5ledOnEv></span><span id=_CPPv2N10zkAppUtils7zkClass5ledOnEv></span><span id=zkAppUtils::zkClass::ledOn></span><span id=classzk_app_utils_1_1zk_class_1a8531fbc0c9c218131d8e583d5275c8c9 class=target></span><span class=pre>void</span> <code>ledOn</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Turn LED on.</p><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass8ledFlashE8uint32_t8uint32_t8uint32_t></span><span id=_CPPv2N10zkAppUtils7zkClass8ledFlashE8uint32_t8uint32_t8uint32_t></span><span id=zkAppUtils::zkClass::ledFlash__uint32_t.uint32_t.uint32_t></span><span id=classzk_app_utils_1_1zk_class_1a40f09d223beda138c8cb94fb6104caca class=target></span><span class=pre>void</span> <code>ledFlash</code> <span class=sig-paren>(</span> <span class=pre>uint32_t</span> <em><span class=pre>on_ms</span></em> , <span class=pre>uint32_t</span> <em><span class=pre>off_ms</span></em> <span class=pre>=</span> <span class=pre>0</span>, <span class=pre>uint32_t</span> <em><span class=pre>num_flashes</span></em> <span class=pre>=</span> <span class=pre>0</span> <span class=sig-paren>)</span><br>Flash LED a certain number of times.</p><p><strong>Parameters</strong></p><ul><li><p><code>on_ms </code>: Number of milliseconds that the LED will be on during a flash cycle</p></li><li><p><code>off_ms </code>: Number of milliseconds that the LED will be off during a flash cycle</p></li><li><p><code>num_flashes </code>: Number of flash cycles to execute. 0 = infinite.</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></div><div class="breathe-sectiondef docutils container"><p>Administrative</p><p><span id=_CPPv3N10zkAppUtils7zkClass10setI2CAddrEi></span><span id=_CPPv2N10zkAppUtils7zkClass10setI2CAddrEi></span><span id=zkAppUtils::zkClass::setI2CAddr__i></span><span id=classzk_app_utils_1_1zk_class_1acd808f1709fcc0a8cdda9de14763ff1b class=target></span><span class=pre>void</span> <code>setI2CAddr</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>addr</span></em> <span class=sig-paren>)</span><br>Sets the i2c address (i2c versions only). Used in case of i2c bus device address conflict.</p><p><strong>Parameters</strong></p><ul><li><code>addr </code>: The i2c address to set. Upon successful change, the Zymkey will reset itself. However, if the address is the same as the current setting, the Zymkey will not reset. Valid address ranges are 0x30 - 0x37 and 0x60 - 0x67.</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></div><div class="breathe-sectiondef docutils container"><p>Time</p><p><span id=_CPPv3N10zkAppUtils7zkClass7getTimeEb></span><span id=_CPPv2N10zkAppUtils7zkClass7getTimeEb></span><span id=zkAppUtils::zkClass::getTime__b></span><span id=classzk_app_utils_1_1zk_class_1ac31d4badb6328045e8cab672e3394018 class=target></span><span class=pre>uint32_t</span> <code>getTime</code> <span class=sig-paren>(</span> <span class=pre>bool</span> <em><span class=pre>precise_time</span></em> <span class=pre>=</span> <span class=pre>false</span> <span class=sig-paren>)</span><br>Get current GMT time.</p><p>This method is called to get the time directly from a Zymkey’s Real Time Clock (RTC)</p><p><strong>Return</strong><br>The time in seconds from the epoch (Jan. 1, 1970).</p><p><strong>Parameters</strong></p><ul><li><code>precise_time </code>: (input) If true, this API returns the time after the next second falls. This means that the caller could be blocked up to one second. If false, the API returns immediately with the current time reading.</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></div><div class="breathe-sectiondef docutils container"><p>Accelerometer</p><p><span id=_CPPv3N10zkAppUtils7zkClass17setTapSensitivityEf18ZK_ACCEL_AXIS_TYPE></span><span id=_CPPv2N10zkAppUtils7zkClass17setTapSensitivityEf18ZK_ACCEL_AXIS_TYPE></span><span id=zkAppUtils::zkClass::setTapSensitivity__float.ZK_ACCEL_AXIS_TYPE></span><span id=classzk_app_utils_1_1zk_class_1ac9d8a6cc388eaf2b37099929da776a59 class=target></span><span class=pre>void</span> <code>setTapSensitivity</code> <span class=sig-paren>(</span> <span class=pre>float</span> <em><span class=pre>pct</span></em> , <span class=pre>ZK_ACCEL_AXIS_TYPE</span> <em><span class=pre>axis</span></em> <span class=pre>=</span> <span class=pre>ZK_ACCEL_AXIS_ALL</span> <span class=sig-paren>)</span><br>Sets the sensitivity of the tap detection as a percentage for an individual axis or all axes.</p><p><strong>Parameters</strong></p><ul><li><p><code>pct </code>: Sensitivity expressed in percentage. 0% = off, 100% = maximum.</p></li><li><p><code>axis </code>: X, Y, Z or all (default).</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass10waitForTapE8uint32_t></span><span id=_CPPv2N10zkAppUtils7zkClass10waitForTapE8uint32_t></span><span id=zkAppUtils::zkClass::waitForTap__uint32_t></span><span id=classzk_app_utils_1_1zk_class_1ab00515782c453df5103905b5058fc21f class=target></span><span class=pre>void</span> <code>waitForTap</code> <span class=sig-paren>(</span> <span class=pre>uint32_t</span> <em><span class=pre>timeout_ms</span></em> <span class=sig-paren>)</span><br>Wait for a tap event to be detected.</p><p>This function is called in order to wait for a tap event to occur. This function blocks the calling thread unless called with a timeout of zero.</p><p><strong>Parameters</strong></p><ul><li><code>timeout_ms </code>: (input) The maximum amount of time in milliseconds to wait for a tap event to arrive.</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsTimeoutException </code>: upon timeout or zkAppUtilsException upon other errors</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass20getAccelerometerDataER9accelData></span><span id=_CPPv2N10zkAppUtils7zkClass20getAccelerometerDataER9accelData></span><span id=zkAppUtils::zkClass::getAccelerometerData__accelDataR></span><span id=classzk_app_utils_1_1zk_class_1ae9c5c2c67b60cea02fd13e5f545158a6 class=target></span><span class=pre>void</span> <code>getAccelerometerData</code> <span class=sig-paren>(</span> <a href=index.html#_CPPv4N10zkAppUtils9accelDataE class="reference internal" title=zkAppUtils::accelData><span class=pre>accelData</span></a> <span class=pre>&</span> <em><span class=pre>accel_data</span></em> <span class=sig-paren>)</span><br>Get current accelerometer data and tap info.</p><p>This function gets the most recent accelerometer data in units of g forces plus the tap direction per axis. Array index 0 = x 1 = y 2 = z</p><p><strong>Parameters</strong></p><ul><li><code>accel_data </code>: (output) The current accelerometer data and tap information</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></div><div class="breathe-sectiondef docutils container"><p>Binding Management</p><p><span id=_CPPv3N10zkAppUtils7zkClass11lockBindingEv></span><span id=_CPPv2N10zkAppUtils7zkClass11lockBindingEv></span><span id=zkAppUtils::zkClass::lockBinding></span><span id=classzk_app_utils_1_1zk_class_1a88a59ed6eca3f5bd83895d2fabac0000 class=target></span><span class=pre>void</span> <code>lockBinding</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Set soft binding lock.</p><p>This function locks the binding for a specific HSM. This API is only valid for HSM series products.</p><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass21getCurrentBindingInfoERbRb></span><span id=_CPPv2N10zkAppUtils7zkClass21getCurrentBindingInfoERbRb></span><span id=zkAppUtils::zkClass::getCurrentBindingInfo__bR.bR></span><span id=classzk_app_utils_1_1zk_class_1a984102f5f0bfdd298db1fb67b1e2111e class=target></span><span class=pre>void</span> <code>getCurrentBindingInfo</code> <span class=sig-paren>(</span> <span class=pre>bool</span> <span class=pre>&</span> <em><span class=pre>binding_is_locked</span></em> , <span class=pre>bool</span> <span class=pre>&</span> <em><span class=pre>is_bound</span></em> <span class=sig-paren>)</span><br>Get current binding info.</p><p>This function gets the current binding lock state as well as the current binding state. This API is only valid for devices in the HSM family.</p><p><strong>Parameters</strong></p><ul><li><code>binding_is_locked </code>: (output) Binary value which expresses the current binding lock state. is_bound (output) Binary value which expresses the current bind state.</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></div><div class="breathe-sectiondef docutils container"><p>Perimeter Detect</p><p><span id=_CPPv3N10zkAppUtils7zkClass23setPerimeterEventActionEi8uint32_t></span><span id=_CPPv2N10zkAppUtils7zkClass23setPerimeterEventActionEi8uint32_t></span><span id=zkAppUtils::zkClass::setPerimeterEventAction__i.uint32_t></span><span id=classzk_app_utils_1_1zk_class_1a2bf03172ebb08f4b8aef9d2541545cdf class=target></span><span class=pre>void</span> <code>setPerimeterEventAction</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>channel</span></em> , <span class=pre>uint32_t</span> <em><span class=pre>action_flags</span></em> <span class=sig-paren>)</span><br>Set perimeter breach action.</p><p>This function specifies the action to take when a perimeter breach event occurs. The possible actions are any combination of:</p><ul><li><p>Notify host</p></li><li><p>Zymkey self-destruct</p><p><strong>Parameters</strong></p><ul><li><p><code>channel </code>: (input) The channel (0 or 1) that the action flags will be applied to.</p></li><li><p><code>action_flags </code>: (input) The actions to apply to the perimeter event channel:</p><ul><li><p>Notify (ZK_PERIMETER_EVENT_ACTION_NOTIFY)</p></li><li><p>Self-destruct (ZK_PERIMETER_EVENT_ACTION_SELF_DESTRUCT)</p></li></ul></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass33setDigitalPerimeterDetectLPPeriodEi></span><span id=_CPPv2N10zkAppUtils7zkClass33setDigitalPerimeterDetectLPPeriodEi></span><span id=zkAppUtils::zkClass::setDigitalPerimeterDetectLPPeriod__i></span><span id=classzk_app_utils_1_1zk_class_1a435c6ceebccb97bcaf8316a853b0f220 class=target></span><span class=pre>void</span> <code>setDigitalPerimeterDetectLPPeriod</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>lp_period</span></em> <span class=sig-paren>)</span><br>Set the low power period (model >= HSM6).</p><p>This function sets low power period on the digital perimeter detect</p><p><strong>Return</strong><br>void.</p><p><strong>Parameters</strong></p><ul><li><code>lp_period </code>: (input) low power period in microseconds</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass34setDigitalPerimeterDetectLPMaxBitsEi></span><span id=_CPPv2N10zkAppUtils7zkClass34setDigitalPerimeterDetectLPMaxBitsEi></span><span id=zkAppUtils::zkClass::setDigitalPerimeterDetectLPMaxBits__i></span><span id=classzk_app_utils_1_1zk_class_1aa78c0fb85fefdf67ba5292024718bdcf class=target></span><span class=pre>void</span> <code>setDigitalPerimeterDetectLPMaxBits</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>max_num_bits</span></em> <span class=sig-paren>)</span><br>Set the low power max number of bits (model >= HSM6).</p><p>This function sets low power max number of bits on the digital perimeter detect</p><p><strong>Return</strong><br>void.</p><p><strong>Parameters</strong></p><ul><li><code>max_num_bits </code>: (input) max number of bits</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass31setDigitalPerimeterDetectDelaysEii></span><span id=_CPPv2N10zkAppUtils7zkClass31setDigitalPerimeterDetectDelaysEii></span><span id=zkAppUtils::zkClass::setDigitalPerimeterDetectDelays__i.i></span><span id=classzk_app_utils_1_1zk_class_1a21ffee7105f368c8f72d6fd36de577f4 class=target></span><span class=pre>void</span> <code>setDigitalPerimeterDetectDelays</code> <span class=sig-paren>(</span> <span class=pre>int</span> <em><span class=pre>min_delay_ns</span></em> , <span class=pre>int</span> <em><span class=pre>max_delay_ns</span></em> <span class=sig-paren>)</span><br>Set the delays (model >= HSM6).</p><p>This function sets delays on the digital perimeter detect</p><p><strong>Return</strong><br>void.</p><p><strong>Parameters</strong></p><ul><li><p><code>min_delay_ns </code>: (input) minimum delay in nanoseconds</p></li><li><p><code>max_delay_ns </code>: (input) maximum delay in nanoseconds</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass21waitForPerimeterEventE8uint32_t></span><span id=_CPPv2N10zkAppUtils7zkClass21waitForPerimeterEventE8uint32_t></span><span id=zkAppUtils::zkClass::waitForPerimeterEvent__uint32_t></span><span id=classzk_app_utils_1_1zk_class_1a0b2fcd99b282a30b779560375eb6e54f class=target></span><span class=pre>void</span> <code>waitForPerimeterEvent</code> <span class=sig-paren>(</span> <span class=pre>uint32_t</span> <em><span class=pre>timeout_ms</span></em> <span class=sig-paren>)</span><br>Wait for a perimeter breach event to be detected.</p><p>This function is called in order to wait for a perimeter breach event to occur. This function blocks the calling thread unless called with a timeout of zero. Note that, in order to receive perimeter events, the zymkey must have been configured to notify the host on either or both of the perimeter detect channels via a call to “zkSetPerimeterEventAction”.</p><p><strong>Parameters</strong></p><ul><li><code>timeout_ms </code>: (input) The maximum amount of time in milliseconds to wait for a perimeter event to arrive.</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass22getPerimeterDetectInfoEPP8uint32_tRi></span><span id=_CPPv2N10zkAppUtils7zkClass22getPerimeterDetectInfoEPP8uint32_tRi></span><span id=zkAppUtils::zkClass::getPerimeterDetectInfo__uint32_tPP.iR></span><span id=classzk_app_utils_1_1zk_class_1a57aa4d041fe70d3d2728b4de44d4e6eb class=target></span><span class=pre>void</span> <code>getPerimeterDetectInfo</code> <span class=sig-paren>(</span> <span class=pre>uint32_t</span> <span class=pre>*</span> <span class=pre>*</span> <em><span class=pre>timestamp_sec</span></em> , <span class=pre>int</span> <span class=pre>&</span> <em><span class=pre>num_timestamps</span></em> <span class=sig-paren>)</span><br>Get current perimeter detect info.</p><p>This function gets the timestamp of the first perimeter detect event for the given channel</p><p><strong>Parameters</strong></p><ul><li><p><code>timestamps_sec </code>: (output) The timestamps for when any events occurred. The index in this array corresponds to the channel number used by zkSetPerimeterEventAction. A 0 value means no breach has occurred on this channel. This array is allocated by this routine and so it must be freed by the caller.</p></li><li><p><code>num_timestamps </code>: (output) The number of timestamps in the returned array</p></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass26clearPerimeterDetectEventsEv></span><span id=_CPPv2N10zkAppUtils7zkClass26clearPerimeterDetectEventsEv></span><span id=zkAppUtils::zkClass::clearPerimeterDetectEvents></span><span id=classzk_app_utils_1_1zk_class_1af94e6c0e537f18e320c65728764e5ca8 class=target></span><span class=pre>void</span> <code>clearPerimeterDetectEvents</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Clear perimeter detect info.</p><p>This function clears all perimeter detect info and rearms all perimeter detect channels</p><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass20getModelNumberStringEv></span><span id=_CPPv2N10zkAppUtils7zkClass20getModelNumberStringEv></span><span id=zkAppUtils::zkClass::getModelNumberString></span><span id=classzk_app_utils_1_1zk_class_1a732b084f85070c00ef2423f76aba29e2 class=target></span><span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>*</span> <code>getModelNumberString</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Get Zymkey model number.</p><p>This function retrieves the model number of the zymkey referred to in a specified context</p><p><strong>Return</strong><br>A pointer to a string containing the Zymkey model number.</p><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass24getFirmwareVersionStringEv></span><span id=_CPPv2N10zkAppUtils7zkClass24getFirmwareVersionStringEv></span><span id=zkAppUtils::zkClass::getFirmwareVersionString></span><span id=classzk_app_utils_1_1zk_class_1a00d5031efc2b7040db08da5e86e85e2c class=target></span><span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>*</span> <code>getFirmwareVersionString</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Get Zymkey firmware version.</p><p>This function retrieves the firmware version of the zymkey referred to in a specified context.</p><p><strong>Return</strong><br>A pointer to a string containing the Zymkey firmware version.</p><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass21getSerialNumberStringEv></span><span id=_CPPv2N10zkAppUtils7zkClass21getSerialNumberStringEv></span><span id=zkAppUtils::zkClass::getSerialNumberString></span><span id=classzk_app_utils_1_1zk_class_1ab545df4772a4c23fae3e970a9e185a38 class=target></span><span class=pre>std</span> <span class=pre>::</span> <span class=pre>string</span> <span class=pre>*</span> <code>getSerialNumberString</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Get Zymkey serial number.</p><p>This function retrieves the serial number of the zymkey referred to in a specified context.</p><p><strong>Return</strong><br>A pointer to a string containing the Zymkey serial number.</p><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></div><div class="breathe-sectiondef docutils container"><p>Module Info</p><p><span id=_CPPv3N10zkAppUtils7zkClass10getCPUTempEv></span><span id=_CPPv2N10zkAppUtils7zkClass10getCPUTempEv></span><span id=zkAppUtils::zkClass::getCPUTemp></span><span id=classzk_app_utils_1_1zk_class_1a6956a4bedbe0baee05318807605dc674 class=target></span><span class=pre>float</span> <code>getCPUTemp</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Get the CPU Temp. (model >= HSM6)</p><p>This function gets the current HSM CPU temp.</p><p><strong>Return</strong><br>The CPU temp as a float.</p><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass11getRTCDriftEv></span><span id=_CPPv2N10zkAppUtils7zkClass11getRTCDriftEv></span><span id=zkAppUtils::zkClass::getRTCDrift></span><span id=classzk_app_utils_1_1zk_class_1a2a9214bf2810417108ea300ff79b6d46 class=target></span><span class=pre>float</span> <code>getRTCDrift</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Get the RTC drift. (model >= HSM6)</p><p>This function gets the current RTC drift.</p><p><strong>Return</strong><br>The RTC drift as a float.</p><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass17getBatteryVoltageEv></span><span id=_CPPv2N10zkAppUtils7zkClass17getBatteryVoltageEv></span><span id=zkAppUtils::zkClass::getBatteryVoltage></span><span id=classzk_app_utils_1_1zk_class_1acaf94e9560d986f54750718ce6f12402 class=target></span><span class=pre>float</span> <code>getBatteryVoltage</code> <span class=sig-paren>(</span> <span class=sig-paren>)</span><br>Get the battery voltage(model >= HSM6).</p><p>This function gets the current battery voltage</p><p><strong>Return</strong><br>the battery voltage as a float.</p><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></div><div class="breathe-sectiondef docutils container"><p>Battery Voltage Monitor</p><p><span id=_CPPv3N10zkAppUtils7zkClass23setBatteryVoltageActionE24ZK_THRESHOLD_ACTION_TYPE></span><span id=_CPPv2N10zkAppUtils7zkClass23setBatteryVoltageActionE24ZK_THRESHOLD_ACTION_TYPE></span><span id=zkAppUtils::zkClass::setBatteryVoltageAction__ZK_THRESHOLD_ACTION_TYPE></span><span id=classzk_app_utils_1_1zk_class_1a374940c6de51d1a2bf9259d0542e0b0c class=target></span><span class=pre>void</span> <code>setBatteryVoltageAction</code> <span class=sig-paren>(</span> <span class=pre>ZK_THRESHOLD_ACTION_TYPE</span> <em><span class=pre>action</span></em> <span class=sig-paren>)</span><br>Set battery voltage threshold action. (model >= HSM6)</p><p>This function specifies the action to take when the battery voltage falls below the threshold set by zkSetBatteryVoltageThreshold. If this function is never called, do nothing is default. There are three actions:</p><ul><li><p>Do nothing</p></li><li><p>Go to sleep until battery is replaced</p></li><li><p>Self-destruct</p><p><strong>Parameters</strong></p><ul><li><p><code>action </code>: (input) The action to apply, specify one of the ZK_THRESHOLD_ACTION_TYPE:</p><ul><li><p>Do nothing (ZK_ACTION_NONE)</p></li><li><p>Sleep (ZK_ACTION_SLEEP)</p></li><li><p>Self-destruct (ZK_ACTION_SELF_DESTRUCT)</p></li></ul></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass26setBatteryVoltageThresholdEf></span><span id=_CPPv2N10zkAppUtils7zkClass26setBatteryVoltageThresholdEf></span><span id=zkAppUtils::zkClass::setBatteryVoltageThreshold__float></span><span id=classzk_app_utils_1_1zk_class_1af48b1f11765f94cc8f707101f197eeb5 class=target></span><span class=pre>void</span> <code>setBatteryVoltageThreshold</code> <span class=sig-paren>(</span> <span class=pre>float</span> <em><span class=pre>threshold</span></em> <span class=sig-paren>)</span><br>Sets the battery voltage threshold. (model >= HSM6)</p><p>This function sets the threshold at which if the battery voltage falls bellow, the action set by zkSetBatteryVoltageAction will be carried out. The recommended threshold is 2.3V. If this function isn’t called 2.5V is assumed by default.</p><p><strong>Parameters</strong></p><ul><li><code>threshold </code>: (input) The threshold in Volts.</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></div><div class="breathe-sectiondef docutils container"><p>CPU Temperature Monitor</p><p><span id=_CPPv3N10zkAppUtils7zkClass16setCPUTempActionE24ZK_THRESHOLD_ACTION_TYPE></span><span id=_CPPv2N10zkAppUtils7zkClass16setCPUTempActionE24ZK_THRESHOLD_ACTION_TYPE></span><span id=zkAppUtils::zkClass::setCPUTempAction__ZK_THRESHOLD_ACTION_TYPE></span><span id=classzk_app_utils_1_1zk_class_1ada7ce931928fedde9cec5c15cb1d1d91 class=target></span><span class=pre>void</span> <code>setCPUTempAction</code> <span class=sig-paren>(</span> <span class=pre>ZK_THRESHOLD_ACTION_TYPE</span> <em><span class=pre>action</span></em> <span class=sig-paren>)</span><br>Set HSM CPU temperature threshold action. (model >= HSM6)</p><p>This function specifies the action to take when the HSM CPU temperature falls below the threshold set by zkSetCPULowTempThreshold, or rises above the threshold set by zkSetCPUHighTempThreshold. There are two actions to apply:</p><ul><li><p>Do nothing</p></li><li><p>Self-destruct</p><p><strong>Parameters</strong></p><ul><li><p><code>action </code>: (input) The action to apply, used it’s named constant from ZK_THRESHOLD_ACTION_TYPE:</p><ul><li><p>Do nothing (ZK_ACTION_NONE)</p></li><li><p>Self-destruct (ZK_ACTION_SELF_DESTRUCT)</p></li></ul></li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul></li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass22setCPULowTempThresholdEf></span><span id=_CPPv2N10zkAppUtils7zkClass22setCPULowTempThresholdEf></span><span id=zkAppUtils::zkClass::setCPULowTempThreshold__float></span><span id=classzk_app_utils_1_1zk_class_1aee3dcb54cfa647f1f51b81d539ceb1d6 class=target></span><span class=pre>void</span> <code>setCPULowTempThreshold</code> <span class=sig-paren>(</span> <span class=pre>float</span> <em><span class=pre>threshold</span></em> <span class=sig-paren>)</span><br>Sets the HSM CPU low temperature threshold. (model >= HSM6)</p><p>This function sets the threshold at which if the on-board HSM CPU’s tempreature falls below, the action set by zkSetCPUTempAction will be carried out. WARNING: You can lock yourself out in dev mode if you set a threshold above the CPU’s ambient temperature. The recommended setting is no more than 20C. If no threshold is set, -10 degrees Celsius is set as default.</p><p><strong>Parameters</strong></p><ul><li><code>threshold </code>: (input) The threshold in celsius.</li></ul><p><strong>Exceptions</strong></p><ul><li><code>zkAppUtilsException </code>: upon error</li></ul><p><span id=_CPPv3N10zkAppUtils7zkClass23setCPUHighTempThresholdEf></span><span id=_CPPv2N10zkAppUtils7zkClass23setCPUHighTempThresholdEf></span><span id=zkAppUtils::zkClass::setCPUHighTempThreshold__float></span><span id=classzk_app_utils_1_1zk_class_1a7ca53d9e747c76a88be85aad6ed60e3b class=target></span><span class=pre>void</span> <code>setCPUHighTempThreshold</code> <span class=sig-paren>(</span> <span class=pre>float</span> <em><span class=pre>threshold</span></em> <span class=sig-paren>)</span><br>Sets the HSM CPU high temperature threshold. (model >= HSM6)</p><p>This function sets the threshold at which if the on-board HSM CPU’s tempreature rises above, the action set by zkSetCPUTempAction will be carried out. WARNING: You can lock yourself out in dev mode if you set a threshold below the CPU’s ambient temperature. The recommended setting is no less than 40C. If no threshold is set, 65 degrees celsius is set as default.</p><p><strong>Return</strong><br>0 for success, less than 0 for failure.</p><p><strong>Parameters</strong></p><ul><li><code>threshold </code>: (input) The threshold in celsius.</li></ul></div></div><p class=edit-page><a href=https://github.com/zymbit-docs/docs/blob/master/content/api/cpp_api.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></p><div class="docs-navigation d-flex justify-content-between"><a href=https://docs.zymbit.com/api/c_api/><div class="card my-1"><div class="card-body py-2">&larr; C API Documentation</div></div></a><a class=ml-auto href=https://docs.zymbit.com/api/api_docs_intro/><div class="card my-1"><div class="card-body py-2">Intro to Zymkey Application Utilities &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-fluid><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://gohugo.io/>Hugo</a>.</li><li class=list-inline-item>Page last updated on 2021-03-26 21:43 UTC (<a href=https://github.com/zymbit-docs/docs/commit/0c3f3486b75aa54dc0302b53c5c6f67c65826abb><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg> <code>0c3f348</code></a>).</li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-right"><ul class=list-inline></ul></div></div></div></footer><script src=https://docs.zymbit.com/main.f6b484f556ad1f3bcf6061082139a2f21fa759f13930c39a25fe4a9f78f35e64122c2d86dffd56e67b292dabbda4095d8077194f196e0e348441c106a9f3d40e.js integrity="sha512-9rSE9VatHzvPYGEIITmi8h+nWfE5MMOaJf5Kn3jzXmQSLC2G3/1W5nspLau9pAldgHcZTxluDjSEQcEGqfPUDg==" crossorigin=anonymous defer></script><script src=https://docs.zymbit.com/index.min.95c2fb57984ca6cb1914e6658c1095cc47073a398c805d5ee842114fab739d64b4d5cd0626cda1be56c95e7f8c6e9c4d231866d1065245c873d731a6a7b01c5e.js integrity="sha512-lcL7V5hMpssZFOZljBCVzEcHOjmMgF1e6EIRT6tznWS01c0GJs2hvlbJXn+MbpxNIxhm0QZSRchz1zGmp7AcXg==" crossorigin=anonymous defer></script></body></html>